<!DOCTYPE html>
<html>
  <head>
    <title>Warpweighted 2.0</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="container">
      <div class="row">
	<h2>Warpweighted 2.0</h2>
	<div class="col-xs-12 col-sm-3">
          <form id="params" action="." method="POST">
	    <b>Draft Pattern</b><br>
	    <table id="draft" class="table table-striped">
	      <tr>
		<td><input type="checkbox"/></td>
		<td><input type="checkbox"/></td>
		<td><input type="checkbox"/></td>
		<td><input type="checkbox"/></td>
	      </tr>
	      <tr>
		<td><input type="checkbox"/></td>
		<td><input type="checkbox"/></td>
		<td><input type="checkbox"/></td>
		<td><input type="checkbox"/></td>
	      </tr>
	    </table>
	    <table class="table table-striped">
	      <tr><td>Size</td>
		<td> <input type="number" id="warp-threads" value='4' onchange="update();" style="width:2em;"/></td>
		<td> <input type="number" id="weft-threads" value='4' onchange="update();" style="width:2em;"/></td>
	      </tr>
	    </table>
	    <b>Yarn Parameters</b><br>
	    <table class="table table-striped">
	      <tr><td>Thread width</td><td><input type="number" id="thread-width" value='0.8' style="width:5em;"/></td></tr>
	      <tr><td>Weave depth</td><td><input type="number" id="weave-depth" value='0.5' style="width:5em;"/></td></tr>
	    </table>
	  </form>
	</div>
	<div class="col-xs-12 col-sm-9">
	  <canvas class="canvas" id="webgl-canvas" width="960" height="540"></canvas>
	  <canvas class="canvas" id="canvas" width="960" height="540"></canvas>
	</div>
	
	<div class="code-container" style="display: none;">
	  <textarea id="code"></textarea>
	  output
	  <pre><div id="output"></div></pre>
	</div>
      </div>
  </body>
  <script src="js/jquery-1.9.1.min.js"></script>
  <script src="js/jquery-1.9.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="flx/js/glMatrix.js"></script>
  <script src="flx/js/glObjLoader.js"></script>
  <script src="flx/js/glPlyLoader.js"></script>
  <script src="flx/js/ditto.js"></script>
  <script>
    $( document ).ready(function() {
    init_resources({"flx/scm/texture.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define textures ())\n(define textures-load-outstanding 0)\n(define textures-total-load 0)\n\n(define (get-texture name)\n  (foldl\n   (lambda (t r)\n     (if (and (not r) (eq? (car t) name))\n         (cadr t) r))\n   #f\n   textures))\n\n(define (textures-loaded?)\n  (eq? textures-load-outstanding 0))\n\n(define (load-texture-impl! gl name)\n  (if (assoc name textures)\n      name\n      (let ((texture (gl.createTexture)))\n\t(set! textures-load-outstanding (+ textures-load-outstanding 1))\n\t(set! textures-total-load (+ textures-total-load 1))\n        (set! texture.image \n\t      (load-resource-img \n\t       name\n\t       (lambda (image)\n\t\t ;;(msg (list \"loaded\" name))\n\t\t (set! textures-load-outstanding (- textures-load-outstanding 1))\n\t\t (gl.bindTexture gl.TEXTURE_2D texture)\n\t\t (gl.pixelStorei gl.UNPACK_FLIP_Y_WEBGL true)\n\t\t (gl.texImage2D gl.TEXTURE_2D 0 gl.RGBA gl.RGBA gl.UNSIGNED_BYTE image)\n\t\t (gl.generateMipmap gl.TEXTURE_2D)\n;\t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_MAG_FILTER gl.LINEAR)\n\t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_MIN_FILTER gl.LINEAR_MIPMAP_LINEAR)\n\t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_MAG_FILTER gl.LINEAR)\n;\t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_MIN_FILTER gl.LINEAR)\n\t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_WRAP_S gl.CLAMP_TO_EDGE)\n \t\t (gl.texParameteri gl.TEXTURE_2D gl.TEXTURE_WRAP_T gl.CLAMP_TO_EDGE)\n\t\t (gl.bindTexture gl.TEXTURE_2D null)\n\t\t (set! textures (cons (list name texture) textures)))))\n        ;; (console.log (+ \"loading \" name))\n        name)))\n\n(define (bind-texture gl shader name)\n  (let ((texture (get-texture name)))\n    ;; may not have loaded yet\n    (when texture\n          (gl.activeTexture gl.TEXTURE0)\n          (gl.bindTexture gl.TEXTURE_2D texture)\n          (gl.uniform1i shader.texture 0))))\n", "scm/constructor.jscm": ";; -*- mode: scheme; -*-\n\n(load \"flx/scm/fluxus.jscm\")\n\n(define (constructor code pc tx col prims)\n  (list code pc tx col prims))\n\n(define (constructor-code p) (list-ref p 0))\n(define (constructor-pc p) (list-ref p 1))\n(define (constructor-tx p) (list-ref p 2))\n(define (constructor-col p) (list-ref p 3))\n(define (constructor-prims p) (list-ref p 4))\n\n(define (constructor-update-tx tx instr)\n  (cond\n   ((eq? instr \"r\") (mrotate tx (vector 0 0 1) (* -90 rad-conv)))\n   ((eq? instr \"l\") (mtranslate\n\t\t     (mrotate tx (vector 0 0 1) (* 90 rad-conv))\n\t\t     (vector 1 -1 0)))\n   (else (mtranslate tx (vector 1 0 0)))))\n\n\n(define (constructor-build-part c instr parts)\n  (with-state\n   (colour (constructor-col c))\n   (concat (constructor-tx c))\n   (cond\n    ((eq? instr \"fu\") (build-instance (list-ref parts 0)))\n    ((eq? instr \"fd\") (build-instance (list-ref parts 1)))\n    ((eq? instr \"r\") (build-instance (list-ref parts 2)))\n    ((eq? instr \"l\") (build-instance (list-ref parts 3)))\n    ((eq? instr \"u\") (build-instance (list-ref parts 4)))\n    ((eq? instr \"d\") (build-instance (list-ref parts 5)))\n    (else 0))))\n\n(define (constructor-update c parts)\n  (if (< (constructor-pc c) (length (constructor-code c)))\n      (let ((instr (list-ref (constructor-code c)\n\t\t\t     (constructor-pc c))))\n\t;; build the prim before (mutably??!) altering tx \n\t(let ((prim (constructor-build-part c instr parts)))\n\t  (constructor\n\t   (constructor-code c)\n\t   (+ (constructor-pc c) 1)\n\t   (constructor-update-tx (constructor-tx c) instr)\n\t   (constructor-col c)\n\t   (append (constructor-prims c) prim))))\n      c))\n", "flx/scm/canvas-widgets.jscm": ";; -*- mode: scheme; -*-\n;; Viruscraft Copyright (C) 2018 FoAM Kernow\n\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(load \"flx/scm/canvas.jscm\")\n\n(define (inside-box? px py x y w h)\n  (and (and (> px x) (< px (+ x w)))\n       (and (> py y) (< py (+ y h)))))\n\n(define (draw-circle x y radius)\n  (ctx.beginPath)\n  (ctx.arc x y radius 0 (* Math.PI 2))\n  (ctx.stroke))\n\n(define (draw-line x y x2 y2)\n  (ctx.beginPath)\n  (ctx.moveTo x y)\n  (ctx.lineTo x2 y2)\n  (ctx.stroke))\n\n;; unholy mix of 3d and 2d\n(define (make-mesh-button pos mesh size text fn) \n  (let ((prim (with-state\n\t       (translate pos)\n\t       (load-primitive mesh))))\n    (list pos text size fn \n\t  prim (primitive-screen-pos prim))))\n\n(define (mesh-button-pos b) (list-ref b 0))\n(define (mesh-button-text b) (list-ref b 1))\n(define (mesh-button-size b) (list-ref b 2))\n(define (mesh-button-fn b) (list-ref b 3))\n(define (mesh-button-prim b) (list-ref b 4))\n(define (mesh-button-canvas-pos b) (list-ref b 5))\n\n(define (mesh-button-update b m)\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (vx (mesh-button-canvas-pos b)) (mesh-button-size b)) \n     (- (vy (mesh-button-canvas-pos b)) (mesh-button-size b))\n     (* (mesh-button-size b) 2)\n     (* (mesh-button-size b) 2))\n    (if canvas-mouse-clicked\n\t(let ((fn (mesh-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (fn m))\n\t(with-primitive \n\t (mesh-button-prim b)\n\t (colour (rndvec))\n\t m)))\n   (else m)))\n\n(define (mesh-button-render! b)\n  (let ((m (ctx.measureText (mesh-button-text b))))\n    (ctx.fillText \n     (mesh-button-text b) \n     (- (vx (mesh-button-canvas-pos b)) (/ m.width 2)) \n     (+ (vy (mesh-button-canvas-pos b)) 20)))\n  (with-primitive \n   (mesh-button-prim b)\n   (rotate (vector 1 1 0.5))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-text-button pos size text fn) \n  (list pos text size fn text))\n\n(define (text-button-pos b) (list-ref b 0))\n(define (text-button-text b) (list-ref b 1))\n(define (text-button-size b) (list-ref b 2))\n(define (text-button-fn b) (list-ref b 3))\n\n(define (text-button-update b m)\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (vx (text-button-pos b)) (text-button-size b)) \n     (- (vy (text-button-pos b)) (text-button-size b))\n     (* (text-button-size b) 2) \n     (* (text-button-size b) 2))\n    (if canvas-mouse-clicked\n\t(let ((fn (text-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (fn m))\n\tm))\n   (else m)))\n\n(define (text-button-render! b)\n  (let ((m (ctx.measureText (text-button-text b))))\n    (ctx.fillText \n     (text-button-text b) \n     (- (vx (text-button-pos b)) (/ m.width 2)) \n     (+ (vy (text-button-pos b)) 20))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-image-button x y image-name text y-shift anim fn) \n  (let ((image (find-image image-name image-lib)))\n    (list x y image text y-shift anim fn (/ image.width 2) (/ image.height 2))))\n\n(define (image-button-x b) (list-ref b 0))\n(define (image-button-y b) (list-ref b 1))\n(define (image-button-image b) (list-ref b 2))\n(define (image-button-text b) (list-ref b 3))\n(define (image-button-y-shift b) (list-ref b 4))\n(define (image-button-anim b) (list-ref b 5))\n(define (image-button-fn b) (list-ref b 6))\n(define (image-button-width b) (list-ref b 7))\n(define (image-button-height b) (list-ref b 8))\n\n(define (image-button-update b m)\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (image-button-x b) (image-button-width b)) \n     (- (image-button-y b) (image-button-height b))\n     (* (image-button-width b) 2) \n     (* (image-button-height b) 2))\n    (if canvas-mouse-clicked\n\t(let ((fn (image-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (play-sound \"button.wav\")\n\t  (fn m))\n\tm))\n   (else m)))\n\n(define (image-button-render! b)\n  (ctx.save)\n  (ctx.translate \n   (image-button-x b)\n   (image-button-y b))\n  (when (eq? (image-button-anim b) \"twist\")\n\t(ctx.rotate \n\t (* 0.25 (sin (* (+ (modulo (image-button-x b) 109) (time)) 3)))))\n  (when (eq? (image-button-anim b) \"spin\")\n\t(ctx.rotate (+ (modulo (image-button-x b) 109) (* (time) 1))))\n  (when (eq? (image-button-anim b) \"zoom\")\n\t(let ((sc (* 0.1 (sin (* (modulo (image-button-x b) 23) 0.5 (time))))))\n\t  (ctx.scale (+ 1 sc) (+ 1 sc))))\n  \n  (ctx.translate \n   (- (image-button-width b))\n   (- (image-button-height b)))\n\n  (ctx.drawImage (image-button-image b) 0 0)\n  (ctx.restore)\n\n  (wrap-centred-text\n   ctx\n   (image-button-text b) \n   (+ (image-button-x b) 3) ;; is this my eyes??\n   (+ (image-button-y b) 10 (image-button-y-shift b))\n   150 40))\n\n\n  ;; (let ((m (ctx.measureText (image-button-text b))))\n  ;;   (ctx.fillText \n  ;;    (image-button-text b) \n  ;;    (- (image-button-x b) (/ m.width 2)) \n  ;;    (+ (image-button-y b) 10))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-rect-button x y w h fn) \n  (list x y w h fn))\n\n(define (rect-button-x b) (list-ref b 0))\n(define (rect-button-y b) (list-ref b 1))\n(define (rect-button-width b) (list-ref b 2))\n(define (rect-button-height b) (list-ref b 3))\n(define (rect-button-fn b) (list-ref b 4))\n\n(define (rect-button-update b m)\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (rect-button-x b)\n     (rect-button-y b)\n     (rect-button-width b) \n     (rect-button-height b))\n    (if canvas-mouse-clicked\n\t(let ((fn (rect-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (fn m))\n\tm))\n   (else m)))\n  \n(define (rect-button-render! b)\n  (ctx.strokeRect\n   (rect-button-x b)\n   (rect-button-y b)\n   (rect-button-width b)\n   (rect-button-height b)))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-toggle-button x y image-name image-name2 text state) \n  (let ((image (find-image image-name image-lib))\n\t(image2 (find-image image-name2 image-lib)))\n    (list x y image image2 text state (/ image.width 2) (/ image.height 2))))\n\n(define (toggle-button-x b) (list-ref b 0))\n(define (toggle-button-y b) (list-ref b 1))\n(define (toggle-button-image b) (list-ref b 2))\n(define (toggle-button-image2 b) (list-ref b 3))\n(define (toggle-button-text b) (list-ref b 4))\n(define (toggle-button-state b) (list-ref b 5))\n(define (toggle-button-modify-state b v) (list-replace b 5 v))\n(define (toggle-button-width b) (list-ref b 6))\n(define (toggle-button-height b) (list-ref b 7))\n\n(define (toggle-button-update b)\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (toggle-button-x b) (toggle-button-width b)) \n     (- (toggle-button-y b) (toggle-button-height b))\n     (* (toggle-button-width b) 2) \n     (* (toggle-button-height b) 2))\n    (cond (canvas-mouse-clicked\n\t   (set! canvas-event-occurred #t)\n\t   (set! canvas-mouse-clicked #f)\n\t   (toggle-button-modify-state b (not (toggle-button-state b))))\n\t  (else b)))\n   (else b)))\n\n(define (toggle-button-render! b)\n  (ctx.save)\n  (ctx.translate \n   (toggle-button-x b)\n   (toggle-button-y b))\n  (ctx.translate \n   (- (toggle-button-width b))\n   (- (toggle-button-height b)))\n  (ctx.drawImage (toggle-button-image b) 0 0)\n  (when (toggle-button-state b)\n\t(ctx.drawImage (toggle-button-image2 b) 0 0))\n  (ctx.restore)\n  \n  (let ((m (ctx.measureText (toggle-button-text b))))\n    (ctx.fillText \n     (toggle-button-text b) \n     (- (toggle-button-x b) (/ m.width 2)) \n     (- (toggle-button-y b) 30))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; two images, one that animates when clicked\n\n(define (make-animated-button x y image-name image2-name fn) \n  (let ((image (find-image image-name image-lib))\n\t(image2 (find-image image2-name image-lib)))\n    (list x y image image2 fn (/ image.width 2) (/ image.height 2) -1 \"opening\")))\n\n(define (animated-button-x b) (list-ref b 0))\n(define (animated-button-y b) (list-ref b 1))\n(define (animated-button-image b) (list-ref b 2))\n(define (animated-button-image2 b) (list-ref b 3))\n(define (animated-button-fn b) (list-ref b 4))\n(define (animated-button-width b) (list-ref b 5))\n(define (animated-button-height b) (list-ref b 6))\n(define (animated-button-time b) (list-ref b 7))\n(define (animated-button-modify-time b v) (list-replace b 7 v))\n(define (animated-button-state b) (list-ref b 8))\n(define (animated-button-modify-state b v) (list-replace b 8 v))\n\n(define (animated-button-update b m)\n  (if (eq? (animated-button-state b) \"filling\")\n      (set! b (animated-button-modify-time \n\t       b (+ (animated-button-time b) 2)))  \n      (set! b (animated-button-modify-time \n\t       b (+ (animated-button-time b) 2))))\n  (cond\n   ((inside-box?\n     canvas-mouse-x canvas-mouse-y\n     (- (animated-button-x b) (animated-button-width b)) \n     (- (animated-button-y b) (animated-button-height b))\n     (* (animated-button-width b) 2) \n     (* (animated-button-height b) 2))\n    (if canvas-mouse-clicked\n\t(let ((fn (animated-button-fn b))) \n\t  (set! canvas-event-occurred #t)\n\t  (set! canvas-mouse-clicked #f)\n\t  (fn m))\n\tm))\n   (else m)))\n\n(define (animated-button-render! b)\n  (ctx.save)\n  (ctx.translate \n   (animated-button-x b)\n   (animated-button-y b))\n  (ctx.translate \n   (- (animated-button-width b))\n   (- (animated-button-height b)))\n  (ctx.drawImage (animated-button-image b) 0 0)\n  (ctx.drawImage (animated-button-image2 b) 0 \n\t\t (if (eq? (animated-button-state b) \"filling\")\n\t\t     (- (min 75 (animated-button-time b)) 75)\n\t\t     (- (min 75 (animated-button-time b)))))\n  (ctx.restore))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; 3d version...\n\n;; (define (make-animated-button x y px py image-name image2-name fn) \n;;   (let ((image (with-state \n;; \t\t(translate (vector x y 0))\n;; \t\t(scale (vmul (vector 1 4.6 1) 6))\n;; \t\t(texture (load-texture image-name))\n;; \t\t(load-primitive \"models/plane.obj\")))\n;; \t(image2 (with-state \n;; \t\t (translate (vector x y 0))\n;; \t\t (scale (vmul (vector 1 4.6 1) 6))\n;; \t\t (texture (load-texture image2-name))\n;; \t\t (load-primitive \"models/plane.obj\"))))\n;;     (list px py image image2 fn 61 280 -1 \"opening\")))\n\n;; (define (animated-button-x b) (list-ref b 0))\n;; (define (animated-button-y b) (list-ref b 1))\n;; (define (animated-button-px b) (list-ref b 2))\n;; (define (animated-button-py b) (list-ref b 3))\n;; (define (animated-button-image b) (list-ref b 4))\n;; (define (animated-button-image2 b) (list-ref b 5))\n;; (define (animated-button-fn b) (list-ref b 6))\n;; (define (animated-button-width b) (list-ref b 7))\n;; (define (animated-button-height b) (list-ref b 8))\n;; (define (animated-button-time b) (list-ref b 9))\n;; (define (animated-button-modify-time b v) (list-replace b 9 v))\n;; (define (animated-button-state b) (list-ref b 10))\n;; (define (animated-button-modify-state b v) (list-replace b 10 v))\n\n;; (define (animated-button-update b m)\n;;   (set! b (animated-button-modify-time \n;; \t   b (+ (animated-button-time b) 2)))  \n;;   (cond\n;;    ((inside-box?\n;;      canvas-mouse-x canvas-mouse-y\n;;      (- (animated-button-px b) (animated-button-width b)) \n;;      (- (animated-button-py b) (animated-button-height b))\n;;      (* (animated-button-width b) 2) \n;;      (* (animated-button-height b) 2))\n;;     (msg \"clicked\")\n;;     (if canvas-mouse-clicked\n;; \t(let ((fn (animated-button-fn b))) \n;; \t  (set! canvas-event-occurred #t)\n;; \t  (set! canvas-mouse-clicked #f)\n;; \t  (fn m))\n;; \tm))\n;;    (else m)))\n\n;; (define (animated-button-render! b)\n;;   (with-primitive\n;;    (animated-button-image2 b)\n;;    (identity)\n;;    (translate (vector (animated-button-x b) \n;; \t\t      (animated-button-y b) 0))\n\n;;    (translate (vector 0\n;; \t\t      (* \n;; \t\t       (if (eq? (animated-button-state b) \"filling\")\n;; \t\t\t   (- (min 75 (animated-button-time b)) 75)\n;; \t\t\t   (- (min 75 (animated-button-time b))))\n;; \t\t       3)\n;; \t\t      0))  \n\n;;    (scale (vmul (vector 1 4.6 1) 6))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-textbox x y style gap just text) (list x y style gap just text))\n\n(define (textbox-x t) (list-ref t 0))\n(define (textbox-y t) (list-ref t 1))\n(define (textbox-style t) (list-ref t 2))\n(define (textbox-gap t) (list-ref t 3))\n(define (textbox-just t) (list-ref t 4))\n(define (textbox-text t) (list-ref t 5))\n\n(define (centre-text ctx text x y)\n  (let ((m (ctx.measureText text)))\n    (ctx.fillText text (- x (/ m.width 2)) y)))\n\n(define (textbox-render! s)\n  (set! ctx.font (string-append (textbox-style s) \" \" canvas-font))\n  (index-for-each\n   (lambda (i text)\n     (let ((m (ctx.measureText text)))\n       (ctx.fillText \n\ttext\n\t(- (textbox-x s) (/ m.width 2)) \n\t(+ (textbox-y s) (* i (textbox-gap s))))))\n   (textbox-text s))\n  (canvas-init-defaults))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (make-slider x y w p fn) (list x y w p fn))\n(define (slider-x s) (list-ref s 0))\n(define (slider-y s) (list-ref s 1))\n(define (slider-w s) (list-ref s 2))\n(define (slider-p s) (list-ref s 3))\n(define (slider-update-p s v) (list-replace s 3 v))\n(define (slider-fn s) (list-ref s 4))\n\n(define (slider-update s)\n  (cond\n   ((and (or canvas-is-dragging (or (eq? canvas-mouse-state \"down\") (eq? canvas-mouse-state \"clicked\")))\n\t (inside-box?\n\t  canvas-mouse-x canvas-mouse-y\n\t  (slider-x s) (- (slider-y s) 20)\n\t  (slider-w s) 40))\n    (set! canvas-event-occurred #t)\n    (let ((fn (slider-fn s))) (fn (- canvas-mouse-x (slider-x s))))\n    (slider-update-p s (- canvas-mouse-x (slider-x s))))\n   (else s)))\n\n(define (slider-render! s)\n  (ctx.beginPath)\n  (ctx.moveTo (slider-x s) (slider-y s))\n  (ctx.lineTo (+ (slider-x s) (slider-w s)) (slider-y s))\n  (ctx.stroke)\n  (set! ctx.fillStyle \"#81eae3\")\n  (ctx.beginPath)\n  (ctx.moveTo (+ (slider-x s) (slider-p s)) (slider-y s))\n  (ctx.arc (+ (slider-x s) (slider-p s)) (slider-y s) 15 0 (* Math.PI 2))\n  (ctx.fill)\n  (set! ctx.fillStyle \"#000\"))\n\n\n(define (make-window x y w h) (list x y w h))\n\n(define (window-x w) (list-ref w 0))\n(define (window-y w) (list-ref w 1))\n(define (window-w w) (list-ref w 2))\n(define (window-h w) (list-ref w 3))\n\n(define (window-render! w)\n  (let ((grd (ctx.createLinearGradient \n\t      (window-x w) (window-y w) \n\t      (+ (window-x w) (window-w w)) 0)))\n    (set! ctx.globalAlpha 0.2)\n    (grd.addColorStop 0 \"#00ff00\")\n    (grd.addColorStop 1 \"#ffffff\")\n    (set! ctx.fillStyle grd)\n    (ctx.fillRect (window-x w) (window-y w) \n\t\t  (window-w w) (window-h w))\n    (set! ctx.globalAlpha 1)\n    (canvas-init-defaults)))\n\n(define (make-progress-bar x y w h text style p) (list x y w h text style p))\n\n(define (progress-bar-x w) (list-ref w 0))\n(define (progress-bar-y w) (list-ref w 1))\n(define (progress-bar-w w) (list-ref w 2))\n(define (progress-bar-h w) (list-ref w 3))\n(define (progress-bar-text w) (list-ref w 4))\n(define (progress-bar-style w) (list-ref w 5))\n(define (progress-bar-p w) (list-ref w 6))\n(define (progress-bar-update-p w v) (list-replace w 6 v))\n\n(define (progress-bar-render! w)\n  (let ((grd (ctx.createLinearGradient \n\t      (progress-bar-x w) (progress-bar-y w) \n\t      (+ (progress-bar-x w) (progress-bar-w w)) 0)))\n    (set! ctx.strokeStyle \"#000\")\n    (ctx.strokeRect (progress-bar-x w) (progress-bar-y w) \n\t\t    (progress-bar-w w) (progress-bar-h w))\n    (set! ctx.globalAlpha 0.5)\n    (grd.addColorStop 0 \"#00ff00\")\n    (grd.addColorStop 1 \"#ffffff\")\n    (set! ctx.fillStyle grd)\n    (ctx.fillRect (progress-bar-x w) (progress-bar-y w) \n\t\t  (* (progress-bar-w w)\n\t\t     (/ (clamp (progress-bar-p w) 0 100) 100))\n\t\t  (progress-bar-h w))\n    (set! ctx.globalAlpha 1)\n    (set! ctx.font (progress-bar-style w))\n    (set! ctx.fillStyle \"#000\")\n    (let ((txt (string-append (progress-bar-text w) \" \" \n\t\t\t      (clamp (floor (progress-bar-p w)) 0 100) \"%\")))\n      (let ((m (ctx.measureText txt)))\n\t(ctx.fillText \n\t txt \n\t (- (+ (progress-bar-x w) (/ (progress-bar-w w) 2)) (/ m.width 2)) \n\t (+ (progress-bar-y w) 25))))\n    \n    (canvas-init-defaults)))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define random-offsets (build-list 100 (lambda (_) (rndf))))\n\n(define (make-coin-stack x y image-name text count) \n  (let ((image (find-image image-name image-lib)))\n    (list x y image text count (random 1000))))\n\n(define (coin-stack-x b) (list-ref b 0))\n(define (coin-stack-y b) (list-ref b 1))\n(define (coin-stack-image b) (list-ref b 2))\n(define (coin-stack-text b) (list-ref b 3))\n(define (coin-stack-count b) (list-ref b 4))\n(define (coin-stack-modify-count b v) (list-replace b 4 v))\n(define (coin-stack-seed b) (list-ref b 5))\n  \n(define (coin-stack-render! b)\n  (js \"for (i=0; i<coin_stack_count(b); i++) {\")\n  (ctx.drawImage (coin-stack-image b) \n\t\t (+ (coin-stack-x b)\n\t\t    (* 10 (- (list-ref random-offsets (modulo (+ i (coin-stack-seed b)) 100)) \n\t\t\t     0.5)))\n\t\t (- (coin-stack-y b) (* i 10)))\n  (js \"}\")  \n  (let ((m (ctx.measureText (coin-stack-text b))))\n    (ctx.fillText \n     (coin-stack-text b) \n     (+ (- (coin-stack-x b) (/ m.width 2)) 25) \n     (+ (coin-stack-y b) 75))))\n\n(define (wrap-text ctx text x y max-width line-height)\n  (define (wrap-text-inner words line y)\n    (cond\n     ((null? words)\n      (ctx.fillText line x y))\n     (else\n      (let ((test-line (+ line (car words) \" \")))\n        (let ((metrics (ctx.measureText test-line)))\n          (cond ((> metrics.width max-width)\n                 (ctx.fillText line x y)\n                 (wrap-text-inner (cdr words)\n                                  (+ (car words) \" \")\n                                  (+ y line-height)))\n                (else\n                 (wrap-text-inner\n                  (cdr words) test-line y))))))))\n  (wrap-text-inner (text.split \" \") \"\" y))\n\n(define (centred-text ctx text x y)\n  (let ((m (ctx.measureText text)))\n    (ctx.fillText text (- x (/ m.width 2)) y)))\n\n(define (wrap-centred-text ctx text x y max-width line-height)\n  (define (wrap-text-inner words line y)\n    (cond\n     ((null? words)\n      (centred-text ctx line x y))\n     (else\n      (let ((test-line (+ line (car words) \" \")))\n        (let ((metrics (ctx.measureText test-line)))\n          (cond ((> metrics.width max-width)\n                 (centred-text ctx line x y)\n                 (wrap-text-inner (cdr words)\n                                  (+ (car words) \" \")\n                                  (+ y line-height)))\n                (else\n                 (wrap-text-inner\n                  (cdr words) test-line y))))))))\n  (wrap-text-inner (text.split \" \") \"\" y))\n\n", "flx/scm/glsl.jscm": ";; -*- mode: scheme; -*-\n;; Viruscraft (C) 2017 FoAM Kernow\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (compile-shader gl type code)\n  (let ((shader (gl.createShader type)))\n    (gl.shaderSource shader code)\n    (gl.compileShader shader)\n    (if (not (gl.getShaderParameter shader gl.COMPILE_STATUS))\n\t(begin\n\t  (alert (gl.getShaderInfoLog shader))\n\t  #f)\n\tshader)))\n\n;; can\'t call this before link time - so can\'t use it to automatically\n;; bind locations to names :( so we need to pass in expected attrib-names\n(define (get-attrib-info-list gl program)\n  (define (_ i c)\n    (if (>= i c)\n\t\'()\n\t(cons (gl.getActiveAttrib program i) (_ (+ i 1) c))))\n  (_ 0 (gl.getProgramParameter program gl.ACTIVE_ATTRIBUTES)))\n\n      ;; (let ((attrib-list (get-attrib-info-list gl shader-program)))\n      ;; \t(msg attrib-list)\n      ;; \t(index-for-each\n      ;; \t (lambda (index info)\n      ;; \t   (msg (+ index \" \" info.name))\n      ;; \t   (gl.bindAttribLocation shader-program index info.name))\n      ;; \t attrib-list)\n\n\n      ;; \t(index-for-each\n      ;; \t (lambda (index info)\n      ;; \t   (gl.enableVertexAttribArray index))\n      ;; \t attrib-list))\n\n;; this version is useful, however...\n(define (get-uniform-info-list gl program)\n  (define (_ i c)\n    (if (>= i c)\n\t\'()\n\t(cons (gl.getActiveUniform program i) (_ (+ i 1) c))))\n  (_ 0 (gl.getProgramParameter program gl.ACTIVE_UNIFORMS)))\n\n(define (build-shader gl attrib-names vert frag)\n  (let ((fragment-shader (compile-shader gl gl.FRAGMENT_SHADER frag))\n\t(vertex-shader (compile-shader gl gl.VERTEX_SHADER vert)))\n    (let ((shader-program (gl.createProgram)))\n      (gl.attachShader shader-program vertex-shader)\n      (gl.attachShader shader-program fragment-shader)\n      \n      (index-for-each\n       (lambda (index attrib-name)\n\t (gl.bindAttribLocation shader-program index attrib-name))\n       attrib-names)\n      \n      (gl.linkProgram shader-program)\n      (when (not (gl.getProgramParameter shader-program gl.LINK_STATUS))\n            (alert (gl.getShaderInfoLog shader)))\n\n      (gl.useProgram shader-program)\n\n;      (index-for-each\n;       (lambda (index attrib-name)\n;\t (if (not (eq? (gl.getAttribLocation shader-program attrib-name) -1))\n;\t     (gl.enableVertexAttribArray index)\n;\t     (msg (+ \"asked for \" attrib-name \" but not in shader (maybe optimised away)\"))))\n ;      attrib-names)\n      \n      ;; expose all the uniform variables  \n      (for-each\n       (lambda (info)\n\t (set! (js \"shader_program[info.name]\") (gl.getUniformLocation shader-program info.name)))\n       (get-uniform-info-list gl shader_program))\n\n      shader-program)))\n\n;; should presumably replace this stuff with uniform buffer objects?\n(define (make-uniform-item name type value) (list name type value))\n(define (uniform-item-name u) (list-ref u 0))\n(define (uniform-item-type u) (list-ref u 1))\n(define (uniform-item-value u) (list-ref u 2))\n\n(define (apply-uniform-items! gl shader ui)\n  (for-each \n   (lambda (u)\n     (internal-uniform! \n      gl \n      shader\n      (uniform-item-name u) \n      (uniform-item-type u)\n      (uniform-item-value u)))\n   ui))\n\n(define (set-uniform-item ui l)\n  (cond\n   ((null? l) (list ui))\n   ((eq? (uniform-item-name (car l)) (uniform-item-name ui))\n    (cons ui (cdr l)))\n   (else\n    (cons (car l) (set-uniform-item ui (cdr l))))))\n\n;; todo: add matrices\n(define (internal-uniform! gl shader name type value)\n  (cond\n   ((number? value)\n    (if (eq? type \"f\")\n\t(gl.uniform1f (js \"shader[name]\") value)\n\t(gl.uniform1i (js \"shader[name]\") value)))\n   (else\n    (cond\n     ((eq? (length value) 1)\n      (if (eq? type \"f\")\n\t  (gl.uniform1fv (js \"shader[name]\") value)\n\t  (gl.uniform1iv (js \"shader[name]\") value)))\n     ((eq? (length value) 2)\n      (if (eq? type \"f\")\n\t  (gl.uniform2fv (js \"shader[name]\") value)\n\t  (gl.uniform2iv (js \"shader[name]\") value)))\n     ((eq? (length value) 3)\n      (if (eq? type \"f\")\n\t  (gl.uniform3fv (js \"shader[name]\") value)\n\t  (gl.uniform3iv (js \"shader[name]\") value)))\n     ((eq? (length value) 4)\n      (if (eq? type \"f\")\n\t  (gl.uniform4fv (js \"shader[name]\") value)\n\t  (gl.uniform4iv (js \"shader[name]\") value)))\n     (else\n      (msg (+ \"internal-shader-set: unhandled type: \" value)))))))\n \n", "shaders/default.vert": "precision highp float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\nattribute vec3 c;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    C = c;\n    L = vec3(0,1,0); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\n", "scm/weave-builder.jscm": ";; -*- mode: scheme; -*-\n\n(load \"flx/scm/fluxus.jscm\")\n\n;;------------------------------------------------------------\n\n;; produces lists of code for each weft thread\n\n;; avoid repeating u/d and insert f instead\n(define (weave->instr kernel-code state warp)\n  (if warp\n      (if (zero? kernel-code)\n  \t  (if (eq? state \"d\") \"fd\" \"d\")  \n  \t  (if (eq? state \"u\") \"fu\" \"u\")) ;; 1 = warp up\n      (if (zero? kernel-code)\n  \t  (if (eq? state \"u\") \"fu\" \"u\")  ;; 0 = weft up \n  \t  (if (eq? state \"d\") \"fd\" \"d\"))))\n\n(define (kernel-row k i)\n  (list-ref k i))\n\n(define (kernel-col k i)\n  (map\n   (lambda (row)\n     (list-ref row i))\n   k))\n\n\n(define (weave-builder warp kernel thread threads state)\n  (let ((i (modulo thread (length kernel))))\n    (cond\n     ((>= thread threads) \'())\n     (else\n      (let ((instr (weave->instr (list-ref kernel i) state warp)))\n\t;;(msg (+ i \": \" (list-ref kernel i) \"= \" instr))\n\t(cons\n\t instr\n\t (weave-builder\n\t  warp kernel (+ thread 1) threads\n\t  (cond\n\t   ((eq? instr \"u\") \"u\")\n\t   ((eq? instr \"d\") \"d\")\n\t   (else state)))\n\t ))))))\n\n(define (rot1 l)\n  (append (cdr l) (list (car l))))\n\n(define (weave-builder-weft kernel warp-threads weft-thread weft-threads)\n    (cond\n     ((>= weft-thread weft-threads) \'())\n     (else\n      (let ((going-right (zero? (modulo weft-thread 2))))\n\t(let ((i (modulo weft-thread (length kernel))))\n\t  ;;(msg (+ i \": \" (kernel-row kernel i)))\n\t  (append\t  \n\t   (weave-builder\n\t    0 (if going-right\n\t\t  (kernel-row kernel i)\n\t\t  (rot1 (reverse (kernel-row kernel i))))\n\t    0 warp-threads \"?\")\n\t   (if going-right (list \"r\" \"r\") (list \"l\" \"l\"))\n\t   (weave-builder-weft\n\t    kernel warp-threads (+ weft-thread 1) weft-threads)))))))\n\n(define (weave-builder-warp kernel warp-thread weft-threads)\n  (weave-builder\n   1 (kernel-col kernel (modulo warp-thread (length kernel)))\n   0 weft-threads \"?\")))\n\n\n", "flx/scm/instanceprim.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (instanceprim polyref)\n  (list polyref))\n\n(define (instanceprim-polyref p) (list-ref p 0))\n\n(define (instanceprim-render p gl view-camera camera-pos state tx)\n  (pdata-render \n   (polyprim-pdata (instanceprim-polyref p))\n   (polyprim-type (instanceprim-polyref p))\n   gl view-camera camera-pos state tx))\n", "models/receptor-donut.obj": "# Blender v2.69 (sub 0) OBJ File: \'builder.blend\'\n# www.blender.org\no donut2_Circle.005\nv -0.757098 1.969384 -0.995156\nv -0.699468 2.259113 -0.995157\nv -0.699468 2.259113 0.995282\nv -0.757098 1.969384 0.995282\nv -0.553655 2.477337 0.995282\nv -0.553655 2.477337 -0.995157\nv -0.535349 2.504733 -0.995157\nv -0.535349 2.504733 0.995282\nv -0.705895 1.711970 -0.995156\nv -0.705895 1.711970 0.995282\nv -0.699468 1.679655 0.995282\nv -0.699468 1.679655 -0.995156\nv -0.289729 2.668851 -0.995157\nv -0.289729 2.668851 0.995282\nv -0.535349 1.434034 -0.995156\nv -0.535349 1.434035 0.995282\nv 0.000000 2.726482 -0.995157\nv 0.000000 2.726482 0.995282\nv -0.289729 1.269916 -0.995156\nv -0.289729 1.269916 0.995282\nv 0.289729 2.668851 -0.995157\nv 0.289729 2.668852 0.995282\nv -0.000000 1.212286 -0.995156\nv -0.000000 1.212286 0.995282\nv 0.535349 2.504733 -0.995157\nv 0.535349 2.504733 0.995282\nv 0.289729 1.269916 -0.995156\nv 0.289729 1.269916 0.995282\nv 0.699468 2.259113 -0.995157\nv 0.699468 2.259113 0.995282\nv 0.535349 1.434034 -0.995156\nv 0.535349 1.434034 0.995282\nv 0.705896 2.226797 -0.995157\nv 0.757098 1.969384 -0.995156\nv 0.757098 1.969384 0.995282\nv 0.705896 2.226797 0.995282\nv 0.553654 1.461430 0.995282\nv 0.699468 1.679655 0.995282\nv 0.699468 1.679655 -0.995156\nv 0.553654 1.461430 -0.995156\nv -0.765367 3.817143 0.995282\nv 0.765366 3.817143 0.995282\nv 0.000000 3.969384 0.995282\nv 1.414213 3.383598 0.995282\nv 0.000000 3.969384 -0.995157\nv -0.765367 3.817143 -0.995157\nv 0.765366 3.817143 -0.995157\nv -1.414214 3.383597 0.995282\nv 1.414213 3.383598 -0.995157\nv -1.414214 3.383597 -0.995157\nv 1.847759 2.734751 0.995282\nv 1.847759 2.734751 -0.995157\nv -1.847759 2.734751 -0.995157\nv -1.847759 2.734751 0.995282\nv 2.000000 1.969384 -0.995156\nv 2.000000 1.969384 0.995282\nv -2.000000 1.969384 -0.995156\nv -2.000000 1.969384 0.995282\nv 1.847759 1.204017 -0.995156\nv 1.847759 1.204017 0.995282\nv -1.847759 1.204017 -0.995156\nv -1.847759 1.204017 0.995282\nv 1.414213 0.555170 -0.995156\nv 1.414213 0.555170 0.995282\nv -1.414214 0.555170 -0.995156\nv -1.414214 0.555170 0.995282\nv 0.765366 0.121625 -0.995156\nv 0.765366 0.121625 0.995283\nv -0.765367 0.121625 -0.995156\nv -0.765367 0.121625 0.995283\nv -1.000000 -3.860563 1.000000\nv -1.000000 -3.860563 -1.000000\nv 1.000000 -3.860563 -1.000000\nv 1.000000 -3.860563 1.000000\nv -1.000000 0.310364 1.000000\nv -1.000000 0.310364 -1.000000\nv 1.000000 0.310364 -1.000000\nv 1.000000 0.310364 1.000000\nvt 0.274823 1.052786\nvt 0.274823 1.081284\nvt 0.077634 1.081284\nvt 0.967037 0.000000\nvt 0.967037 0.024333\nvt 0.769848 0.024333\nvt 0.967037 0.081739\nvt 0.967037 0.106072\nvt 0.769848 0.106072\nvt 0.668712 1.067670\nvt 0.471523 1.070891\nvt 0.471523 1.067670\nvt 0.668712 1.070891\nvt 0.471523 1.042015\nvt 0.668712 1.042015\nvt 0.668712 0.989734\nvt 0.668712 0.992386\nvt 0.471523 0.992386\nvt 0.668712 1.013517\nvt 0.471523 1.013517\nvt 0.254439 0.585847\nvt 0.225174 0.585847\nvt 0.225174 0.388658\nvt 0.302170 0.585847\nvt 0.281476 0.585847\nvt 0.281476 0.388658\nvt 0.077634 1.027130\nvt 0.274823 1.023910\nvt 0.274823 1.027130\nvt 0.077634 1.023910\nvt 0.077634 1.052786\nvt 0.967037 0.053036\nvt 0.769848 0.053036\nvt 0.077634 1.105067\nvt 0.077634 1.102414\nvt 0.274823 1.102414\nvt 0.668712 1.095748\nvt 0.471523 1.095748\nvt 0.769848 0.081739\nvt 0.198136 0.585847\nvt 0.198136 0.388658\nvt 0.254439 0.388658\nvt 0.077634 0.999053\nvt 0.274823 0.999053\nvt 0.155675 0.388658\nvt 0.304408 0.359073\nvt 0.232983 0.388658\nvt 0.359073 0.304408\nvt 0.084250 0.359073\nvt 0.388658 0.232984\nvt 0.029585 0.304408\nvt 0.235999 0.256693\nvt 0.256693 0.235999\nvt 0.208962 0.267892\nvt 0.179696 0.267892\nvt 0.152659 0.256693\nvt 0.267892 0.208962\nvt 0.150351 0.254385\nvt 0.267892 0.205698\nvt 0.388658 0.155675\nvt 0.267892 0.179696\nvt 0.131965 0.235999\nvt 0.000000 0.232984\nvt 0.120766 0.208962\nvt 0.120766 0.182961\nvt 0.256693 0.152659\nvt 0.238307 0.134273\nvt 0.359073 0.084250\nvt 0.152659 0.131965\nvt 0.131965 0.152659\nvt 0.000000 0.155675\nvt 0.179696 0.120766\nvt 0.208962 0.120766\nvt 0.235999 0.131965\nvt 0.120766 0.179696\nvt 0.029585 0.084250\nvt 0.304408 0.029585\nvt 0.084250 0.029585\nvt 0.232983 0.000000\nvt 0.530602 0.792545\nvt 0.605886 0.792545\nvt 0.605886 0.989734\nvt 0.054666 0.999053\nvt 0.000000 0.999053\nvt 0.000000 0.801864\nvt 0.203399 0.999053\nvt 0.274823 0.801864\nvt 0.769848 0.330609\nvt 0.769848 0.254329\nvt 0.967037 0.254329\nvt 0.769848 0.179045\nvt 0.769848 0.116218\nvt 0.967037 0.116218\nvt 0.366450 0.585847\nvt 0.302170 0.783036\nvt 0.454321 0.792545\nvt 0.530602 0.989734\nvt 0.126090 0.999053\nvt 0.054666 0.801864\nvt 0.668712 0.792545\nvt 0.769848 0.396272\nvt 0.967037 0.330609\nvt 0.126090 0.801864\nvt 0.324378 0.388658\nvt 0.388658 0.388658\nvt 0.388658 0.585847\nvt 0.388658 0.792545\nvt 0.454321 0.989734\nvt 0.403740 0.122313\nvt 0.403740 0.273960\nvt 0.388658 0.198136\nvt 0.446691 0.058033\nvt 0.446691 0.338240\nvt 0.510971 0.015082\nvt 0.510971 0.381190\nvt 0.511790 0.198136\nvt 0.517499 0.226839\nvt 0.517499 0.169433\nvt 0.533758 0.145100\nvt 0.533758 0.251172\nvt 0.558091 0.128841\nvt 0.536472 0.252986\nvt 0.586794 0.000000\nvt 0.561293 0.128204\nvt 0.586794 0.123132\nvt 0.558091 0.267431\nvt 0.586794 0.273140\nvt 0.586794 0.396272\nvt 0.612296 0.268068\nvt 0.637116 0.143287\nvt 0.615497 0.128841\nvt 0.662618 0.015082\nvt 0.661798 0.198136\nvt 0.656089 0.169433\nvt 0.662618 0.381190\nvt 0.656089 0.226839\nvt 0.639830 0.251172\nvt 0.639830 0.145100\nvt 0.615497 0.267431\nvt 0.726898 0.338240\nvt 0.726898 0.058033\nvt 0.769848 0.273960\nvt 0.769848 0.122313\nvt 1.000000 0.809253\nvt 0.801864 0.809253\nvt 0.801864 0.396272\nvt 0.198136 0.801864\nvt 0.000000 0.388658\nvt 0.801638 0.594409\nvt 0.801638 0.792545\nvt 0.388658 0.594408\nvt 0.388658 0.396272\nvt 1.000000 1.007389\nvt 0.801864 1.007389\nvt 0.769848 0.000000\nvt 0.471523 0.989734\nvt 0.302170 0.388658\nvt 0.274823 1.105067\nvt 0.967037 0.179045\nvt 0.203399 0.801864\nvt 0.967037 0.396272\nvt 0.366450 0.783036\nvt 0.324378 0.585847\nvt 0.388658 0.989734\nvt 1.000000 0.396272\nvt 0.388658 0.594409\nvt 0.801864 0.594408\nvn 0.980785 -0.195091 0.000000\nvn -0.555570 -0.831470 0.000000\nvn 0.555570 -0.831470 0.000000\nvn -0.980785 -0.195090 0.000000\nvn -0.831469 0.555572 -0.000000\nvn -0.831470 0.555570 -0.000000\nvn -0.195090 0.980785 -0.000000\nvn 0.555570 0.831470 0.000000\nvn 0.980786 0.195088 0.000000\nvn 0.980785 0.195091 -0.000000\nvn -0.195090 -0.980785 0.000000\nvn 0.831471 -0.555568 0.000000\nvn 0.831470 -0.555570 0.000000\nvn -0.831469 -0.555571 0.000000\nvn 0.195091 -0.980785 0.000000\nvn -0.980785 0.195090 -0.000000\nvn -0.555570 0.831470 -0.000000\nvn 0.195091 0.980785 0.000000\nvn 0.831470 0.555570 0.000000\nvn 0.000000 0.000000 1.000000\nvn 0.000000 0.000001 1.000000\nvn -0.980785 0.195091 0.000000\nvn -0.555570 0.831469 0.000000\nvn 0.195090 0.980785 0.000000\nvn 0.831469 0.555570 0.000000\nvn -0.195091 0.980785 -0.000000\nvn 0.980785 -0.195090 0.000000\nvn -0.831469 -0.555570 0.000000\nvn -0.000000 0.000000 -1.000000\nvn -1.000000 0.000000 0.000000\nvn 1.000000 0.000000 0.000000\nvn 0.000000 -1.000000 0.000000\nvn -0.555569 -0.831470 0.000000\nvn -0.980785 -0.195091 0.000000\nvn 0.831473 -0.555566 0.000000\nvn 0.195090 -0.980785 0.000000\nvn 0.831469 0.555571 -0.000000\nvn 0.831469 -0.555571 0.000000\nvn 0.831469 -0.555570 0.000000\nvn 0.195090 0.980785 -0.000001\nvn -0.831470 -0.555570 0.000000\ns off\nf 1/1/1 2/2/1 3/3/1\nf 26/4/2 22/5/2 21/6/2\nf 14/7/3 8/8/3 7/9/3\nf 36/10/4 29/11/4 33/12/4\nf 36/10/4 30/13/4 29/11/4\nf 33/12/4 34/14/4 35/15/4\nf 32/16/5 37/17/5 40/18/5\nf 37/17/6 38/19/6 39/20/6\nf 24/21/7 28/22/7 27/23/7\nf 16/24/8 20/25/8 19/26/8\nf 10/27/9 12/28/9 9/29/9\nf 10/27/10 11/30/10 12/28/10\nf 9/29/10 1/1/10 4/31/10\nf 22/5/11 18/32/11 17/33/11\nf 8/34/12 5/35/12 6/36/12\nf 5/35/13 3/3/13 6/36/13\nf 30/13/14 26/37/14 25/38/14\nf 18/32/15 14/7/15 13/39/15\nf 38/19/16 35/15/16 34/14/16\nf 28/22/17 32/40/17 31/41/17\nf 20/25/18 24/21/18 23/42/18\nf 11/30/19 16/43/19 15/44/19\nf 41/45/20 42/46/20 43/47/20\nf 41/45/21 44/48/21 42/46/21\nf 41/45/21 48/49/21 44/48/21\nf 44/48/20 48/49/20 51/50/20\nf 51/50/20 48/49/20 54/51/20\nf 51/50/20 22/52/20 26/53/20\nf 51/50/20 18/54/20 22/52/20\nf 51/50/20 54/51/20 18/54/20\nf 54/51/20 14/55/20 18/54/20\nf 54/51/20 8/56/20 14/55/20\nf 26/53/20 30/57/20 51/50/20\nf 54/51/20 5/58/20 8/56/20\nf 36/59/20 56/60/20 51/50/20\nf 56/60/20 36/59/20 35/61/20\nf 3/62/20 5/58/20 54/51/20\nf 54/51/20 58/63/20 4/64/20\nf 10/65/20 4/64/20 58/63/20\nf 38/66/20 37/67/20 60/68/20\nf 60/68/20 56/60/20 35/61/20\nf 20/69/20 16/70/20 62/71/20\nf 62/71/20 24/72/20 20/69/20\nf 62/71/20 60/68/20 24/72/20\nf 60/68/20 28/73/20 24/72/20\nf 60/68/20 32/74/20 28/73/20\nf 16/70/20 11/75/20 62/71/20\nf 60/68/20 37/67/20 32/74/20\nf 10/65/20 58/63/20 62/71/20\nf 60/68/20 62/71/20 66/76/20\nf 60/68/20 66/76/20 64/77/20\nf 64/77/21 66/76/21 70/78/21\nf 64/77/21 70/78/21 68/79/21\nf 58/80/22 54/81/22 53/82/22\nf 42/83/8 44/84/8 49/85/8\nf 48/44/23 41/86/23 50/87/23\nf 51/88/10 56/89/10 55/90/10\nf 60/91/13 64/92/13 63/93/13\nf 70/24/2 66/94/2 69/95/2\nf 62/96/4 58/80/4 57/97/4\nf 43/98/24 42/83/24 47/99/24\nf 54/81/6 48/100/6 53/82/6\nf 44/101/25 51/88/25 52/102/25\nf 41/86/26 43/98/26 45/103/26\nf 56/89/27 60/91/27 55/90/27\nf 64/104/3 68/105/3 67/106/3\nf 66/107/28 62/96/28 61/108/28\nf 47/109/29 46/110/29 45/111/29\nf 46/110/29 47/109/29 49/112/29\nf 46/110/29 49/112/29 50/113/29\nf 50/113/29 49/112/29 52/114/29\nf 50/113/29 52/114/29 53/115/29\nf 53/115/29 17/116/29 13/117/29\nf 53/115/29 52/114/29 17/116/29\nf 52/114/29 21/118/29 17/116/29\nf 52/114/29 25/119/29 21/118/29\nf 13/117/29 7/120/29 53/115/29\nf 52/114/29 29/121/29 25/119/29\nf 7/120/29 6/122/29 53/115/29\nf 52/114/29 55/123/29 33/124/29\nf 34/125/29 33/124/29 55/123/29\nf 53/115/29 6/122/29 2/126/29\nf 1/127/29 57/128/29 53/115/29\nf 57/128/29 1/127/29 9/129/29\nf 40/130/29 39/131/29 59/132/29\nf 34/125/29 55/123/29 59/132/29\nf 23/133/29 27/134/29 59/132/29\nf 59/132/29 61/135/29 23/133/29\nf 61/135/29 19/136/29 23/133/29\nf 61/135/29 15/137/29 19/136/29\nf 27/134/29 31/138/29 59/132/29\nf 61/135/29 12/139/29 15/137/29\nf 31/138/29 40/130/29 59/132/29\nf 61/135/29 57/128/29 9/129/29\nf 61/135/29 59/132/29 65/140/29\nf 65/140/29 59/132/29 63/141/29\nf 65/140/29 63/141/29 69/142/29\nf 69/142/29 63/141/29 67/143/29\nf 75/144/30 76/145/30 72/146/30\nf 76/147/29 77/85/29 73/148/29\nf 77/149/31 78/150/31 74/107/31\nf 78/151/20 75/152/20 71/146/20\nf 71/153/32 72/154/32 73/145/32\nf 4/31/27 1/1/27 3/3/27\nf 25/155/33 26/4/33 21/6/33\nf 13/39/3 14/7/3 7/9/3\nf 35/15/34 36/10/34 33/12/34\nf 31/156/6 32/16/6 40/18/6\nf 40/18/6 37/17/6 39/20/6\nf 23/42/7 24/21/7 27/23/7\nf 15/157/8 16/24/8 19/26/8\nf 4/31/10 10/27/10 9/29/10\nf 21/6/11 22/5/11 17/33/11\nf 7/158/35 8/34/35 6/36/35\nf 29/11/28 30/13/28 25/38/28\nf 17/33/36 18/32/36 13/39/36\nf 39/20/22 38/19/22 34/14/22\nf 27/23/17 28/22/17 31/41/17\nf 19/26/24 20/25/24 23/42/24\nf 12/28/37 11/30/37 15/44/37\nf 30/57/20 36/59/20 51/50/20\nf 3/62/20 54/51/20 4/64/20\nf 38/66/20 60/68/20 35/61/20\nf 11/75/20 10/65/20 62/71/20\nf 57/97/16 58/80/16 53/82/16\nf 47/99/8 42/83/8 49/85/8\nf 3/3/38 2/2/38 6/36/38\nf 52/102/10 51/88/10 55/90/10\nf 59/159/39 60/91/39 63/93/39\nf 48/100/6 50/16/6 53/82/6\nf 61/108/34 62/96/34 57/97/34\nf 45/103/40 43/98/40 47/99/40\nf 41/86/17 46/160/17 50/87/17\nf 49/161/25 44/101/25 52/102/25\nf 46/160/7 41/86/7 45/103/7\nf 66/94/2 65/162/2 69/95/2\nf 63/163/3 64/104/3 67/106/3\nf 65/164/41 66/107/41 61/108/41\nf 29/121/29 52/114/29 33/124/29\nf 2/126/29 1/127/29 53/115/29\nf 39/131/29 34/125/29 59/132/29\nf 12/139/29 61/135/29 9/129/29\nf 71/165/30 75/144/30 72/146/30\nf 72/41/29 76/147/29 73/148/29\nf 73/166/31 77/149/31 74/107/31\nf 74/167/20 78/151/20 71/146/20\nf 74/144/32 71/153/32 73/145/32\nf 60/91/27 59/159/27 55/90/27\n", "textures/white.png": "iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FHQ4QIHPVuvAAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACW0lEQVR42u3UMQEAAAjDMMC/52EAByQSerSTpICXRgIwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMADAAwAAAAwAMAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwAMADAAAADAAwADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAAwAMAAAAMADAC4LB6wBfy1zhUaAAAAAElFTkSuQmCC", "flx/scm/polyprim.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (polyprim size type vb)\n  (list size type vb))\n\n(define (polyprim-size p) (list-ref p 0))\n(define (polyprim-type p) (list-ref p 1))\n(define (polyprim-pdata p) (list-ref p 2))\n(define (polyprim-modify-pdata p v) (list-replace p 2 v))\n\n(define (build-polyprim gl type pdata)\n  (let ((p (polyprim \n\t    (pdata-size-verts pdata) type \n\t    (pdata-build-vbo gl pdata))))\n    (pdata-update-vbo! gl pdata)\n    p))\n\n(define (build-empty-polyprim gl type size-verts)\n  ;; match load obj for the moment with points, \n  ;; normals and texturecoords \n  (build-polyprim \n   gl type (make-pdata \n\t    (list \"p\" \"n\" \"t\" \"c\")\n\t    size-verts\n\t    (build-list \n\t     (* (* size-verts 4) 3) \n\t     (lambda (i) 0)))))\n\n(define (polyprim-update-buffers! gl p)\n  (pdata-update-vbo! gl (polyprim-pdata p)))\n  \n(define (polyprim-render p gl view-camera camera-pos state tx)\n  (pdata-render\n   (polyprim-pdata p)\n   (polyprim-type p)\n   gl view-camera camera-pos state tx))\n\n", "textures/thread.png": "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", "flx/scm/meshcache.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define mesh-cache ())\n(define meshes-load-outstanding 0)\n(define meshes-total-load 0)\n\n(define (get-mesh name)\n  (foldl\n   (lambda (t r)\n     (if (and (not r) (eq? (car t) name))\n         (cadr t) r))\n   #f\n   mesh-cache))\n\n(define (meshes-loaded?)\n  (eq? meshes-load-outstanding 0))\n\n(define (load-mesh-cache name)\n  (let ((type (substring name (- (length name) 3) (length name))))\n    (set! meshes-load-outstanding (+ meshes-load-outstanding 1))\n    (set! meshes-total-load (+ meshes-total-load 1))\n    (cond\n     ((eq? type \"obj\")\n      (load-resource-txt \n       name \n       (lambda (data)\n\t (let ((data (inner-load-obj data)))\n\t   (set! meshes-load-outstanding (- meshes-load-outstanding 1))\n\t   (set! mesh-cache (cons (list name data) mesh-cache))))))\n     (else\n      (load-resource-txt \n       name \n       (lambda (data)\n\t (let ((data (inner-load-ply data)))\n\t   (set! meshes-load-outstanding (- meshes-load-outstanding 1))\n\t   (set! mesh-cache (cons (list name data) mesh-cache)))))))))\n\n(define (deep-copy a)\n  ($.extend #t (js \"{}\") a))\n\n(define (mesh-cache-search name)\n  (let ((mesh (assoc name mesh-cache)))\n    (cond \n     (mesh (deep-copy (cadr mesh)));; deep copy!?\n     (else \n      (msg (+ \"mesh not loaded into cache in preload: \" name))\n      (let ((type (substring name (- (length name) 3) (length name))))\n\t(if (eq? type \"obj\")\n\t    (force-load-obj name)\n\t    (force-load-ply name)))))))\n\n", "flx/scm/state.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define FLX_HINT_NONE           0x00000000)\n(define FLX_HINT_SOLID          0x00000001)\n(define FLX_HINT_WIRE           0x00000002)\n(define FLX_HINT_NORMAL         0x00000004)\n(define FLX_HINT_POINTS         0x00000008)\n(define FLX_HINT_AALIAS         0x00000010)\n(define FLX_HINT_BOUND          0x00000020)\n(define FLX_HINT_UNLIT          0x00000040)\n(define FLX_HINT_VERTCOLS       0x00000080)\n(define FLX_HINT_ORIGIN         0x00000100)\n(define FLX_HINT_CAST_SHADOW    0x00000200)\n(define FLX_HINT_IGNORE_DEPTH   0x00000400)\n(define FLX_HINT_DEPTH_SORT     0x00000800)\n(define FLX_HINT_LAZY_PARENT    0x00001000)\n(define FLX_HINT_CULL_FACE      0x00002000)\n(define FLX_HINT_CULL_CCW       0x00004000) ;; was something else\n(define FLX_HINT_SPHERE_MAP     0x00008000)\n(define FLX_HINT_FRUSTUM_CULL   0x00010000)\n(define FLX_HINT_NORMALISE      0x00020000)\n(define FLX_HINT_NOBLEND        0x00040000)\n(define FLX_HINT_NOZWRITE       0x00080000)\n\n(define (state gl)\n  (list\n   (mat4.identity (mat4.create))\n   (shader-cache-search \"main\")\n   (vector 1 1 1)\n   \"\"\n   FLX_HINT_SOLID\n   0\n   #f \n   \'()))\n\n(define (state-tx s) (list-ref s 0))\n(define (state-shader s) (list-ref s 1))\n(define (state-modify-shader s v) (list-replace s 1 v))\n(define (state-colour s) (list-ref s 2))\n(define (state-modify-colour s v) (list-replace s 2 v))\n(define (state-texture s) (list-ref s 3))\n(define (state-modify-texture s v) (list-replace s 3 v))\n(define (state-hints s) (list-ref s 4))\n(define (state-modify-hints s v) (list-replace s 4 v))\n(define (state-parent s) (list-ref s 5))\n(define (state-modify-parent s v) (list-replace s 5 v))\n(define (state-hidden s) (list-ref s 6))\n(define (state-modify-hidden s v) (list-replace s 6 v))\n(define (state-uniform-items s) (list-ref s 7))\n(define (state-modify-uniform-items s v) (list-replace s 7 v))\n\n(define (state-clone s)\n  (list\n   (mat4.create (state-tx s))\n   (state-shader s) ;; todo: shader clone\n   (vector-clone (state-colour s))\n   (state-texture s)\n   (state-hints s)\n   (state-parent s)\n   (state-hidden s)\n   (state-uniform-items s)))\n", "flx/scm/primitive.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (primitive type inner)\n  (list type inner))\n\n(define (primitive-type p) (list-ref p 0))\n(define (primitive-inner p) (list-ref p 1))\n\n(define (primitive-render p gl view-camera camera-pos state tx)\n  ;; dispatch\n  (cond \n   ((eq? (primitive-type p) \'polyprim) \n    (polyprim-render (primitive-inner p) gl view-camera camera-pos state tx))\n   ((eq? (primitive-type p) \'instanceprim) \n    (instanceprim-render (primitive-inner p) gl view-camera camera-pos state tx))\n   ((eq? (primitive-type p) \'locatorprim)\n    ;; locator has no primitive (might want to change this for debugging)\n    0)\n   (else (msg \"unknown primitive\"))))\n", "flx/scm/scenegraph.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2017 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (scenenode id state primitive children) (list id state primitive children (mat4.identity (mat4.create))))\n(define (scenenode-id p) (list-ref p 0))\n(define (scenenode-state p) (list-ref p 1))\n(define (scenenode-modify-state! p v) (set! p (list-replace p 1 v)))\n(define (scenenode-primitive p)  (list-ref p 2))\n(define (scenenode-children p)  (list-ref p 3))\n(define (scenenode-modify-children p v)  (list-replace p 3 v))\n(define (scenenode-global-tx p) (list-ref p 4))\n(define (scenenode-modify-global-tx! p v) (set! p (list-replace p 4 v)))\n;;(define (scenenode-modify-add-child p child) (list-replace p 3 (cons child (scenenode-children p))))\n\n(define (scenenode-print p)\n  (msg (+ (scenenode-id p) \" \" (state-tx (scenenode-state p)))))\n\n;; order children by id\n(define (scenenode-modify-add-child p child)\n  (define (_ l v)\n    (cond\n     ((null? l) (list v))\n     ((< (scenenode-id  v) (scenenode-id (car l))) (cons v l))\n     (else (cons (car l) (_ (cdr l) v)))))\n  (list-replace p 3 (_ (scenenode-children p) child)))\n\n;; binary search\n(define (scenenode-search-child l id)\n  (define (_ start end)\n    (cond\n     ;; no children\n     ((null? l) #f)\n     (else\n      (let ((mid (trunc (+ start (/ (- end start) 2)))))\n\t(cond\n\t ;; not found\n\t ((< (- end start) 2) #f)\n\t ;; found\n\t ((eq? id (car (list-ref l mid))) (list-ref l mid))\n\t ;; search down\n\t ((> (car (list-ref l mid)) id)\n\t  (_ start mid))\n\t ;; search up\n\t (else\n\t  (_ mid end)))))))\n  (_ 0 (length l)))\n\n(define (scenegraph-find sn id)\n  (cond\n   ((eq? (scenenode-id sn) id) sn)\n   (else \n    (let ((result (scenenode-search-child (scenenode-children sn) id)))\n      (if result result\n\t  (foldl\n\t   (lambda (sn r)\n\t     (if r r (scenegraph-find sn id)))\n\t   #f\n\t   (scenenode-children sn)))))))\n\n(define (scenegraph-remove sn id)\n  (scenenode-modify-children\n   sn\n   (filter (lambda (sn)\n\t     (not (eq? (scenenode-id sn) id)))\n\t   (map\n\t    (lambda (sn)\n\t      (scenegraph-remove sn id))\n\t    (scenenode-children sn)))))\n\n (define (scenegraph-add sn parent-id node)\n  (cond\n   ((eq? (scenenode-id sn) parent-id) \n    (scenenode-modify-add-child sn node))\n   (else \n    (scenenode-modify-children\n     sn\n     (map\n      (lambda (sn)\n\t(scenegraph-add sn parent-id node))\n      (scenenode-children sn))))))\n\n(define (scenegraph-render sn gl view-camera camera-pos tx)\n  (when (not (state-hidden (scenenode-state sn)))\n\t(when (not (zero? (scenenode-primitive sn)))\n\t      (let ((hints (state-hints (scenenode-state sn))))\n\t\t;; hints that affect all types of primitive\n\t\t(if (bitwise-and hints FLX_HINT_NOZWRITE)\n\t\t    (gl.depthMask false)\n\t\t    (gl.depthMask true))\n\t\t(if (bitwise-and hints FLX_HINT_CULL_FACE)\n\t\t    (gl.enable gl.CULL_FACE)\n\t\t    (gl.disable gl.CULL_FACE))\n\t\t(if (bitwise-and hints FLX_HINT_CULL_CCW) \n\t\t    (gl.frontFace gl.CW)\n\t\t    (gl.frontFace gl.CCW))\n\t\t(if (bitwise-and hints FLX_HINT_IGNORE_DEPTH) \n\t\t    (gl.disable gl.DEPTH_TEST)\n\t\t    (gl.enable gl.DEPTH_TEST))\n\t\t(primitive-render \n\t\t (scenenode-primitive sn) gl view-camera camera-pos \n\t\t (scenenode-state sn)\n\t\t tx)))\n\t\n\t(let ((child-tx (mat4.create)))\n\t  ;; pass the heirachical transform down\n\t  (mat4.multiply tx (state-tx (scenenode-state sn)) child-tx)    \n\t  ;; child-tx is actually the local transform for this object\n\t  (scenenode-modify-global-tx! sn child-tx)\n\t  (for-each \n\t   (lambda (child)\n\t     (scenegraph-render child gl view-camera camera-pos child-tx))\n\t   (scenenode-children sn)))))\n\n(define (scenegraph-print sn depth)\n  (scenenode-print sn)\n  (for-each \n   (lambda (child)\n     (scenegraph-print child (+ depth 1)))\n   (scenenode-children sn)))\n", "flx/scm/data.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define unit-cube-vertices\n  (list\n   -0.5  0.5 -0.5   0.5  0.5 -0.5  -0.5 -0.5 -0.5\n    0.5 -0.5 -0.5   0.5  0.5 -0.5  -0.5 -0.5 -0.5\n    0.5  0.5 -0.5   0.5  0.5  0.5   0.5 -0.5 -0.5\n    0.5 -0.5  0.5   0.5  0.5  0.5   0.5 -0.5 -0.5\n   -0.5  0.5  0.5   0.5  0.5  0.5  -0.5  0.5 -0.5\n    0.5  0.5 -0.5   0.5  0.5  0.5  -0.5  0.5 -0.5\n    0.5  0.5  0.5  -0.5  0.5  0.5   0.5 -0.5  0.5\n   -0.5 -0.5  0.5  -0.5  0.5  0.5   0.5 -0.5  0.5\n   -0.5  0.5  0.5  -0.5  0.5 -0.5  -0.5 -0.5  0.5\n   -0.5 -0.5 -0.5  -0.5  0.5 -0.5  -0.5 -0.5  0.5\n   -0.5 -0.5 -0.5   0.5 -0.5 -0.5  -0.5 -0.5  0.5\n    0.5 -0.5  0.5   0.5 -0.5 -0.5  -0.5 -0.5  0.5))\n\n(define unit-cube-normals\n  (list\n    0  0 -1   0  0 -1   0  0 -1\n    0  0 -1   0  0 -1   0  0 -1\n    1  0  0   1  0  0   1  0  0\n    1  0  0   1  0  0   1  0  0\n    0  1  0   0  1  0   0  1  0\n    0  1  0   0  1  0   0  1  0\n    0  0  1   0  0  1   0  0  1\n    0  0  1   0  0  1   0  0  1\n   -1  0  0  -1  0  0  -1  0  0\n   -1  0  0  -1  0  0  -1  0  0\n    0 -1  0   0 -1  0   0 -1  0\n    0 -1  0   0 -1  0   0 -1  0))\n\n(define unit-cube-texcoords\n  (list\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0\n    0  1  0   1  1  0   0  0  0\n    1  0  0   1  1  0   0  0  0))\n\n\n(define sphere-vertices (js \"[0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.3536, 0.866, 0.3536, 0.0, 1.0, -0.0, 0.0, 1.0, -0.0, 0.3536, 0.866, 0.3536, 0.5, 0.866, -0.0, 0.0, 1.0, -0.0, 0.5, 0.866, -0.0, 0.0, 1.0, -0.0, 0.0, 1.0, -0.0, 0.5, 0.866, -0.0, 0.3536, 0.866, -0.3536, 0.0, 1.0, -0.0, 0.3536, 0.866, -0.3536, -0.0, 1.0, -0.0, -0.0, 1.0, -0.0, 0.3536, 0.866, -0.3536, -0.0, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.3536, 0.866, -0.3536, -0.0, 1.0, -0.0, -0.3536, 0.866, -0.3536, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.3536, 0.866, -0.3536, -0.5, 0.866, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.0, -0.3536, 0.866, 0.3536, -0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.5, 0.866, 0.3536, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.0, 0.5, 0.866, 0.6124, 0.5, 0.6124, 0.3536, 0.866, 0.3536, 0.6124, 0.5, 0.6124, 0.5, 0.866, -0.0, 0.5, 0.866, -0.0, 0.6124, 0.5, 0.6124, 0.866, 0.5, -0.0, 0.5, 0.866, -0.0, 0.866, 0.5, -0.0, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.866, 0.5, -0.0, 0.6124, 0.5, -0.6124, 0.3536, 0.866, -0.3536, 0.6124, 0.5, -0.6124, -0.0, 0.866, -0.5, -0.0, 0.866, -0.5, 0.6124, 0.5, -0.6124, -0.0, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.3536, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.0, 0.5, -0.866, -0.6124, 0.5, -0.6124, -0.3536, 0.866, -0.3536, -0.6124, 0.5, -0.6124, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.6124, 0.5, -0.6124, -0.866, 0.5, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.0, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.866, 0.5, 0.0, -0.6124, 0.5, 0.6124, -0.3536, 0.866, 0.3536, -0.6124, 0.5, 0.6124, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, -0.6124, 0.5, 0.6124, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, 0.0, -0.0, 1.0, 0.6124, 0.5, 0.6124, 0.6124, 0.5, 0.6124, 0.0, -0.0, 1.0, 0.7071, -0.0, 0.7071, 0.6124, 0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.866, 0.5, -0.0, 0.866, 0.5, -0.0, 0.7071, -0.0, 0.7071, 1.0, -0.0, -0.0, 0.866, 0.5, -0.0, 1.0, -0.0, -0.0, 0.6124, 0.5, -0.6124, 0.6124, 0.5, -0.6124, 1.0, -0.0, -0.0, 0.7071, -0.0, -0.7071, 0.6124, 0.5, -0.6124, 0.7071, -0.0, -0.7071, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, 0.7071, -0.0, -0.7071, -0.0, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.6124, 0.5, -0.6124, -0.6124, 0.5, -0.6124, -0.0, -0.0, -1.0, -0.7071, -0.0, -0.7071, -0.6124, 0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.7071, -0.0, -0.7071, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, 0.0, -0.6124, 0.5, 0.6124, -0.6124, 0.5, 0.6124, -1.0, -0.0, 0.0, -0.7071, -0.0, 0.7071, -0.6124, 0.5, 0.6124, -0.7071, -0.0, 0.7071, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, -0.7071, -0.0, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.7071, -0.0, 0.7071, 0.7071, -0.0, 0.7071, 0.0, -0.5, 0.866, 0.6124, -0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.6124, -0.5, 0.6124, 1.0, -0.0, -0.0, 1.0, -0.0, -0.0, 0.6124, -0.5, 0.6124, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.0, 0.7071, -0.0, -0.7071, 0.7071, -0.0, -0.7071, 0.866, -0.5, -0.0, 0.6124, -0.5, -0.6124, 0.7071, -0.0, -0.7071, 0.6124, -0.5, -0.6124, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.6124, -0.5, -0.6124, -0.0, -0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.5, -0.866, -0.7071, -0.0, -0.7071, -0.7071, -0.0, -0.7071, -0.0, -0.5, -0.866, -0.6124, -0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.6124, -0.5, -0.6124, -1.0, -0.0, 0.0, -1.0, -0.0, 0.0, -0.6124, -0.5, -0.6124, -0.866, -0.5, 0.0, -1.0, -0.0, 0.0, -0.866, -0.5, 0.0, -0.7071, -0.0, 0.7071, -0.7071, -0.0, 0.7071, -0.866, -0.5, 0.0, -0.6124, -0.5, 0.6124, -0.7071, -0.0, 0.7071, -0.6124, -0.5, 0.6124, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, -0.6124, -0.5, 0.6124, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.6124, -0.5, 0.6124, 0.6124, -0.5, 0.6124, 0.0, -0.866, 0.5, 0.3536, -0.866, 0.3536, 0.6124, -0.5, 0.6124, 0.3536, -0.866, 0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.3536, -0.866, 0.3536, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.0, 0.6124, -0.5, -0.6124, 0.6124, -0.5, -0.6124, 0.5, -0.866, -0.0, 0.3536, -0.866, -0.3536, 0.6124, -0.5, -0.6124, 0.3536, -0.866, -0.3536, -0.0, -0.5, -0.866, -0.0, -0.5, -0.866, 0.3536, -0.866, -0.3536, -0.0, -0.866, -0.5, -0.0, -0.5, -0.866, -0.0, -0.866, -0.5, -0.6124, -0.5, -0.6124, -0.6124, -0.5, -0.6124, -0.0, -0.866, -0.5, -0.3536, -0.866, -0.3536, -0.6124, -0.5, -0.6124, -0.3536, -0.866, -0.3536, -0.866, -0.5, 0.0, -0.866, -0.5, 0.0, -0.3536, -0.866, -0.3536, -0.5, -0.866, 0.0, -0.866, -0.5, 0.0, -0.5, -0.866, 0.0, -0.6124, -0.5, 0.6124, -0.6124, -0.5, 0.6124, -0.5, -0.866, 0.0, -0.3536, -0.866, 0.3536, -0.6124, -0.5, 0.6124, -0.3536, -0.866, 0.3536, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, -0.3536, -0.866, 0.3536, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, -0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, 0.3536, -0.866, 0.3536, -0.0, -1.0, -0.0, -0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.0, 0.5, -0.866, -0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.0, -0.866, -0.5, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, -0.0, -0.5, -0.866, 0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, -0.0, -1.0, -0.0]\"))\n(define sphere-normals (js \"[0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.866, 0.5, 0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.3536, 0.866, 0.3536, 0.5, 0.866, -0.0, 0.0, 1.0, 0.0, 0.5, 0.866, -0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.5, 0.866, -0.0, 0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, 0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.3536, 0.866, -0.3536, -0.0, 0.866, -0.5, 0.0, 1.0, 0.0, -0.0, 0.866, -0.5, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.0, 0.866, -0.5, -0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, -0.3536, 0.866, -0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.3536, 0.866, -0.3536, -0.5, 0.866, 0.0, 0.0, 1.0, 0.0, -0.5, 0.866, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.5, 0.866, 0.0, -0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, -0.3536, 0.866, 0.3536, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.5, 0.866, 0.3536, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.0, 0.5, 0.866, 0.6124, 0.5, 0.6124, 0.3536, 0.866, 0.3536, 0.6124, 0.5, 0.6124, 0.5, 0.866, -0.0, 0.5, 0.866, -0.0, 0.6124, 0.5, 0.6124, 0.866, 0.5, -0.0, 0.5, 0.866, -0.0, 0.866, 0.5, -0.0, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.866, 0.5, -0.0, 0.6124, 0.5, -0.6124, 0.3536, 0.866, -0.3536, 0.6124, 0.5, -0.6124, -0.0, 0.866, -0.5, -0.0, 0.866, -0.5, 0.6124, 0.5, -0.6124, -0.0, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.3536, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.0, 0.5, -0.866, -0.6124, 0.5, -0.6124, -0.3536, 0.866, -0.3536, -0.6124, 0.5, -0.6124, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.6124, 0.5, -0.6124, -0.866, 0.5, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.0, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.866, 0.5, 0.0, -0.6124, 0.5, 0.6124, -0.3536, 0.866, 0.3536, -0.6124, 0.5, 0.6124, 0.0, 0.866, 0.5, 0.0, 0.866, 0.5, -0.6124, 0.5, 0.6124, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, 0.0, -0.0, 1.0, 0.6124, 0.5, 0.6124, 0.6124, 0.5, 0.6124, 0.0, -0.0, 1.0, 0.7071, -0.0, 0.7071, 0.6124, 0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.866, 0.5, -0.0, 0.866, 0.5, -0.0, 0.7071, -0.0, 0.7071, 1.0, -0.0, -0.0, 0.866, 0.5, -0.0, 1.0, -0.0, -0.0, 0.6124, 0.5, -0.6124, 0.6124, 0.5, -0.6124, 1.0, -0.0, -0.0, 0.7071, -0.0, -0.7071, 0.6124, 0.5, -0.6124, 0.7071, -0.0, -0.7071, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, 0.7071, -0.0, -0.7071, -0.0, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.6124, 0.5, -0.6124, -0.6124, 0.5, -0.6124, -0.0, -0.0, -1.0, -0.7071, -0.0, -0.7071, -0.6124, 0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.7071, -0.0, -0.7071, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, 0.0, -0.6124, 0.5, 0.6124, -0.6124, 0.5, 0.6124, -1.0, -0.0, 0.0, -0.7071, -0.0, 0.7071, -0.6124, 0.5, 0.6124, -0.7071, -0.0, 0.7071, 0.0, 0.5, 0.866, 0.0, 0.5, 0.866, -0.7071, -0.0, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.5, 0.866, 0.7071, -0.0, 0.7071, 0.7071, -0.0, 0.7071, 0.0, -0.5, 0.866, 0.6124, -0.5, 0.6124, 0.7071, -0.0, 0.7071, 0.6124, -0.5, 0.6124, 1.0, -0.0, -0.0, 1.0, -0.0, -0.0, 0.6124, -0.5, 0.6124, 0.866, -0.5, -0.0, 1.0, -0.0, -0.0, 0.866, -0.5, -0.0, 0.7071, -0.0, -0.7071, 0.7071, -0.0, -0.7071, 0.866, -0.5, -0.0, 0.6124, -0.5, -0.6124, 0.7071, -0.0, -0.7071, 0.6124, -0.5, -0.6124, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.6124, -0.5, -0.6124, -0.0, -0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.5, -0.866, -0.7071, -0.0, -0.7071, -0.7071, -0.0, -0.7071, -0.0, -0.5, -0.866, -0.6124, -0.5, -0.6124, -0.7071, -0.0, -0.7071, -0.6124, -0.5, -0.6124, -1.0, -0.0, 0.0, -1.0, -0.0, 0.0, -0.6124, -0.5, -0.6124, -0.866, -0.5, 0.0, -1.0, -0.0, 0.0, -0.866, -0.5, 0.0, -0.7071, -0.0, 0.7071, -0.7071, -0.0, 0.7071, -0.866, -0.5, 0.0, -0.6124, -0.5, 0.6124, -0.7071, -0.0, 0.7071, -0.6124, -0.5, 0.6124, 0.0, -0.0, 1.0, 0.0, -0.0, 1.0, -0.6124, -0.5, 0.6124, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.0, -0.866, 0.5, 0.6124, -0.5, 0.6124, 0.6124, -0.5, 0.6124, 0.0, -0.866, 0.5, 0.3536, -0.866, 0.3536, 0.6124, -0.5, 0.6124, 0.3536, -0.866, 0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.3536, -0.866, 0.3536, 0.5, -0.866, -0.0, 0.866, -0.5, -0.0, 0.5, -0.866, -0.0, 0.6124, -0.5, -0.6124, 0.6124, -0.5, -0.6124, 0.5, -0.866, -0.0, 0.3536, -0.866, -0.3536, 0.6124, -0.5, -0.6124, 0.3536, -0.866, -0.3536, -0.0, -0.5, -0.866, -0.0, -0.5, -0.866, 0.3536, -0.866, -0.3536, -0.0, -0.866, -0.5, -0.0, -0.5, -0.866, -0.0, -0.866, -0.5, -0.6124, -0.5, -0.6124, -0.6124, -0.5, -0.6124, -0.0, -0.866, -0.5, -0.3536, -0.866, -0.3536, -0.6124, -0.5, -0.6124, -0.3536, -0.866, -0.3536, -0.866, -0.5, 0.0, -0.866, -0.5, 0.0, -0.3536, -0.866, -0.3536, -0.5, -0.866, 0.0, -0.866, -0.5, 0.0, -0.5, -0.866, 0.0, -0.6124, -0.5, 0.6124, -0.6124, -0.5, 0.6124, -0.5, -0.866, 0.0, -0.3536, -0.866, 0.3536, -0.6124, -0.5, 0.6124, -0.3536, -0.866, 0.3536, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, -0.3536, -0.866, 0.3536, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, 0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, -0.0, -1.0, -0.0, 0.3536, -0.866, 0.3536, -0.0, -1.0, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.0, -0.0, -1.0, -0.0, -0.0, -1.0, 0.0, 0.5, -0.866, -0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -1.0, 0.0, 0.3536, -0.866, -0.3536, -0.0, -1.0, 0.0, -0.0, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.0, -0.866, -0.5, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, -0.3536, -0.866, -0.3536, 0.0, -1.0, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, -0.0, -0.5, -0.866, 0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -1.0, -0.0, -0.3536, -0.866, 0.3536, 0.0, -1.0, -0.0, 0.0, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -1.0, -0.0, -0.0, -1.0, -0.0 ]\"))\n(define sphere-texcoords (js \"[0.0, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.125, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.25, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.375, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.5, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.625, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.0, 0.0, 0.75, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.0, 0.0, 0.75, 0.1667, 0.0, 0.875, 0.0, 0.0, 0.875, 0.0, 0.0, 0.75, 0.1667, 0.0, 0.875, 0.1667, 0.0, 0.875, 0.0, 0.0, 0.875, 0.1667, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.875, 0.1667, 0.0, 1.0, 0.1667, 0.0, 0.0, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.3333, 0.0, 0.875, 0.1667, 0.0, 0.875, 0.1667, 0.0, 0.75, 0.3333, 0.0, 0.875, 0.3333, 0.0, 0.875, 0.1667, 0.0, 0.875, 0.3333, 0.0, 1.0, 0.1667, 0.0, 1.0, 0.1667, 0.0, 0.875, 0.3333, 0.0, 1.0, 0.3333, 0.0, 0.0, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.125, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.25, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.375, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.5, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.625, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.75, 0.5, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.5, 0.0, 0.875, 0.3333, 0.0, 0.875, 0.3333, 0.0, 0.75, 0.5, 0.0, 0.875, 0.5, 0.0, 0.875, 0.3333, 0.0, 0.875, 0.5, 0.0, 1.0, 0.3333, 0.0, 1.0, 0.3333, 0.0, 0.875, 0.5, 0.0, 1.0, 0.5, 0.0, 0.0, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.125, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.25, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.375, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.5, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.625, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.5, 0.0, 0.75, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.5, 0.0, 0.75, 0.6667, 0.0, 0.875, 0.5, 0.0, 0.875, 0.5, 0.0, 0.75, 0.6667, 0.0, 0.875, 0.6667, 0.0, 0.875, 0.5, 0.0, 0.875, 0.6667, 0.0, 1.0, 0.5, 0.0, 1.0, 0.5, 0.0, 0.875, 0.6667, 0.0, 1.0, 0.6667, 0.0, 0.0, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.75, 0.8333, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.8333, 0.0, 0.875, 0.6667, 0.0, 0.875, 0.6667, 0.0, 0.75, 0.8333, 0.0, 0.875, 0.8333, 0.0, 0.875, 0.6667, 0.0, 0.875, 0.8333, 0.0, 1.0, 0.6667, 0.0, 1.0, 0.6667, 0.0, 0.875, 0.8333, 0.0, 1.0, 0.8333, 0.0, 0.0, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.125, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.25, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.375, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.5, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.625, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.75, 0.8333, 0.0, 0.75, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.75, 1.0, 0.0, 0.75, 0.8333, 0.0, 0.75, 1.0, 0.0, 0.875, 0.8333, 0.0, 0.875, 0.8333, 0.0, 0.75, 1.0, 0.0, 0.875, 1.0, 0.0, 0.875, 0.8333, 0.0, 0.875, 1.0, 0.0, 1.0, 0.8333, 0.0, 1.0, 0.8333, 0.0, 0.875, 1.0, 0.0, 1.0, 1.0, 0.0]\"))\n(define torus-vertices (js \"[0.7, 0.0, 0.0, 0.495, 0.495, 0.0, 0.4243, 0.4243, 0.1732, 0.7, 0.0, 0.0, 0.4243, 0.4243, 0.1732, 0.6, 0.0, 0.1732, 0.6, 0.0, 0.1732, 0.4243, 0.4243, 0.1732, 0.2828, 0.2828, 0.1732, 0.6, 0.0, 0.1732, 0.2828, 0.2828, 0.1732, 0.4, 0.0, 0.1732, 0.4, 0.0, 0.1732, 0.2828, 0.2828, 0.1732, 0.2121, 0.2121, -0.0, 0.4, 0.0, 0.1732, 0.2121, 0.2121, -0.0, 0.3, 0.0, -0.0, 0.3, 0.0, -0.0, 0.2121, 0.2121, -0.0, 0.2828, 0.2828, -0.1732, 0.3, 0.0, -0.0, 0.2828, 0.2828, -0.1732, 0.4, 0.0, -0.1732, 0.4, 0.0, -0.1732, 0.2828, 0.2828, -0.1732, 0.4243, 0.4243, -0.1732, 0.4, 0.0, -0.1732, 0.4243, 0.4243, -0.1732, 0.6, 0.0, -0.1732, 0.6, 0.0, -0.1732, 0.4243, 0.4243, -0.1732, 0.495, 0.495, 0.0, 0.6, 0.0, -0.1732, 0.495, 0.495, 0.0, 0.7, 0.0, 0.0, 0.495, 0.495, 0.0, -0.0, 0.7, 0.0, -0.0, 0.6, 0.1732, 0.495, 0.495, 0.0, -0.0, 0.6, 0.1732, 0.4243, 0.4243, 0.1732, 0.4243, 0.4243, 0.1732, -0.0, 0.6, 0.1732, -0.0, 0.4, 0.1732, 0.4243, 0.4243, 0.1732, -0.0, 0.4, 0.1732, 0.2828, 0.2828, 0.1732, 0.2828, 0.2828, 0.1732, -0.0, 0.4, 0.1732, -0.0, 0.3, -0.0, 0.2828, 0.2828, 0.1732, -0.0, 0.3, -0.0, 0.2121, 0.2121, -0.0, 0.2121, 0.2121, -0.0, -0.0, 0.3, -0.0, -0.0, 0.4, -0.1732, 0.2121, 0.2121, -0.0, -0.0, 0.4, -0.1732, 0.2828, 0.2828, -0.1732, 0.2828, 0.2828, -0.1732, -0.0, 0.4, -0.1732, -0.0, 0.6, -0.1732, 0.2828, 0.2828, -0.1732, -0.0, 0.6, -0.1732, 0.4243, 0.4243, -0.1732, 0.4243, 0.4243, -0.1732, -0.0, 0.6, -0.1732, -0.0, 0.7, 0.0, 0.4243, 0.4243, -0.1732, -0.0, 0.7, 0.0, 0.495, 0.495, 0.0, -0.0, 0.7, 0.0, -0.495, 0.495, 0.0, -0.4243, 0.4243, 0.1732, -0.0, 0.7, 0.0, -0.4243, 0.4243, 0.1732, -0.0, 0.6, 0.1732, -0.0, 0.6, 0.1732, -0.4243, 0.4243, 0.1732, -0.2828, 0.2828, 0.1732, -0.0, 0.6, 0.1732, -0.2828, 0.2828, 0.1732, -0.0, 0.4, 0.1732, -0.0, 0.4, 0.1732, -0.2828, 0.2828, 0.1732, -0.2121, 0.2121, -0.0, -0.0, 0.4, 0.1732, -0.2121, 0.2121, -0.0, -0.0, 0.3, -0.0, -0.0, 0.3, -0.0, -0.2121, 0.2121, -0.0, -0.2828, 0.2828, -0.1732, -0.0, 0.3, -0.0, -0.2828, 0.2828, -0.1732, -0.0, 0.4, -0.1732, -0.0, 0.4, -0.1732, -0.2828, 0.2828, -0.1732, -0.4243, 0.4243, -0.1732, -0.0, 0.4, -0.1732, -0.4243, 0.4243, -0.1732, -0.0, 0.6, -0.1732, -0.0, 0.6, -0.1732, -0.4243, 0.4243, -0.1732, -0.495, 0.495, 0.0, -0.0, 0.6, -0.1732, -0.495, 0.495, 0.0, -0.0, 0.7, 0.0, -0.495, 0.495, 0.0, -0.7, -0.0, 0.0, -0.6, -0.0, 0.1732, -0.495, 0.495, 0.0, -0.6, -0.0, 0.1732, -0.4243, 0.4243, 0.1732, -0.4243, 0.4243, 0.1732, -0.6, -0.0, 0.1732, -0.4, -0.0, 0.1732, -0.4243, 0.4243, 0.1732, -0.4, -0.0, 0.1732, -0.2828, 0.2828, 0.1732, -0.2828, 0.2828, 0.1732, -0.4, -0.0, 0.1732, -0.3, -0.0, -0.0, -0.2828, 0.2828, 0.1732, -0.3, -0.0, -0.0, -0.2121, 0.2121, -0.0, -0.2121, 0.2121, -0.0, -0.3, -0.0, -0.0, -0.4, -0.0, -0.1732, -0.2121, 0.2121, -0.0, -0.4, -0.0, -0.1732, -0.2828, 0.2828, -0.1732, -0.2828, 0.2828, -0.1732, -0.4, -0.0, -0.1732, -0.6, -0.0, -0.1732, -0.2828, 0.2828, -0.1732, -0.6, -0.0, -0.1732, -0.4243, 0.4243, -0.1732, -0.4243, 0.4243, -0.1732, -0.6, -0.0, -0.1732, -0.7, -0.0, 0.0, -0.4243, 0.4243, -0.1732, -0.7, -0.0, 0.0, -0.495, 0.495, 0.0, -0.7, -0.0, 0.0, -0.495, -0.495, 0.0, -0.4243, -0.4243, 0.1732, -0.7, -0.0, 0.0, -0.4243, -0.4243, 0.1732, -0.6, -0.0, 0.1732, -0.6, -0.0, 0.1732, -0.4243, -0.4243, 0.1732, -0.2828, -0.2828, 0.1732, -0.6, -0.0, 0.1732, -0.2828, -0.2828, 0.1732, -0.4, -0.0, 0.1732, -0.4, -0.0, 0.1732, -0.2828, -0.2828, 0.1732, -0.2121, -0.2121, -0.0, -0.4, -0.0, 0.1732, -0.2121, -0.2121, -0.0, -0.3, -0.0, -0.0, -0.3, -0.0, -0.0, -0.2121, -0.2121, -0.0, -0.2828, -0.2828, -0.1732, -0.3, -0.0, -0.0, -0.2828, -0.2828, -0.1732, -0.4, -0.0, -0.1732, -0.4, -0.0, -0.1732, -0.2828, -0.2828, -0.1732, -0.4243, -0.4243, -0.1732, -0.4, -0.0, -0.1732, -0.4243, -0.4243, -0.1732, -0.6, -0.0, -0.1732, -0.6, -0.0, -0.1732, -0.4243, -0.4243, -0.1732, -0.495, -0.495, 0.0, -0.6, -0.0, -0.1732, -0.495, -0.495, 0.0, -0.7, -0.0, 0.0, -0.495, -0.495, 0.0, 0.0, -0.7, 0.0, 0.0, -0.6, 0.1732, -0.495, -0.495, 0.0, 0.0, -0.6, 0.1732, -0.4243, -0.4243, 0.1732, -0.4243, -0.4243, 0.1732, 0.0, -0.6, 0.1732, 0.0, -0.4, 0.1732, -0.4243, -0.4243, 0.1732, 0.0, -0.4, 0.1732, -0.2828, -0.2828, 0.1732, -0.2828, -0.2828, 0.1732, 0.0, -0.4, 0.1732, 0.0, -0.3, -0.0, -0.2828, -0.2828, 0.1732, 0.0, -0.3, -0.0, -0.2121, -0.2121, -0.0, -0.2121, -0.2121, -0.0, 0.0, -0.3, -0.0, 0.0, -0.4, -0.1732, -0.2121, -0.2121, -0.0, 0.0, -0.4, -0.1732, -0.2828, -0.2828, -0.1732, -0.2828, -0.2828, -0.1732, 0.0, -0.4, -0.1732, 0.0, -0.6, -0.1732, -0.2828, -0.2828, -0.1732, 0.0, -0.6, -0.1732, -0.4243, -0.4243, -0.1732, -0.4243, -0.4243, -0.1732, 0.0, -0.6, -0.1732, 0.0, -0.7, 0.0, -0.4243, -0.4243, -0.1732, 0.0, -0.7, 0.0, -0.495, -0.495, 0.0, 0.0, -0.7, 0.0, 0.495, -0.495, 0.0, 0.4243, -0.4243, 0.1732, 0.0, -0.7, 0.0, 0.4243, -0.4243, 0.1732, 0.0, -0.6, 0.1732, 0.0, -0.6, 0.1732, 0.4243, -0.4243, 0.1732, 0.2828, -0.2828, 0.1732, 0.0, -0.6, 0.1732, 0.2828, -0.2828, 0.1732, 0.0, -0.4, 0.1732, 0.0, -0.4, 0.1732, 0.2828, -0.2828, 0.1732, 0.2121, -0.2121, -0.0, 0.0, -0.4, 0.1732, 0.2121, -0.2121, -0.0, 0.0, -0.3, -0.0, 0.0, -0.3, -0.0, 0.2121, -0.2121, -0.0, 0.2828, -0.2828, -0.1732, 0.0, -0.3, -0.0, 0.2828, -0.2828, -0.1732, 0.0, -0.4, -0.1732, 0.0, -0.4, -0.1732, 0.2828, -0.2828, -0.1732, 0.4243, -0.4243, -0.1732, 0.0, -0.4, -0.1732, 0.4243, -0.4243, -0.1732, 0.0, -0.6, -0.1732, 0.0, -0.6, -0.1732, 0.4243, -0.4243, -0.1732, 0.495, -0.495, 0.0, 0.0, -0.6, -0.1732, 0.495, -0.495, 0.0, 0.0, -0.7, 0.0, 0.495, -0.495, 0.0, 0.7, 0.0, 0.0, 0.6, 0.0, 0.1732, 0.495, -0.495, 0.0, 0.6, 0.0, 0.1732, 0.4243, -0.4243, 0.1732, 0.4243, -0.4243, 0.1732, 0.6, 0.0, 0.1732, 0.4, 0.0, 0.1732, 0.4243, -0.4243, 0.1732, 0.4, 0.0, 0.1732, 0.2828, -0.2828, 0.1732, 0.2828, -0.2828, 0.1732, 0.4, 0.0, 0.1732, 0.3, 0.0, -0.0, 0.2828, -0.2828, 0.1732, 0.3, 0.0, -0.0, 0.2121, -0.2121, -0.0, 0.2121, -0.2121, -0.0, 0.3, 0.0, -0.0, 0.4, 0.0, -0.1732, 0.2121, -0.2121, -0.0, 0.4, 0.0, -0.1732, 0.2828, -0.2828, -0.1732, 0.2828, -0.2828, -0.1732, 0.4, 0.0, -0.1732, 0.6, 0.0, -0.1732, 0.2828, -0.2828, -0.1732, 0.6, 0.0, -0.1732, 0.4243, -0.4243, -0.1732, 0.4243, -0.4243, -0.1732, 0.6, 0.0, -0.1732, 0.7, 0.0, 0.0, 0.4243, -0.4243, -0.1732, 0.7, 0.0, 0.0, 0.495, -0.495, 0.0]\"))\n(define torus-normals (js \"[1.0, 0.0, 0.0, 0.7071, 0.7071, 0.0, 0.3536, 0.3536, 0.866, 1.0, 0.0, 0.0, 0.3536, 0.3536, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.866, 0.3536, 0.3536, 0.866, -0.3536, -0.3536, 0.866, 0.5, 0.0, 0.866, -0.3536, -0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.866, -0.3536, -0.3536, 0.866, -0.7071, -0.7071, -0.0, -0.5, -0.0, 0.866, -0.7071, -0.7071, -0.0, -1.0, -0.0, -0.0, -1.0, -0.0, -0.0, -0.7071, -0.7071, -0.0, -0.3536, -0.3536, -0.866, -1.0, -0.0, -0.0, -0.3536, -0.3536, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -0.866, -0.3536, -0.3536, -0.866, 0.3536, 0.3536, -0.866, -0.5, -0.0, -0.866, 0.3536, 0.3536, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.866, 0.3536, 0.3536, -0.866, 0.7071, 0.7071, 0.0, 0.5, 0.0, -0.866, 0.7071, 0.7071, 0.0, 1.0, 0.0, 0.0, 0.7071, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.0, 0.5, 0.866, 0.7071, 0.7071, 0.0, -0.0, 0.5, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, 0.0, -0.5, 0.866, 0.3536, 0.3536, 0.866, 0.0, -0.5, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, 0.0, -1.0, -0.0, -0.3536, -0.3536, 0.866, 0.0, -1.0, -0.0, -0.7071, -0.7071, -0.0, -0.7071, -0.7071, -0.0, 0.0, -1.0, -0.0, 0.0, -0.5, -0.866, -0.7071, -0.7071, -0.0, 0.0, -0.5, -0.866, -0.3536, -0.3536, -0.866, -0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, -0.0, 0.5, -0.866, -0.3536, -0.3536, -0.866, -0.0, 0.5, -0.866, 0.3536, 0.3536, -0.866, 0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, -0.0, 1.0, 0.0, 0.3536, 0.3536, -0.866, -0.0, 1.0, 0.0, 0.7071, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.7071, 0.7071, 0.0, -0.3536, 0.3536, 0.866, -0.0, 1.0, 0.0, -0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, -0.0, 0.5, 0.866, -0.3536, 0.3536, 0.866, 0.3536, -0.3536, 0.866, -0.0, 0.5, 0.866, 0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.3536, -0.3536, 0.866, 0.7071, -0.7071, -0.0, 0.0, -0.5, 0.866, 0.7071, -0.7071, -0.0, 0.0, -1.0, -0.0, 0.0, -1.0, -0.0, 0.7071, -0.7071, -0.0, 0.3536, -0.3536, -0.866, 0.0, -1.0, -0.0, 0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.3536, -0.3536, -0.866, -0.3536, 0.3536, -0.866, 0.0, -0.5, -0.866, -0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.3536, 0.3536, -0.866, -0.7071, 0.7071, 0.0, -0.0, 0.5, -0.866, -0.7071, 0.7071, 0.0, -0.0, 1.0, 0.0, -0.7071, 0.7071, 0.0, -1.0, -0.0, 0.0, -0.5, -0.0, 0.866, -0.7071, 0.7071, 0.0, -0.5, -0.0, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.5, -0.0, 0.866, 0.5, 0.0, 0.866, -0.3536, 0.3536, 0.866, 0.5, 0.0, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.5, 0.0, 0.866, 1.0, 0.0, -0.0, 0.3536, -0.3536, 0.866, 1.0, 0.0, -0.0, 0.7071, -0.7071, -0.0, 0.7071, -0.7071, -0.0, 1.0, 0.0, -0.0, 0.5, 0.0, -0.866, 0.7071, -0.7071, -0.0, 0.5, 0.0, -0.866, 0.3536, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.5, 0.0, -0.866, -0.5, -0.0, -0.866, 0.3536, -0.3536, -0.866, -0.5, -0.0, -0.866, -0.3536, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.5, -0.0, -0.866, -1.0, -0.0, 0.0, -0.3536, 0.3536, -0.866, -1.0, -0.0, 0.0, -0.7071, 0.7071, 0.0, -1.0, -0.0, 0.0, -0.7071, -0.7071, 0.0, -0.3536, -0.3536, 0.866, -1.0, -0.0, 0.0, -0.3536, -0.3536, 0.866, -0.5, -0.0, 0.866, -0.5, -0.0, 0.866, -0.3536, -0.3536, 0.866, 0.3536, 0.3536, 0.866, -0.5, -0.0, 0.866, 0.3536, 0.3536, 0.866, 0.5, 0.0, 0.866, 0.5, 0.0, 0.866, 0.3536, 0.3536, 0.866, 0.7071, 0.7071, -0.0, 0.5, 0.0, 0.866, 0.7071, 0.7071, -0.0, 1.0, 0.0, -0.0, 1.0, 0.0, -0.0, 0.7071, 0.7071, -0.0, 0.3536, 0.3536, -0.866, 1.0, 0.0, -0.0, 0.3536, 0.3536, -0.866, 0.5, 0.0, -0.866, 0.5, 0.0, -0.866, 0.3536, 0.3536, -0.866, -0.3536, -0.3536, -0.866, 0.5, 0.0, -0.866, -0.3536, -0.3536, -0.866, -0.5, -0.0, -0.866, -0.5, -0.0, -0.866, -0.3536, -0.3536, -0.866, -0.7071, -0.7071, 0.0, -0.5, -0.0, -0.866, -0.7071, -0.7071, 0.0, -1.0, -0.0, 0.0, -0.7071, -0.7071, 0.0, 0.0, -1.0, 0.0, 0.0, -0.5, 0.866, -0.7071, -0.7071, 0.0, 0.0, -0.5, 0.866, -0.3536, -0.3536, 0.866, -0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, -0.0, 0.5, 0.866, -0.3536, -0.3536, 0.866, -0.0, 0.5, 0.866, 0.3536, 0.3536, 0.866, 0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, -0.0, 1.0, -0.0, 0.3536, 0.3536, 0.866, -0.0, 1.0, -0.0, 0.7071, 0.7071, -0.0, 0.7071, 0.7071, -0.0, -0.0, 1.0, -0.0, -0.0, 0.5, -0.866, 0.7071, 0.7071, -0.0, -0.0, 0.5, -0.866, 0.3536, 0.3536, -0.866, 0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, 0.0, -0.5, -0.866, 0.3536, 0.3536, -0.866, 0.0, -0.5, -0.866, -0.3536, -0.3536, -0.866, -0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, 0.0, -1.0, 0.0, -0.3536, -0.3536, -0.866, 0.0, -1.0, 0.0, -0.7071, -0.7071, 0.0, 0.0, -1.0, 0.0, 0.7071, -0.7071, 0.0, 0.3536, -0.3536, 0.866, 0.0, -1.0, 0.0, 0.3536, -0.3536, 0.866, 0.0, -0.5, 0.866, 0.0, -0.5, 0.866, 0.3536, -0.3536, 0.866, -0.3536, 0.3536, 0.866, 0.0, -0.5, 0.866, -0.3536, 0.3536, 0.866, -0.0, 0.5, 0.866, -0.0, 0.5, 0.866, -0.3536, 0.3536, 0.866, -0.7071, 0.7071, -0.0, -0.0, 0.5, 0.866, -0.7071, 0.7071, -0.0, -0.0, 1.0, -0.0, -0.0, 1.0, -0.0, -0.7071, 0.7071, -0.0, -0.3536, 0.3536, -0.866, -0.0, 1.0, -0.0, -0.3536, 0.3536, -0.866, -0.0, 0.5, -0.866, -0.0, 0.5, -0.866, -0.3536, 0.3536, -0.866, 0.3536, -0.3536, -0.866, -0.0, 0.5, -0.866, 0.3536, -0.3536, -0.866, 0.0, -0.5, -0.866, 0.0, -0.5, -0.866, 0.3536, -0.3536, -0.866, 0.7071, -0.7071, 0.0, 0.0, -0.5, -0.866, 0.7071, -0.7071, 0.0, 0.0, -1.0, 0.0, 0.7071, -0.7071, 0.0, 1.0, 0.0, 0.0, 0.5, 0.0, 0.866, 0.7071, -0.7071, 0.0, 0.5, 0.0, 0.866, 0.3536, -0.3536, 0.866, 0.3536, -0.3536, 0.866, 0.5, 0.0, 0.866, -0.5, -0.0, 0.866, 0.3536, -0.3536, 0.866, -0.5, -0.0, 0.866, -0.3536, 0.3536, 0.866, -0.3536, 0.3536, 0.866, -0.5, -0.0, 0.866, -1.0, -0.0, -0.0, -0.3536, 0.3536, 0.866, -1.0, -0.0, -0.0, -0.7071, 0.7071, -0.0, -0.7071, 0.7071, -0.0, -1.0, -0.0, -0.0, -0.5, -0.0, -0.866, -0.7071, 0.7071, -0.0, -0.5, -0.0, -0.866, -0.3536, 0.3536, -0.866, -0.3536, 0.3536, -0.866, -0.5, -0.0, -0.866, 0.5, 0.0, -0.866, -0.3536, 0.3536, -0.866, 0.5, 0.0, -0.866, 0.3536, -0.3536, -0.866, 0.3536, -0.3536, -0.866, 0.5, 0.0, -0.866, 1.0, 0.0, 0.0, 0.3536, -0.3536, -0.866, 1.0, 0.0, 0.0, 0.7071, -0.7071, 0.0]\"))\n(define torus-texcoords (js \"[0.0, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.0, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.125, 0.0, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.125, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.25, 0.0, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.25, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.375, 0.0, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.375, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.5, 0.0, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.5, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.625, 0.0, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.1667, 0.0, 0.625, 0.0, 0.0, 0.75, 0.1667, 0.0, 0.75, 0.0, 0.0, 0.0, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.0, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.1667, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.125, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.1667, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.25, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.1667, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.375, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.1667, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.5, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.1667, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.3333, 0.0, 0.625, 0.1667, 0.0, 0.75, 0.3333, 0.0, 0.75, 0.1667, 0.0, 0.0, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.125, 0.5, 0.0, 0.0, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.3333, 0.0, 0.125, 0.5, 0.0, 0.25, 0.5, 0.0, 0.125, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.3333, 0.0, 0.25, 0.5, 0.0, 0.375, 0.5, 0.0, 0.25, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.3333, 0.0, 0.375, 0.5, 0.0, 0.5, 0.5, 0.0, 0.375, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.3333, 0.0, 0.5, 0.5, 0.0, 0.625, 0.5, 0.0, 0.5, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.3333, 0.0, 0.625, 0.5, 0.0, 0.75, 0.5, 0.0, 0.625, 0.3333, 0.0, 0.75, 0.5, 0.0, 0.75, 0.3333, 0.0, 0.0, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.0, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.125, 0.5, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.125, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.25, 0.5, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.25, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.375, 0.5, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.375, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.5, 0.5, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.5, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.625, 0.5, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.6667, 0.0, 0.625, 0.5, 0.0, 0.75, 0.6667, 0.0, 0.75, 0.5, 0.0, 0.0, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.0, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.6667, 0.0, 0.125, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.125, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.6667, 0.0, 0.25, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.25, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.6667, 0.0, 0.375, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.375, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.6667, 0.0, 0.5, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.5, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.6667, 0.0, 0.625, 0.8333, 0.0, 0.75, 0.8333, 0.0, 0.625, 0.6667, 0.0, 0.75, 0.8333, 0.0, 0.75, 0.6667, 0.0, 0.0, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.125, 1.0, 0.0, 0.0, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.125, 0.8333, 0.0, 0.125, 1.0, 0.0, 0.25, 1.0, 0.0, 0.125, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.25, 0.8333, 0.0, 0.25, 1.0, 0.0, 0.375, 1.0, 0.0, 0.25, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.375, 0.8333, 0.0, 0.375, 1.0, 0.0, 0.5, 1.0, 0.0, 0.375, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.5, 0.8333, 0.0, 0.5, 1.0, 0.0, 0.625, 1.0, 0.0, 0.5, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.625, 0.8333, 0.0, 0.625, 1.0, 0.0, 0.75, 1.0, 0.0, 0.625, 0.8333, 0.0, 0.75, 1.0, 0.0, 0.75, 0.8333, 0.0, 0.0, 1.0, 0.0, 0.0, 1.1667, 0.0, 0.125, 1.1667, 0.0, 0.0, 1.0, 0.0, 0.125, 1.1667, 0.0, 0.125, 1.0, 0.0, 0.125, 1.0, 0.0, 0.125, 1.1667, 0.0, 0.25, 1.1667, 0.0, 0.125, 1.0, 0.0, 0.25, 1.1667, 0.0, 0.25, 1.0, 0.0, 0.25, 1.0, 0.0, 0.25, 1.1667, 0.0, 0.375, 1.1667, 0.0, 0.25, 1.0, 0.0, 0.375, 1.1667, 0.0, 0.375, 1.0, 0.0, 0.375, 1.0, 0.0, 0.375, 1.1667, 0.0, 0.5, 1.1667, 0.0, 0.375, 1.0, 0.0, 0.5, 1.1667, 0.0, 0.5, 1.0, 0.0, 0.5, 1.0, 0.0, 0.5, 1.1667, 0.0, 0.625, 1.1667, 0.0, 0.5, 1.0, 0.0, 0.625, 1.1667, 0.0, 0.625, 1.0, 0.0, 0.625, 1.0, 0.0, 0.625, 1.1667, 0.0, 0.75, 1.1667, 0.0, 0.625, 1.0, 0.0, 0.75, 1.1667, 0.0, 0.75, 1.0, 0.0, 0.0, 1.1667, 0.0, 0.0, 1.3333, 0.0, 0.125, 1.3333, 0.0, 0.0, 1.1667, 0.0, 0.125, 1.3333, 0.0, 0.125, 1.1667, 0.0, 0.125, 1.1667, 0.0, 0.125, 1.3333, 0.0, 0.25, 1.3333, 0.0, 0.125, 1.1667, 0.0, 0.25, 1.3333, 0.0, 0.25, 1.1667, 0.0, 0.25, 1.1667, 0.0, 0.25, 1.3333, 0.0, 0.375, 1.3333, 0.0, 0.25, 1.1667, 0.0, 0.375, 1.3333, 0.0, 0.375, 1.1667, 0.0, 0.375, 1.1667, 0.0, 0.375, 1.3333, 0.0, 0.5, 1.3333, 0.0, 0.375, 1.1667, 0.0, 0.5, 1.3333, 0.0, 0.5, 1.1667, 0.0, 0.5, 1.1667, 0.0, 0.5, 1.3333, 0.0, 0.625, 1.3333, 0.0, 0.5, 1.1667, 0.0, 0.625, 1.3333, 0.0, 0.625, 1.1667, 0.0, 0.625, 1.1667, 0.0, 0.625, 1.3333, 0.0, 0.75, 1.3333, 0.0, 0.625, 1.1667, 0.0, 0.75, 1.3333, 0.0, 0.75, 1.1667, 0.0]\"))\n\n(define wing-vertices (js \"[0.2454, -0.0, 0.7892, 0.9568, -0.0, 0.7842, 0.536, -0.0, 0.9044, 0.2454, -0.0, 0.7892, 1.1471, -0.0, 0.5287, 0.9568, -0.0, 0.7842, 0.2454, -0.0, 0.7892, 0.01, -0.0, 0.4686, 1.1471, -0.0, 0.5287, 0.01, -0.0, 0.4686, 1.2573, -0.0, 0.2883, 1.1471, -0.0, 0.5287, 0.01, -0.0, 0.4686, -0.0, -0.0, 0.2131, 1.2573, -0.0, 0.2883, -0.0, -0.0, 0.2131, 1.1872, -0.0, 0.168, 1.2573, -0.0, 0.2883, -0.0, -0.0, 0.2131, -0.0251, -0.0, 0.1029, 1.1872, -0.0, 0.168, -0.0251, -0.0, 0.1029, 0.2605, -0.0, -0.2377, 1.1872, -0.0, 0.168, 0.2605, -0.0, -0.2377, 1.3926, -0.0, 0.0628, 1.1872, -0.0, 0.168, 0.2605, -0.0, -0.2377, 0.8466, -0.0, -0.6886, 1.3926, -0.0, 0.0628, 0.8466, -0.0, -0.6886, 1.6781, -0.0, -0.3229, 1.3926, -0.0, 0.0628, 0.8466, -0.0, -0.6886, 1.2573, -0.0, -0.8589, 1.6781, -0.0, -0.3229, 1.2573, -0.0, -0.8589, 1.7533, -0.0, -0.6485, 1.6781, -0.0, -0.3229, 1.2573, -0.0, -0.8589, 1.628, -0.0, -0.8639, 1.7533, -0.0, -0.6485, ]\"))\n(define wing-normals (js \"[0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, ]\"))\n(define wing-texcoords (js \"[0.8073, 0.1097, 0.0, 0.4862, 0.0992, 0.0, 0.6752, 0.0493, 0.0, 0.8073, 0.1097, 0.0, 0.4021, 0.218, 0.0, 0.4862, 0.0992, 0.0, 0.8073, 0.1097, 0.0, 0.9373, 0.2673, 0.0, 0.4021, 0.218, 0.0, 0.9373, 0.2673, 0.0, 0.3375, 0.3569, 0.0, 0.4021, 0.218, 0.0, 0.9373, 0.2673, 0.0, 0.9452, 0.3788, 0.0, 0.3375, 0.3569, 0.0, 0.9452, 0.3788, 0.0, 0.3636, 0.4094, 0.0, 0.3375, 0.3569, 0.0, 0.9452, 0.3788, 0.0, 0.9545, 0.4621, 0.0, 0.3636, 0.4094, 0.0, 0.9545, 0.4621, 0.0, 0.8035, 0.6238, 0.0, 0.3636, 0.4094, 0.0, 0.8035, 0.6238, 0.0, 0.3027, 0.4468, 0.0, 0.3636, 0.4094, 0.0, 0.8035, 0.6238, 0.0, 0.5339, 0.8287, 0.0, 0.3027, 0.4468, 0.0, 0.5339, 0.8287, 0.0, 0.1433, 0.6399, 0.0, 0.3027, 0.4468, 0.0, 0.5339, 0.8287, 0.0, 0.3303, 0.9123, 0.0, 0.1433, 0.6399, 0.0, 0.3303, 0.9123, 0.0, 0.0996, 0.8069, 0.0, 0.1433, 0.6399, 0.0, 0.3303, 0.9123, 0.0, 0.1544, 0.9162, 0.0, 0.0996, 0.8069, 0.0, ]\"))\n\n(define body-vertices  (js \"[-0.0, 0.0, -0.921, -0.0, 0.0, -0.921, 0.0061, 0.0211, -0.4399, -0.015, 0.0, -0.4394, -0.0, 0.0, -0.921, 0.0061, 0.0211, -0.4399, 0.0061, -0.0211, -0.4399, -0.0, 0.0, -0.921, -0.015, 0.0, -0.4394, 0.0061, -0.0211, -0.4399, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, 0.0272, 0.0, -0.4404, -0.0, 0.0, -0.921, 0.0061, -0.0211, -0.4399, 0.0272, 0.0, -0.4404, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, -0.0, 0.0, -0.921, 0.0272, 0.0, -0.4404, 0.0061, 0.0211, -0.4399, -0.0, 0.0, -0.921, 0.0272, 0.0, -0.4404, -0.0065, 0.0, -0.0029, 0.0061, 0.0211, -0.4399, 0.0194, 0.0259, -0.0037, -0.0065, 0.0, -0.0029, -0.015, 0.0, -0.4394, 0.0061, 0.0211, -0.4399, 0.0061, -0.0211, -0.4399, -0.015, 0.0, -0.4394, -0.0065, 0.0, -0.0029, 0.0194, -0.0259, -0.0037, 0.0061, -0.0211, -0.4399, -0.0065, 0.0, -0.0029, 0.0272, 0.0, -0.4404, 0.0061, -0.0211, -0.4399, 0.0194, -0.0259, -0.0037, 0.0453, 0.0, -0.0046, 0.0272, 0.0, -0.4404, 0.0194, -0.0259, -0.0037, 0.0194, 0.0259, -0.0037, 0.0272, 0.0, -0.4404, 0.0453, 0.0, -0.0046, 0.0194, 0.0259, -0.0037, 0.0061, 0.0211, -0.4399, 0.0272, 0.0, -0.4404, 0.0064, -0.0, 0.3776, 0.0194, 0.0259, -0.0037, 0.0328, 0.0264, 0.3769, 0.0064, -0.0, 0.3776, -0.0065, 0.0, -0.0029, 0.0194, 0.0259, -0.0037, 0.0194, -0.0259, -0.0037, -0.0065, 0.0, -0.0029, 0.0064, -0.0, 0.3776, 0.0328, -0.0264, 0.3769, 0.0194, -0.0259, -0.0037, 0.0064, -0.0, 0.3776, 0.0453, 0.0, -0.0046, 0.0194, -0.0259, -0.0037, 0.0328, -0.0264, 0.3769, 0.0592, -0.0, 0.3761, 0.0453, 0.0, -0.0046, 0.0328, -0.0264, 0.3769, 0.0328, 0.0264, 0.3769, 0.0453, 0.0, -0.0046, 0.0592, -0.0, 0.3761, 0.0328, 0.0264, 0.3769, 0.0194, 0.0259, -0.0037, 0.0453, 0.0, -0.0046, 0.0125, -0.0, 0.691, 0.0328, 0.0264, 0.3769, 0.0389, 0.0263, 0.6913, 0.0125, -0.0, 0.691, 0.0064, -0.0, 0.3776, 0.0328, 0.0264, 0.3769, 0.0328, -0.0264, 0.3769, 0.0064, -0.0, 0.3776, 0.0125, -0.0, 0.691, 0.0389, -0.0263, 0.6913, 0.0328, -0.0264, 0.3769, 0.0125, -0.0, 0.691, 0.0592, -0.0, 0.3761, 0.0328, -0.0264, 0.3769, 0.0389, -0.0263, 0.6913, 0.0652, -0.0, 0.6915, 0.0592, -0.0, 0.3761, 0.0389, -0.0263, 0.6913, 0.0389, 0.0263, 0.6913, 0.0592, -0.0, 0.3761, 0.0652, -0.0, 0.6915, 0.0389, 0.0263, 0.6913, 0.0328, 0.0264, 0.3769, 0.0592, -0.0, 0.3761, -0.0296, -0.0, 0.9218, 0.0389, 0.0263, 0.6913, 0.0304, 0.0601, 0.9289, -0.0296, -0.0, 0.9218, 0.0125, -0.0, 0.691, 0.0389, 0.0263, 0.6913, 0.0389, -0.0263, 0.6913, 0.0125, -0.0, 0.691, -0.0296, -0.0, 0.9218, 0.0304, -0.0601, 0.9289, 0.0389, -0.0263, 0.6913, -0.0296, -0.0, 0.9218, 0.0652, -0.0, 0.6915, 0.0389, -0.0263, 0.6913, 0.0304, -0.0601, 0.9289, 0.0903, -0.0, 0.9359, 0.0652, -0.0, 0.6915, 0.0304, -0.0601, 0.9289, 0.0304, 0.0601, 0.9289, 0.0652, -0.0, 0.6915, 0.0903, -0.0, 0.9359, 0.0304, 0.0601, 0.9289, 0.0389, 0.0263, 0.6913, 0.0652, -0.0, 0.6915, -0.0296, -0.0, 0.9218, 0.0304, 0.0601, 0.9289, 0.0, -0.002, 1.079, 0.002, -0.0, 1.0793, -0.0296, -0.0, 0.9218, 0.0, -0.002, 1.079, 0.0, 0.002, 1.079, -0.0296, -0.0, 0.9218, 0.002, -0.0, 1.0793, 0.0, 0.002, 1.079, 0.0304, -0.0601, 0.9289, -0.0296, -0.0, 0.9218, 0.0304, -0.0601, 0.9289, -0.002, -0.0, 1.0788, 0.0903, -0.0, 0.9359, 0.0304, -0.0601, 0.9289, 0.0, 0.002, 1.079, -0.002, -0.0, 1.0788, 0.0304, 0.0601, 0.9289, 0.0903, -0.0, 0.9359, -0.002, -0.0, 1.0788, 0.0, -0.002, 1.079, 0.0304, 0.0601, 0.9289, -0.002, -0.0, 1.0788, 0.3868, -0.2394, 1.1734, 0.0643, -0.0224, 0.9367, 0.3926, -0.2359, 1.1688, 0.3868, -0.2394, 1.1734, 0.0587, -0.026, 0.9413, 0.0643, -0.0224, 0.9367, 0.3862, -0.2454, 1.1679, 0.0587, -0.026, 0.9413, 0.3868, -0.2394, 1.1734, 0.3862, -0.2454, 1.1679, 0.058, -0.0318, 0.9358, 0.0587, -0.026, 0.9413, 0.0635, -0.0282, 0.9313, 0.058, -0.0318, 0.9358, 0.3862, -0.2454, 1.1679, 0.392, -0.2419, 1.1634, 0.0635, -0.0282, 0.9313, 0.3862, -0.2454, 1.1679, 0.0643, -0.0224, 0.9367, 0.0635, -0.0282, 0.9313, 0.392, -0.2419, 1.1634, 0.3926, -0.2359, 1.1688, 0.0643, -0.0224, 0.9367, 0.392, -0.2419, 1.1634, 0.3976, -0.2518, 1.2178, 0.3926, -0.2359, 1.1688, 0.4354, -0.2324, 1.1921, 0.3976, -0.2518, 1.2178, 0.3868, -0.2394, 1.1734, 0.3926, -0.2359, 1.1688, 0.3862, -0.2454, 1.1679, 0.3868, -0.2394, 1.1734, 0.3976, -0.2518, 1.2178, 0.3965, -0.2905, 1.1866, 0.3862, -0.2454, 1.1679, 0.3976, -0.2518, 1.2178, 0.392, -0.2419, 1.1634, 0.3862, -0.2454, 1.1679, 0.3965, -0.2905, 1.1866, 0.4343, -0.271, 1.1609, 0.392, -0.2419, 1.1634, 0.3965, -0.2905, 1.1866, 0.4354, -0.2324, 1.1921, 0.392, -0.2419, 1.1634, 0.4343, -0.271, 1.1609, 0.4354, -0.2324, 1.1921, 0.3926, -0.2359, 1.1688, 0.392, -0.2419, 1.1634, 0.3976, -0.2518, 1.2178, 0.4354, -0.2324, 1.1921, 0.4449, -0.2829, 1.2166, 0.4453, -0.2827, 1.2163, 0.3976, -0.2518, 1.2178, 0.4449, -0.2829, 1.2166, 0.4454, -0.2822, 1.2167, 0.3976, -0.2518, 1.2178, 0.4453, -0.2827, 1.2163, 0.4454, -0.2822, 1.2167, 0.3965, -0.2905, 1.1866, 0.3976, -0.2518, 1.2178, 0.3965, -0.2905, 1.1866, 0.4449, -0.2824, 1.217, 0.4343, -0.271, 1.1609, 0.3965, -0.2905, 1.1866, 0.4454, -0.2822, 1.2167, 0.4449, -0.2824, 1.217, 0.4354, -0.2324, 1.1921, 0.4343, -0.271, 1.1609, 0.4449, -0.2824, 1.217, 0.4449, -0.2829, 1.2166, 0.4354, -0.2324, 1.1921, 0.4449, -0.2824, 1.217, 0.2788, 0.3996, 1.0633, 0.0473, 0.0266, 0.943, 0.2812, 0.3959, 1.0701, 0.2788, 0.3996, 1.0633, 0.0451, 0.0304, 0.9363, 0.0473, 0.0266, 0.943, 0.2721, 0.4021, 1.067, 0.0451, 0.0304, 0.9363, 0.2788, 0.3996, 1.0633, 0.2721, 0.4021, 1.067, 0.0383, 0.0327, 0.9399, 0.0451, 0.0304, 0.9363, 0.0406, 0.029, 0.9466, 0.0383, 0.0327, 0.9399, 0.2721, 0.4021, 1.067, 0.2745, 0.3985, 1.0738, 0.0406, 0.029, 0.9466, 0.2721, 0.4021, 1.067, 0.0473, 0.0266, 0.943, 0.0406, 0.029, 0.9466, 0.2745, 0.3985, 1.0738, 0.2812, 0.3959, 1.0701, 0.0473, 0.0266, 0.943, 0.2745, 0.3985, 1.0738, 0.3067, 0.433, 1.0446, 0.2812, 0.3959, 1.0701, 0.3232, 0.4141, 1.0874, 0.3067, 0.433, 1.0446, 0.2788, 0.3996, 1.0633, 0.2812, 0.3959, 1.0701, 0.2721, 0.4021, 1.067, 0.2788, 0.3996, 1.0633, 0.3067, 0.433, 1.0446, 0.2671, 0.4517, 1.0682, 0.2721, 0.4021, 1.067, 0.3067, 0.433, 1.0446, 0.2745, 0.3985, 1.0738, 0.2721, 0.4021, 1.067, 0.2671, 0.4517, 1.0682, 0.2837, 0.4327, 1.1111, 0.2745, 0.3985, 1.0738, 0.2671, 0.4517, 1.0682, 0.3232, 0.4141, 1.0874, 0.2745, 0.3985, 1.0738, 0.2837, 0.4327, 1.1111, 0.3232, 0.4141, 1.0874, 0.2812, 0.3959, 1.0701, 0.2745, 0.3985, 1.0738, 0.3067, 0.433, 1.0446, 0.3232, 0.4141, 1.0874, 0.3186, 0.4708, 1.085, 0.3188, 0.4706, 1.0856, 0.3067, 0.433, 1.0446, 0.3186, 0.4708, 1.085, 0.3193, 0.4704, 1.0853, 0.3067, 0.433, 1.0446, 0.3188, 0.4706, 1.0856, 0.3193, 0.4704, 1.0853, 0.2671, 0.4517, 1.0682, 0.3067, 0.433, 1.0446, 0.2671, 0.4517, 1.0682, 0.3191, 0.4706, 1.0847, 0.2837, 0.4327, 1.1111, 0.2671, 0.4517, 1.0682, 0.3193, 0.4704, 1.0853, 0.3191, 0.4706, 1.0847, 0.3232, 0.4141, 1.0874, 0.2837, 0.4327, 1.1111, 0.3191, 0.4706, 1.0847, 0.3186, 0.4708, 1.085, 0.3232, 0.4141, 1.0874, 0.3191, 0.4706, 1.0847, ]\"))\n(define body-normals (js \"[-0.9995, 0.0055, -0.0312, 0.7062, 0.7069, -0.0399, -0.0159, 0.9998, -0.0115, -1.0, 0.0, -0.0058, -0.9995, 0.0055, -0.0312, -0.0159, 0.9998, -0.0115, -0.0106, -0.9999, -0.0114, -0.9995, 0.0055, -0.0312, -1.0, 0.0, -0.0058, -0.0106, -0.9999, -0.0114, 0.7062, -0.7069, -0.0399, -0.9995, 0.0055, -0.0312, 0.9991, 0.0054, -0.0418, 0.7062, -0.7069, -0.0399, -0.0106, -0.9999, -0.0114, 0.9991, 0.0054, -0.0418, 0.0, 0.0, 0.0, 0.7062, -0.7069, -0.0399, 0.7062, 0.7069, -0.0399, 0.0, 0.0, 0.0, 0.9991, 0.0054, -0.0418, -0.0159, 0.9998, -0.0115, 0.7062, 0.7069, -0.0399, 0.9991, 0.0054, -0.0418, -0.9996, 0.0, 0.0266, -0.0159, 0.9998, -0.0115, -0.0021, 1.0, -0.0061, -0.9996, 0.0, 0.0266, -1.0, 0.0, -0.0058, -0.0159, 0.9998, -0.0115, -0.0106, -0.9999, -0.0114, -1.0, 0.0, -0.0058, -0.9996, 0.0, 0.0266, -0.0021, -1.0, -0.0061, -0.0106, -0.9999, -0.0114, -0.9996, 0.0, 0.0266, 0.9991, 0.0054, -0.0418, -0.0106, -0.9999, -0.0114, -0.0021, -1.0, -0.0061, 0.9992, 0.0, -0.039, 0.9991, 0.0054, -0.0418, -0.0021, -1.0, -0.0061, -0.0021, 1.0, -0.0061, 0.9991, 0.0054, -0.0418, 0.9992, 0.0, -0.039, -0.0021, 1.0, -0.0061, -0.0159, 0.9998, -0.0115, 0.9991, 0.0054, -0.0418, -0.9996, 0.0, 0.0267, -0.0021, 1.0, -0.0061, 0.0007, 1.0, -0.0005, -0.9996, 0.0, 0.0267, -0.9996, 0.0, 0.0266, -0.0021, 1.0, -0.0061, -0.0021, -1.0, -0.0061, -0.9996, 0.0, 0.0266, -0.9996, 0.0, 0.0267, 0.0007, -1.0, -0.0005, -0.0021, -1.0, -0.0061, -0.9996, 0.0, 0.0267, 0.9992, 0.0, -0.039, -0.0021, -1.0, -0.0061, 0.0007, -1.0, -0.0005, 0.9996, 0.0, -0.0277, 0.9992, 0.0, -0.039, 0.0007, -1.0, -0.0005, 0.0007, 1.0, -0.0005, 0.9992, 0.0, -0.039, 0.9996, 0.0, -0.0277, 0.0007, 1.0, -0.0005, -0.0021, 1.0, -0.0061, 0.9992, 0.0, -0.039, -0.9968, 0.0, -0.0803, 0.0007, 1.0, -0.0005, -0.0229, 0.9972, -0.0708, -0.9968, 0.0, -0.0803, -0.9996, 0.0, 0.0267, 0.0007, 1.0, -0.0005, 0.0007, -1.0, -0.0005, -0.9996, 0.0, 0.0267, -0.9968, 0.0, -0.0803, -0.0229, -0.9972, -0.0708, 0.0007, -1.0, -0.0005, -0.9968, 0.0, -0.0803, 0.9996, 0.0, -0.0277, 0.0007, -1.0, -0.0005, -0.0229, -0.9972, -0.0708, 0.9981, 0.0, -0.0608, 0.9996, 0.0, -0.0277, -0.0229, -0.9972, -0.0708, -0.0229, 0.9972, -0.0708, 0.9996, 0.0, -0.0277, 0.9981, 0.0, -0.0608, -0.0229, 0.9972, -0.0708, 0.0007, 1.0, -0.0005, 0.9996, 0.0, -0.0277, -0.6951, 0.0, -0.7189, -0.0229, 0.9972, -0.0708, -0.4938, 0.8565, -0.1502, -0.6951, 0.0, -0.7189, -0.9968, 0.0, -0.0803, -0.0229, 0.9972, -0.0708, -0.0229, -0.9972, -0.0708, -0.9968, 0.0, -0.0803, -0.6951, 0.0, -0.7189, -0.4938, -0.8565, -0.1502, -0.0229, -0.9972, -0.0708, -0.6951, 0.0, -0.7189, 0.9981, 0.0, -0.0608, -0.0229, -0.9972, -0.0708, -0.4938, -0.8565, -0.1502, 0.9724, 0.0, 0.2331, 0.9981, 0.0, -0.0608, -0.4938, -0.8565, -0.1502, -0.4938, 0.8565, -0.1502, 0.9981, 0.0, -0.0608, 0.9724, 0.0, 0.2331, -0.4938, 0.8565, -0.1502, -0.0229, 0.9972, -0.0708, 0.9981, 0.0, -0.0608, -0.6951, 0.0, -0.7189, -0.4938, 0.8565, -0.1502, -0.9805, 0.0048, -0.1962, 0.9804, 0.0, -0.1967, -0.6951, 0.0, -0.7189, -0.9805, 0.0048, -0.1962, -0.9805, -0.0048, -0.1962, -0.6951, 0.0, -0.7189, 0.9804, 0.0, -0.1967, -0.9805, -0.0048, -0.1962, -0.4938, -0.8565, -0.1502, -0.6951, 0.0, -0.7189, -0.4938, -0.8565, -0.1502, 0.8398, 0.0, 0.5428, 0.9724, 0.0, 0.2331, -0.4938, -0.8565, -0.1502, -0.9805, -0.0048, -0.1962, 0.8398, 0.0, 0.5428, -0.4938, 0.8565, -0.1502, 0.9724, 0.0, 0.2331, 0.8398, 0.0, 0.5428, -0.9805, 0.0048, -0.1962, -0.4938, 0.8565, -0.1502, 0.8398, 0.0, 0.5428, -0.6778, 0.3701, 0.6353, 0.5177, 0.8538, 0.053, 0.2823, 0.9559, -0.0806, -0.6778, 0.3701, 0.6353, -0.4603, 0.2258, 0.8585, 0.5177, 0.8538, 0.053, -0.7445, -0.6327, -0.2128, -0.4603, 0.2258, 0.8585, -0.6778, 0.3701, 0.6353, -0.7445, -0.6327, -0.2128, -0.518, -0.8537, -0.0531, -0.4603, 0.2258, 0.8585, 0.4591, -0.2274, -0.8588, -0.518, -0.8537, -0.0531, -0.7445, -0.6327, -0.2128, 0.2234, -0.0834, -0.9711, 0.4591, -0.2274, -0.8588, -0.7445, -0.6327, -0.2128, 0.5177, 0.8538, 0.053, 0.4591, -0.2274, -0.8588, 0.2234, -0.0834, -0.9711, 0.2823, 0.9559, -0.0806, 0.5177, 0.8538, 0.053, 0.2234, -0.0834, -0.9711, -0.8321, 0.528, 0.17, 0.2823, 0.9559, -0.0806, 0.0782, 0.9574, 0.278, -0.8321, 0.528, 0.17, -0.6778, 0.3701, 0.6353, 0.2823, 0.9559, -0.0806, -0.7445, -0.6327, -0.2128, -0.6778, 0.3701, 0.6353, -0.8321, 0.528, 0.17, -0.8767, -0.461, 0.1375, -0.7445, -0.6327, -0.2128, -0.8321, 0.528, 0.17, 0.2234, -0.0834, -0.9711, -0.7445, -0.6327, -0.2128, -0.8767, -0.461, 0.1375, 0.523, -0.278, -0.8057, 0.2234, -0.0834, -0.9711, -0.8767, -0.461, 0.1375, 0.0782, 0.9574, 0.278, 0.2234, -0.0834, -0.9711, 0.523, -0.278, -0.8057, 0.0782, 0.9574, 0.278, 0.2823, 0.9559, -0.0806, 0.2234, -0.0834, -0.9711, -0.8321, 0.528, 0.17, 0.0782, 0.9574, 0.278, -0.5394, 0.2834, 0.7929, 0.0181, 0.0769, -0.9969, -0.8321, 0.528, 0.17, -0.5394, 0.2834, 0.7929, -0.5364, 0.2877, 0.7934, -0.8321, 0.528, 0.17, 0.0181, 0.0769, -0.9969, -0.5364, 0.2877, 0.7934, -0.8767, -0.461, 0.1375, -0.8321, 0.528, 0.17, -0.8767, -0.461, 0.1375, 0.8156, -0.5171, -0.2593, 0.523, -0.278, -0.8057, -0.8767, -0.461, 0.1375, -0.5364, 0.2877, 0.7934, 0.8156, -0.5171, -0.2593, 0.0782, 0.9574, 0.278, 0.523, -0.278, -0.8057, 0.8156, -0.5171, -0.2593, -0.5394, 0.2834, 0.7929, 0.0782, 0.9574, 0.278, 0.8156, -0.5171, -0.2593, 0.174, -0.1953, -0.9651, 0.7737, -0.5787, 0.2579, 0.6006, -0.7849, 0.1519, 0.174, -0.1953, -0.9651, 0.3707, 0.0834, -0.925, 0.7737, -0.5787, 0.2579, -0.8978, 0.2608, -0.3548, 0.3707, 0.0834, -0.925, 0.174, -0.1953, -0.9651, -0.8978, 0.2608, -0.3548, -0.7738, 0.5785, -0.258, 0.3707, 0.0834, -0.925, -0.3724, -0.0825, 0.9244, -0.7738, 0.5785, -0.258, -0.8978, 0.2608, -0.3548, -0.5112, -0.315, 0.7996, -0.3724, -0.0825, 0.9244, -0.8978, 0.2608, -0.3548, 0.7737, -0.5787, 0.2579, -0.3724, -0.0825, 0.9244, -0.5112, -0.315, 0.7996, 0.6006, -0.7849, 0.1519, 0.7737, -0.5787, 0.2579, -0.5112, -0.315, 0.7996, -0.1281, -0.5799, -0.8045, 0.6006, -0.7849, 0.1519, 0.7017, -0.6735, -0.2323, -0.1281, -0.5799, -0.8045, 0.174, -0.1953, -0.9651, 0.6006, -0.7849, 0.1519, -0.8978, 0.2608, -0.3548, 0.174, -0.1953, -0.9651, -0.1281, -0.5799, -0.8045, -0.6729, 0.2405, -0.6995, -0.8978, 0.2608, -0.3548, -0.1281, -0.5799, -0.8045, -0.5112, -0.315, 0.7996, -0.8978, 0.2608, -0.3548, -0.6729, 0.2405, -0.6995, -0.3265, 0.0008, 0.9452, -0.5112, -0.315, 0.7996, -0.6729, 0.2405, -0.6995, 0.7017, -0.6735, -0.2323, -0.5112, -0.315, 0.7996, -0.3265, 0.0008, 0.9452, 0.7017, -0.6735, -0.2323, 0.6006, -0.7849, 0.1519, -0.5112, -0.315, 0.7996, -0.1281, -0.5799, -0.8045, 0.7017, -0.6735, -0.2323, 0.3113, -0.0151, -0.9502, -0.5698, -0.5146, 0.6407, -0.1281, -0.5799, -0.8045, 0.3113, -0.0151, -0.9502, 0.316, -0.018, -0.9486, -0.1281, -0.5799, -0.8045, -0.5698, -0.5146, 0.6407, 0.316, -0.018, -0.9486, -0.6729, 0.2405, -0.6995, -0.1281, -0.5799, -0.8045, -0.6729, 0.2405, -0.6995, 0.0683, 0.5262, 0.8476, -0.3265, 0.0008, 0.9452, -0.6729, 0.2405, -0.6995, 0.316, -0.018, -0.9486, 0.0683, 0.5262, 0.8476, 0.7017, -0.6735, -0.2323, -0.3265, 0.0008, 0.9452, 0.0683, 0.5262, 0.8476, 0.3113, -0.0151, -0.9502, 0.7017, -0.6735, -0.2323, 0.0683, 0.5262, 0.8476, ]\"))\n(define body-texcoords (js \"[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, ]\"))\n", "flx/scm/renderer.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n(define (frustum ortho top near far) (list ortho top near far))\n(define (frustum-ortho? f) (list-ref f 0))\n(define (frustum-top f) (list-ref f 1))\n(define (frustum-near f) (list-ref f 2))\n(define (frustum-far f) (list-ref f 3))\n\n(define (renderer gl)\n  (shader-cache-add gl \"main\" (list \"p\" \"n\" \"t\" \"c\") vertex-shader fragment-shader)\n  (list\n   gl\n   ()\n   (mat4.identity (mat4.create))\n   (mat4.identity (mat4.create))\n   (mat4.identity (mat4.create))\n   (list (state gl))\n   ()\n   #f\n   ()\n   (scenenode 0 (state gl) 0 \'())\n   ()\n   (vector 1 1 1)\n   45\n   (frustum #f 20 0.1 1000.0)))\n\n(define (renderer-gl r) (list-ref r 0))\n(define (renderer-list r) (list-ref r 1))\n(define (renderer-modify-list r v) (list-replace r 1 v))\n(define (renderer-view r) (list-ref r 2))\n(define (renderer-camera r) (list-ref r 3))\n(define (renderer-modify-camera r v) (list-replace r 3 v))\n(define (renderer-world-to-screen r) (list-ref r 4))\n(define (renderer-stack r) (list-ref r 5))\n(define (renderer-modify-stack r v) (list-replace r 5 v))\n(define (renderer-immediate-prims r) (list-ref r 6))\n(define (renderer-modify-immediate-prims r v) (list-replace r 6 v))\n(define (renderer-hook r) (list-ref r 7))\n(define (renderer-modify-hook r v) (list-replace r 7 v))\n(define (renderer-prefab r) (list-ref r 8))\n(define (renderer-modify-prefab r v) (list-replace r 8 v))\n(define (renderer-scenegraph r) (list-ref r 9))\n(define (renderer-modify-scenegraph r v) (list-replace r 9 v))\n(define (renderer-grab-stack r) (list-ref r 10))\n(define (renderer-modify-grab-stack r v) (list-replace r 10 v))\n(define (renderer-clear-colour r) (list-ref r 11))\n(define (renderer-modify-clear-colour r v) (list-replace r 11 v))\n(define (renderer-view-angle r) (list-ref r 12))\n(define (renderer-modify-view-angle r v) (list-replace r 12 v))\n(define (renderer-frustum r) (list-ref r 13))\n(define (renderer-modify-frustum r v) (list-replace r 13 v))\n\n(define (renderer-add r p)\n  (renderer-modify-list r (cons p (renderer-list r))))\n\n(define (renderer-stack-dup r)\n  (renderer-modify-stack\n   r (cons (state-clone (car (renderer-stack r)))\n\t   (renderer-stack r))))\n\n(define (renderer-stack-pop r)\n  (renderer-modify-stack\n   r (cdr (renderer-stack r))))\n\n(define (renderer-stack-top r)\n  (car (renderer-stack r)))\n\n(define (renderer-top-tx r)\n  (state-tx (renderer-stack-top r)))\n\n(define (renderer-current-tx r)\n  (let ((grabbed (renderer-grab-stack-top r)))\n    ;; either modify the grabbed primitive or the stack top\n    (if grabbed\n\t(state-tx (scenenode-state grabbed))\n\t(state-tx (renderer-stack-top r)))))\n\n(define (renderer-global-tx r)\n  (let ((grabbed (renderer-grab-stack-top r)))\n    (if grabbed\n\t(scenenode-global-tx grabbed)\n\t(state-tx (renderer-stack-top r)))))\n\n(define (renderer-modify-current-state r fn)\n  (let ((grabbed (renderer-grab-stack-top r)))\n    ;; either modify the grabbed primitive or the stack top\n    (if grabbed\n\t(begin \n\t  (scenenode-modify-state! grabbed (fn (scenenode-state grabbed)))\n\t  r) ;; need to return the unchanged renderer\n\t(renderer-modify-stack\n\t r (cons (fn (car (renderer-stack r)))\n\t\t (cdr (renderer-stack r)))))))\n\n(define (renderer-immediate-add r p)\n  (renderer-modify-immediate-prims\n   r (cons\n      ;; state, and a primitive to render in\n      (list (state-clone (renderer-stack-top r)) p)\n      (renderer-immediate-prims r))))\n\n(define (renderer-immediate-clear r)\n  (renderer-modify-immediate-prims r ()))\n\n(define (renderer-grab-stack-push r id)\n  (let ((node (scenegraph-find (renderer-scenegraph r) id))) \n    (if node\n\t(renderer-modify-grab-stack\n\t r (cons node\n\t\t (renderer-grab-stack r)))\n\tr)))\n    \n(define (renderer-grabbed? r)\n  (> (length (renderer-grab-stack r)) 0))\n\n(define (renderer-grab-stack-pop r)\n  (renderer-modify-grab-stack r (cdr (renderer-grab-stack r))))\n\n(define (renderer-grab-stack-top r)\n  (if (null? (renderer-grab-stack r))\n      #f\n      (car (renderer-grab-stack r))))\n\n(define (renderer-frustum-apply gl r)\n  (let ((aspect (/ gl.viewportWidth gl.viewportHeight))\n\t(frustum (renderer-frustum r)))\n    (if (frustum-ortho? frustum)\n\t(mat4.ortho (* (frustum-top frustum) aspect -1) \n\t\t    (* (frustum-top frustum) aspect) \n\t\t    (- (frustum-top frustum)) (frustum-top frustum) \n\t\t    (frustum-near frustum) \n\t\t    (frustum-far frustum) \n\t\t    (renderer-view r))\n\t(mat4.perspective \n\t (renderer-view-angle r) \n\t aspect\n\t (frustum-near frustum) \n\t (frustum-far frustum) \n\t (renderer-view r)))))\n\n(define (renderer-render r)\n  (let ((gl (renderer-gl r))\n\t(hook (renderer-hook r))\n\t(view-camera (mat4.create))\n\t(camera-pos (vector 0 0 0)))\n    \n    (gl.viewport 0 0 gl.viewportWidth gl.viewportHeight)\n    (gl.clearColor (vx (renderer-clear-colour r)) \n\t\t   (vy (renderer-clear-colour r))\n\t\t   (vz (renderer-clear-colour r))\n\t\t   (list-ref (renderer-clear-colour r) 3))\n    (gl.clear (js \"gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT\"))\n\n    (renderer-frustum-apply gl r)\n    \n    (gl.enable gl.BLEND)\n    (gl.blendFunc gl.SRC_ALPHA gl.ONE_MINUS_SRC_ALPHA)\n\n    ;; for scene inspection purposes...\n    (mat4.multiply (renderer-view r) (renderer-camera r) (renderer-world-to-screen r))\n    (mat4.multiply (renderer-view r) (renderer-camera r) view-camera)\n    (mat4.multiplyVec3 view-camera (vector 0 0 0) camera-pos)\n\n    (mat4.identity (renderer-top-tx r))\n\n    (when hook (js \"try{\") (hook) (js \"} catch(e) { \") (display e) (js \"}\"))\n\n    ;; immediate mode\n    (let ((ident (mat4.identity (mat4.create))))\n      (for-each\n       (lambda (p)\n\t (let ((state (car p))\n\t       (prim (cadr p)))\n\t   (primitive-render prim gl view-camera camera-pos state ident)))\n       (renderer-immediate-prims r))\n      \n      ;; retained mode\n      (scenegraph-render (renderer-scenegraph r) gl view-camera camera-pos ident))\n    (renderer-immediate-clear r)))\n\n(define (assemble-polyprim gl vertices normals texcoords)\n  (primitive\n   \'polyprim\n   (build-polyprim\n    gl \'triangles\n    (make-pdata \n     (list \"p\" \"n\" \"t\" \"c\") \n     (/ (length vertices) 4)\n     (pdata-interleave-pdata-util \n      (list vertices normals texcoords \n\t    (build-list (* (length vertices) 3) (lambda (_) 1)))))\n    )))\n\n;; todo - probably replace these with the import code path to simplify things...\n(define (renderer-build-prefab r)\n  (let ((gl (renderer-gl r)))\n    (renderer-modify-prefab\n     r\n     (list\n      (assemble-polyprim gl unit-cube-vertices unit-cube-normals unit-cube-texcoords)\n      (assemble-polyprim gl sphere-vertices sphere-normals sphere-texcoords)\n      (assemble-polyprim gl torus-vertices torus-normals torus-texcoords)\n      ))))\n\n(define (renderer-print r)\n  (scenegraph-print (renderer-scenegraph r) 0))\n", "flx/scm/fluxus.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(load \"flx/scm/base.jscm\")\n(load \"flx/scm/texture.jscm\")\n(load \"flx/scm/maths.jscm\")\n(load \"flx/scm/glsl.jscm\")\n(load \"flx/scm/state.jscm\")\n(load \"flx/scm/pdata.jscm\")\n(load \"flx/scm/scenegraph.jscm\")\n(load \"flx/scm/primitive.jscm\")\n(load \"flx/scm/data.jscm\")\n(load \"flx/scm/shaders.jscm\")\n(load \"flx/scm/renderer.jscm\")\n(load \"flx/scm/instanceprim.jscm\")\n(load \"flx/scm/polyprim.jscm\")\n(load \"flx/scm/geometry.jscm\")\n(load \"flx/scm/meshcache.jscm\")\n(load \"flx/scm/shadercache.jscm\")\n\n(define the-renderer 0)\n\n(define flx-start-time (js \"new Date().getTime()/1000\"))\n \n(define (time) \n  (let ((time-now (js \"new Date()\")))\n    (- (/ (time-now.getTime) 1000) \n       flx_start_time)))\n\n(define (push) (set! the-renderer (renderer-stack-dup the-renderer)))\n(define (pop) (set! the-renderer (renderer-stack-pop the-renderer)))\n\n;; due to the way with-primitive macro works, an unknown/bad\n;; primitive id with cause following state modifications to \n;; happen to the global state!!!\n(define (grab id) (set! the-renderer (renderer-grab-stack-push the-renderer id)))\n(define (ungrab) (set! the-renderer (renderer-grab-stack-pop the-renderer)))\n\n(define (identity)\n  (mat4.identity (renderer-current-tx the-renderer)))\n\n(define (translate v)\n  (mat4.translate (renderer-current-tx the-renderer) v))\n\n(define (rotate v)\n  (mat4.rotate (renderer-current-tx the-renderer) (* (vx v) 0.0174532925) (list 1 0 0))\n  (mat4.rotate (renderer-current-tx the-renderer) (* (vy v) 0.0174532925) (list 0 1 0))\n  (mat4.rotate (renderer-current-tx the-renderer) (* (vz v) 0.0174532925) (list 0 0 1)))\n\n(define aim-matrix (mat4.create))\n\n(define (maim v up)\n  (let ((l (vector 0 0 0))\n\t(u (vector 0 0 0)))\n    (vec3.cross v up l)\n    (vec3.cross v l u)\n\n    (js \"aim_matrix[0]=vx(v);\")\n    (js \"aim_matrix[1]=vy(v);\")\n    (js \"aim_matrix[2]=vz(v);\")\n    (js \"aim_matrix[3]=0;\")\n\n    (js \"aim_matrix[4]=vx(l);\")\n    (js \"aim_matrix[5]=vy(l);\")\n    (js \"aim_matrix[6]=vz(l);\")\n    (js \"aim_matrix[7]=0;\")\n\n    (js \"aim_matrix[8]=vx(u);\")\n    (js \"aim_matrix[9]=vy(u);\")\n    (js \"aim_matrix[10]=vz(u);\")\n    (js \"aim_matrix[11]=0;\")\n\n    (js \"aim_matrix[12]=0;\")\n    (js \"aim_matrix[13]=0;\")\n    (js \"aim_matrix[14]=0;\")\n    (js \"aim_matrix[15]=1;\")\n\n    (mat4.multiply (renderer-current-tx the-renderer) aim-matrix)))\n\n(define (concat m)\n    (mat4.multiply (renderer-current-tx the-renderer) m))\n\n(define (get-transform)\n  (renderer-current-tx the-renderer))\n\n(define (get-global-transform)\n  (renderer-global-tx the-renderer))\n\n(define (camera-transform)\n  (renderer-camera the-renderer))\n\n(define (set-camera-transform tx)\n  (set! the-renderer (renderer-modify-camera the-renderer tx)))\n\n(define (set-camera-angle a)\n  (set! the-renderer (renderer-modify-view-angle the-renderer a)))\n\n(define (get-camera-angle a)\n  (renderer-view-angle the-renderer))\n\n;;(define (vtransform m v)\n;; (mat4.multiplyVec3 m v))\n\n(define (clear-colour col)\n  (set! the-renderer (renderer-modify-clear-colour the-renderer col)))\n\n(define (view-transform)\n  (renderer-view the-renderer))\n\n;; returns the 2D screen coordinate of a 3D world space one\n(define (project-point p)\n  (let ((ret (list (vx p) (vy p) (vz p) 1))\n        (gl (renderer-gl the-renderer)))\n    (mat4.multiplyVec4 (renderer-world-to-screen the-renderer) ret)\n    (let ((z (list-ref ret 3)))\n      (vec3.create \n       (list (* (+ (/ (vx ret) z) 1) gl.viewportWidth 0.5)\n\t     (* (+ (/ (- 0 (vy ret)) z) 1) gl.viewportHeight 0.5)\n\t     0)))))\n\n(define (ndc-coords gl v z)\n  (list\n   (* 2 (- (/ (vx v) gl.viewportWidth) 1))\n   (* -2 (- (/ (vy v) gl.viewportHeight) 1))\n   z\n   1))\n\n(define (divide-w v)\n  (vector \n   (/ (vx v) (list-ref v 3))\n   (/ (vy v) (list-ref v 3))\n   (/ (vz v) (list-ref v 3))))\n\n;; returns the 3D line representing a screen space coordinate\n;; not yet working...\n(define (unproject-point p)\n  (let ((gl (renderer-gl the-renderer))\n\t(screen-to-world (minverse (renderer-world-to-screen the-renderer))))\n    (divide-w (mat4.multiplyVec4 screen-to-world (ndc-coords gl (list (vx p) (vy p)) 0)))))\n\n;; screen point to world coordinate\n(define (unproject-point-ortho pos)\n  ;; pos is in screen pixel space\n  ;; so divide to normalise (0 - 1)\n  (let ((scr-aspect (/ screen-width screen-height))\n\t(norm (vector (/ (vx pos) screen-width)\n\t\t      (/ (vy pos) screen-height)\n\t\t      0)))\n    ;; convert into ortho world coordinates but account for half scale\n    (let ((top (frustum-top (renderer-frustum the-renderer))))\n      (vector\n       (* (/ (- (vx pos) (/ screen-width 2)) screen-width) (* top scr-aspect 2))\n       (* (/ (- (/ screen-height 2) (vy pos)) screen-height) (* top 2)) \n       (* (vy norm) 0.1)))))\n\n(define (primitive-screen-pos p)\n  (project-point\n   (with-primitive p (mtransform (get-transform) (vector 0 0 0)))))\n\n(define (primitive-global-screen-pos p)\n  (project-point\n   (with-primitive p (mtransform (get-global-transform) (vector 0 0 0)))))\n\n(define (scale v)\n  (mat4.scale (renderer-current-tx the-renderer) v))\n\n(define (load-texture name)\n  (load-texture-impl!\n   (renderer-gl the-renderer)\n   (+ \"textures/\" name)))\n\n(define (texture name)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-texture state name)))))\n\n(define (shader-compile name attrib-names vert frag)\n  (internal-load-shader-cache (renderer-gl the-renderer) name attrib-names vert frag))\n\n(define (shader-assign-compiled name)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n             (state-modify-shader\n              state\n              (shader-cache-search name))))))\n\n(define (shader vert frag)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n             (state-modify-shader\n              state\n              (build-shader (renderer-gl the-renderer) \n\t\t\t    (list \"p\" \"n\" \"t\" \"c\") vert frag))))))\n\n(define (shader-attrib-names names vert frag)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n\t (lambda (state)\n\t   (state-modify-shader\n\t    state\n\t    (build-shader (renderer-gl the-renderer) names vert frag))))))\n\n;; setting uniforms - this one sets the unform for this shader program\n;; affecting all primitives using it\n(define (shader-shared-uniform! name type value)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n\t     (let ((gl (renderer-gl the-renderer))\n\t\t   (shader (state-shader state)))\n\t       (gl.useProgram shader) \n\t       (internal-uniform! gl shader name type value)\n\t       state)))))\n\n;; setting uniforms - locally to this primitive state only\n(define (shader-uniform! name type value)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer\n           (lambda (state)\n\t     (let ((gl (renderer-gl the-renderer)))\n\t       (state-modify-uniform-items\n\t\tstate (set-uniform-item\n\t\t       (make-uniform-item name type value)\n\t\t       (state-uniform-items state))))))))\n\n(define (colour col)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-colour state col)))))\n\n(define (every-frame-impl hook)\n  (set! the-renderer (renderer-modify-hook the-renderer hook)))\n\n(define (draw-cube)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) 0))))\n\n(define (draw-sphere)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) 1))))\n\n(define (draw-torus)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) 2))))\n\n(define (draw-obj obj)\n  (set! the-renderer (renderer-immediate-add\n\t   the-renderer (list-ref (renderer-prefab the-renderer) obj))))\n\n(define (build-polygons type size-verts)\n  (let ((gl (renderer-gl the-renderer)))\n    (add-to-scenegraph!     \n     (primitive\n      \'polyprim\n      (build-empty-polyprim gl type size-verts)))))\n\n(define (set-hint! hint)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer (lambda (state)\n\t     (state-modify-hints state (bitwise-or (state-hints state) hint))))))\n\n(define (clear-hints!)\n  (set! the-renderer \n\t(renderer-modify-current-state\n\t the-renderer (lambda (state)\n\t     (state-modify-hints state 0)))))\n\n(define (hint-none) (clear-hints!))\n(define (hint-solid) (set-hint! FLX_HINT_SOLID))\n(define (hint-wire) (set-hint! FLX_HINT_WIRE))\n(define (hint-ignore-depth) (set-hint! FLX_HINT_IGNORE_DEPTH))\n(define (hint-nozwrite) (set-hint! FLX_HINT_NOZWRITE))\n(define (hint-cullface) (set-hint! FLX_HINT_CULL_FACE))\n(define (hint-cullccw) (set-hint! FLX_HINT_CULL_CCW))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; loading meshes\n\n(define (load-primitive url)\n  (let ((gl (renderer-gl the-renderer))\n\t(raw (mesh-cache-search url)))\n    (add-to-scenegraph!     \n     (primitive\n      \'polyprim\n      (build-polyprim gl \'triangles raw)))))\n\n(define (load-ply-primitive url)\n  (let ((gl (renderer-gl the-renderer))\n\t(raw (mesh-cache-search url)))\n    (add-to-scenegraph!     \n     (primitive\n      \'polyprim\n      (build-polyprim gl \'triangles raw)))))\n\n;; (list\n;; \t(buffer gl \"p\" (list-ref raw 0) 3)\n;; \t(buffer gl \"n\" (list-ref raw 1) 3)\n;; \t(buffer gl \"t\" (list-ref raw 0) 3)\n;; \t))))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;; retained mode\n\n(define next-id 0)\n(define (new-id) \n  (set! next-id (+ next-id 1))\n  next-id)\n\n(define (parent id)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-parent state id)))))\n\n(define (hide v)\n  (set! the-renderer (renderer-modify-current-state\n           the-renderer\n           (lambda (state)\n             (state-modify-hidden state v)))))\n\n(define (add-to-scenegraph! prim)\n  (let ((id (new-id)))\n    (set! the-renderer (renderer-modify-scenegraph\n\t     the-renderer \n\t     (scenegraph-add \n\t      (renderer-scenegraph the-renderer) \n\t      (state-parent (renderer-stack-top the-renderer)) ;; parent from state \n\t      (scenenode\n\t       id \n\t       (state-clone (renderer-stack-top the-renderer)) ;; stack\n\t       prim\n\t       \'() ;; children\n\t       ))))\n    id))\n\n(define (destroy id)\n  (set! the-renderer \n\t(renderer-modify-scenegraph\n\t the-renderer (scenegraph-remove \n\t\t       (renderer-scenegraph the-renderer) \n\t\t       id))))\n\n(define (apply-transform!)\n  (let ((tx (get-transform)))\n    (pdata-map!\n     (lambda (p)\n       (mtransform tx p))\n     \"p\"))\n  (identity))\n\n(define (build-cube)\n  (add-to-scenegraph! (list-ref (renderer-prefab the-renderer) 0)))\n\n(define (build-instance polyref)\n  (add-to-scenegraph! \n   (primitive \n    \'instanceprim \n    (instanceprim \n     (primitive-inner\n      (scenenode-primitive \n       (scenegraph-find \n\t(renderer-scenegraph the-renderer) \n\tpolyref)))))))\n\n(define (build-locator)\n  ;; locator is an empty primitive for positioning things \n  ;; in the scenegraph - we might want to add axis rendering\n  ;; for debugging\n  (add-to-scenegraph! \n   (primitive \'locatorprim 0)))\n\n(define (pdata-map! fn name)\n  (when (renderer-grabbed? the-renderer)\n\t(pdata-internal-map!\n\t (renderer-gl the-renderer) \n\t ;; todo: check type is polyprim\n\t (polyprim-pdata \n\t  (primitive-inner\n\t   (scenenode-primitive (renderer-grab-stack-top the-renderer))))\n\t fn name)))\n\n(define (pdata-index-map! fn name)\n  (when (renderer-grabbed? the-renderer)\n\t(pdata-internal-index-map!\n\t (renderer-gl the-renderer) \n\t ;; todo: check type is polyprim\n\t (polyprim-pdata \n\t  (primitive-inner\n\t   (scenenode-primitive (renderer-grab-stack-top the-renderer))))\n\t fn name)))\n\n(define (pdata-add! name)\n  (when (renderer-grabbed? the-renderer)\n\t ;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-internal-add!\n\t   (renderer-gl the-renderer) \n\t   (polyprim-pdata pp)\n\t   name))))\n\n(define (pdata-size)\n  (when (renderer-grabbed? the-renderer)\n\t;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-size-verts  \n\t   (polyprim-pdata pp)))))\n\n(define (pdata-set! name pos value)\n  (when (renderer-grabbed? the-renderer)\n\t ;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-internal-set!\n\t   (renderer-gl the-renderer) \n\t   (polyprim-pdata pp)\n\t   name (modulo pos (polyprim-size pp)) value))))\n\n(define (pdata-ref name pos)\n  (when (renderer-grabbed? the-renderer)\n\t ;; todo: check type is polyprim\n\t(let ((pp (primitive-inner\n\t\t   (scenenode-primitive (renderer-grab-stack-top the-renderer)))))\n\t  (pdata-internal-ref\n\t   (renderer-gl the-renderer) \n\t   (polyprim-pdata pp)\n\t   name (modulo pos (polyprim-size pp))))))\n\n;; new command to upload the vbo from the modified data - use for \n;; pdata-set! (maybe pdata-map! in the future???)\n(define (pdata-upload!)\n  (let ((grabbed (renderer-grab-stack-top the-renderer)))\n    (when grabbed\n\t  (pdata-update-vbo! \n\t   (renderer-gl the-renderer)\n\t   (polyprim-pdata\n\t    (primitive-inner\n\t     (scenenode-primitive grabbed)))))))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define t 0)\n(define stat-period 60)\n(define last-stat 0)\n\n(define (crank)\n  (outer-render))\n\n(define (debug-renderer)\n  (renderer-print the-renderer))\n\n(define (set-framerate-divide! v)\n  (set! framerate-divide v))\n\n(define framerate-divide 1)\n\n(define (outer-render)\n  (set! t (+ t 1))  \n  (when (zero? (modulo t framerate-divide))\n\t(set! the-renderer (renderer-render the-renderer))\n\t;; (set! stat-period (- stat-period 1))            \n\t(when (zero? stat-period)\n\t      (set! stat-period 60)\n\t      (set! current-fps (/ (* stat-period 1000) (- (Date.now) last-stat)))\n\t      (console.log (+ \"FPS: \" (trunc current-fps)))\n\t      (set! last-stat (Date.now))))\n  (window.requestAnimationFrame outer-render))\n\n(define (print-renderer-top)\n  (msg (renderer-stack-top the-renderer)))\n\n(define (ortho top)\n  (set! the-renderer \n\t(renderer-modify-frustum \n\t the-renderer \n\t (frustum #t top \n\t\t  (frustum-near (renderer-frustum the-renderer))\n\t\t  (frustum-far (renderer-frustum the-renderer))))))  \n\n(define (persp)\n  (set! the-renderer \n\t(renderer-modify-frustum \n\t the-renderer \n\t (frustum #f\n\t\t  (frustum-top frustum)\n\t\t  (frustum-near (renderer-frustum the-renderer))\n\t\t  (frustum-far (renderer-frustum the-renderer))))))\n\n\n(define (frustum-clip near far)\n  (set! the-renderer \n\t(renderer-modify-frustum \n\t the-renderer \n\t (frustum (frustum-ortho? (renderer-frustum the-renderer))\n\t\t  (frustum-top (renderer-frustum the-renderer))\n\t\t  near\n\t\t  far))))\n\n\n(define (clear)\n  (let ((canvas (document.getElementById \"webgl-canvas\")))\n    (let ((gl (canvas.getContext \"experimental-webgl\")))\n      (set! gl.viewportWidth canvas.width)\n      (set! gl.viewportHeight canvas.height)\n      (set! the-renderer (renderer gl))\n      ;; set up camera transform\n      (mat4.translate (renderer-camera the-renderer) (list 0 0 0))\n      (set! the-renderer (renderer-build-prefab the-renderer))\n      (gl.clearColor 0.0 0.0 0.0 1.0)\n      (gl.enable gl.DEPTH_TEST)\n      (gl.disable gl.CULL_FACE)\n      ;; make sure the default texture is loaded\n      (texture (load-texture \"white.png\"))\n      )))\n\n(define (resize-glcanvas canvas) \n  ;; ;; Lookup the size the browser is displaying the canvas.\n  ;; (let ((displayWidth canvas.clientWidth)\n  ;; \t(displayHeight canvas.clientHeight)) \n  ;;   ;; Check if the canvas is not the same size.\n  ;;   (when (or (not (eq? canvas.width displayWidth))\n  ;; \t      (not (eq? canvas.height displayHeight)))\n  ;; \t  ;; Make the canvas the same size\n  ;; \t  (set! canvas.width displayWidth)\n  ;; \t  (set! canvas.height displayHeight)\n  ;; \t  (let ((gl (canvas.getContext \"experimental-webgl\")))\n  ;; \t    (set! gl.viewportWidth canvas.width)\n  ;; \t    (set! gl.viewportHeight canvas.height))))\n  0\n  )\n\n(define (size-glcanvas canvas displayWidth displayHeight) \n  ;; Make the canvas the same size\n  (set! canvas.width displayWidth)\n  (set! canvas.height displayHeight)\n  (let ((gl (canvas.getContext \"experimental-webgl\")))\n    (set! gl.viewportWidth canvas.width)\n    (set! gl.viewportHeight canvas.height)))\n\n\n(clear)\n(crank)\n\n", "flx/scm/shadercache.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2018 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define shader-cache ())\n(define shaders-load-outstanding 0)\n(define shaders-total-load 0)\n\n(define (shaders-loaded?)\n  (eq? shaders-load-outstanding 0))\n\n(define (internal-load-shader-cache gl name attrib-names vert frag)\n  (set! shaders-load-outstanding (+ shaders-load-outstanding 1))\n  (set! shaders-total-load (+ shaders-total-load 1))\n  (load-resource-txt \n   vert\n   (lambda (vert-code)\n     (load-resource-txt\n      frag\n      (lambda (frag-code)\t\t\n\t(set! shaders-load-outstanding (- shaders-load-outstanding 1))\n\t(shader-cache-add gl name attrib-names vert-code frag-code))))))\n\n(define (shader-cache-add gl name attrib-names vert-code frag-code)\n  (set! shader-cache \n\t(cons \n\t (list name (build-shader gl attrib-names vert-code frag-code))\n\t shader-cache)))\n\n(define (shader-cache-search name)\n  (let ((shader (assoc name shader-cache)))\n    (cond \n     (shader (cadr shader)) ;; deep copy!?\n     (else \n      (msg (+ \"shader not loaded into cache in preload: \" name))\n      (wewe)))))\n\t\n", "flx/scm/base.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n;; basic scheme stuff we need, and some tests\n\n(define display (lambda (str) (console.log str)))\n(define newline (lambda () (console.log \"\\n\")))\n\n(define (ditto-print-list a)\n  (let ((str \"\"))\n    (set! str (+ str \"[\"))\n    (js \"for (var i=0; i<a.length; i++) {\")\n    (set! str (+ str (ditto-pretty-print (list-ref a i))))\n    (when (not (eq? i (- a.length 1))) (set! str (+ str \" \")))\n    (js \"}\")\n    (set! str (+ str \"]\"))\n    str))\n\n(define (ditto-pretty-print a)\n  (cond\n   ((list? a) (ditto-print-list a))\n   (else (+ \"\" a))))\n\n(define (msg a) \n  (console.log (ditto-pretty-print a)))\n\n(define (dbg a) (msg a) a)\n(define (error a) (msg a))\n\n(define (zero? n) (js \"n===0\"))\n(define (eqv? a b) (eq? a b))\n(define (equal? a b) (eq? a b))\n(define (floor n) (Math.floor n))\n(define (fmod a b) (js \"Number((a - (Math.floor(a / b) * b)).toPrecision(8));\"))\n(define (fabs x) (Math.abs x))\n(define (string->number x) (parseFloat x))\n\n(define (random n)\n  (Math.floor (* (Math.random) n)))\n\n(define (random-range a b)\n  (+ a (Math.floor (* (Math.random) (- b a)))))\n\n(define (rndf) (Math.random))\n\n(define (max a b) (if (> a b) a b))\n(define (min a b) (if (< a b) a b))\n\n(define (substring str s e)\n  (js \"str.substring(s, e);\"))\n\n(define (string-length str)\n  (js \"str.length\"))\n\n(define (string->list str)\n  (str.split \"\"))\n\n(define (string-ref str i)\n  (js \"str[i]\"))\n\n;; replaced by underlying iterative version\n;;(define foldl\n;;  (lambda (fn v l)\n;;    (cond\n;;     ((null? l) v)\n;;     (else (foldl fn (fn (car l) v) (cdr l))))))\n\n;; replaced by underlying iterative version\n;; (define (list-contains? l v)\n;;   (cond\n;;     ((null? l) #f)\n;;     ((eq? (car l) v) #t)\n;;     (else (list-contains? (cdr l) v))))\n\n(define map\n  (lambda (fn l)\n    (foldl\n     (lambda (i r)\n       (append r (list (fn i))))\n     () l)))\n\n(define map2\n  (lambda (fn l l2)\n    (foldl\n     (lambda (a b r)\n       (append r (list (fn a b))))\n     () l l2)))\n\n(define filter\n  (lambda (fn l)\n    (foldl\n     (lambda (i r)\n       (if (fn i) (append r (list i)) r))\n     \'() l)))\n\n(define (list-remove l i)\n  (filter (lambda (a) (not (eq? a i))) l))\n\n(define for-each\n  (lambda (fn l)\n    (foldl\n     (lambda (i r)\n       (fn i))\n     ()\n     l) #f))\n\n(define (assoc k l)\n  (foldl\n   (lambda (i r)\n     (if (eq? (car i) k) i r))\n   #f l))\n\n;; index versions provide count for first argument\n\n(define index-foldl\n  (lambda (fn s l)\n    (cadr (foldl\n           (lambda (e r)\n             (list\n              (+ (car r) 1)\n              (fn (car r) e (cadr r))))\n           (list 0 s)\n           l))))\n\n\n(define index-map\n  (lambda (fn l)\n    (cadr (foldl\n           (lambda (e r)\n             (list\n              (+ (car r) 1)\n              (append (cadr r) (list (fn (car r) e)))))\n           (list 0 ())\n           l))))\n\n(define index-for-each\n  (lambda (fn l)\n    (foldl\n     (lambda (e r)\n       (fn r e)\n       (+ r 1))\n     0 l)))\n\n;; fix js modulo irt negative numbers\n(define (modulo m n) (js \"((m%n)+n)%n\"))\n(define (quotient m n) (Math.floor (/ m n)))\n\n(define (sin a) (Math.sin a))\n(define (cos a) (Math.cos a))\n\n(define list-equal?\n  (lambda (a b)\n    (define _\n      (lambda (a b)\n        (cond\n         ((null? a) #t)\n         ((not (eq? (car a) (car b))) #f)\n         (else (_ (cdr a) (cdr b))))))\n    (if (eq? (length a) (length b))\n        (_ a b) #f)))\n\n;; replaced by js version\n;;(define build-list\n;;  (lambda (n fn)\n;;    (define _\n;;      (lambda (i)\n;;        (cond\n;;         ((eq? i (- n 1)) ())\n;;         (else\n;;          (cons (fn n) (_ (+ i 1) fn))))))\n;;    (_ 0)))\n\n(define print-list\n  (lambda (l)\n    (when (not (null? l))\n          (console.log (car l))\n          (print-list (cdr l)))))\n\n(define reverse\n  (lambda (l)\n    (cond\n     ((null? l) ())\n     (else\n      (append (reverse (cdr l)) (list (car l)))))))\n\n(define (choose l)\n  (list-ref l (random (length l))))\n\n(define (delete-n l n)\n  (if (eq? n 0)\n      (cdr l)\n      (append (list (car l)) (delete-n (cdr l) (- n 1)))))\n\n(define (shuffle l)\n  (cond ((null? l) ())\n        ((< (length l) 2)\n         (list (car l)))\n        (else\n         (let ((item (random (length l))))\n           (cons (list-ref l item)\n                 (shuffle (delete-n l item)))))))\n\n(define (crop l n)\n  (cond\n   ((null? l) ())\n   ((zero? n) ())\n   (else (cons (car l) (crop (cdr l) (- n 1))))))\n\n;; return (picked left-over)\n(define (pick-out-of l n)\n  (define (_ p l n)\n    (cond\n      ((or (null? l) (zero? n))\n       (list p l))\n      (else\n       (let ((item (random (length l))))\n         (_\n          (cons (list-ref l item) p)\n          (delete-n l item)\n          (- n 1))))))\n  (_ () l n))\n\n(define factorial\n  (lambda (n)\n    (if (= n 0) 1\n        (* n (factorial (- n 1))))))\n\n\n(define (symbol->string sym)\n  sym);; (ditto.symbol_string sym))\n\n(define (string->symbol str)\n  ;(ditto.find_symbol str)\n  str)\n\n;; convert code to text form\n; (define (scheme-txt v)\n;  (cond\n;   ((number? v) v)\n;   ((string? v) (string-append \"\\\"\" v \"\\\"\"))\n;   ((boolean? v) (if v \"#t\" \"#f\"))\n;   ((list? v)\n;    (cond\n;     ((null? v) \"()\")\n;     (else\n;      (list-txt v))))\n;   (else (msg (+ \"scheme->txt, unsupported type for \" v)))))\n;\n;(define (list-txt l)\n;  (define (_ l s)\n;    (cond\n;     ((null? l) s)\n;     (else\n;      (_ (cdr l)\n;         (string-append\n;          s\n;          (if (not (eq? s \"\")) \" \" \"\")\n;          (scheme-txt (car l)))))))\n;  (string-append \"(list \" (_ l \"\") \")\"))\n\n(define (assert condition message) \n  (when (not condition) \n\t(js \"; throw message || \'assertion failed\';\")))\n\n(define unit-test\n  (lambda ()\n    (define a 0)\n    (set! a 10)\n    (when (not (eq? 4 4)) (display \"eq? failed\"))\n    (when (eq? 2 4) (display \"eq?(2) failed\"))\n    (when (not (eq? (car (list 3 2 1)) 3)) (display \"car failed\"))\n    (when (not (eq? (cadr (list 3 2 1)) 2)) (display \"cadr failed\"))\n    (when (not (eq? (caddr (list 3 2 1)) 1)) (display \"caddr failed\"))\n\n    (when (not (eq? (begin 1 2 3) 3)) (display \"begin failed\"))\n    (when (not (eq? (list-ref (list 1 2 3) 2) 3)) (display \"list-ref failed\"))\n    (when (not (list? (list 1 2 3))) (display \"list? failed\"))\n    (when (list? 3) (display \"list?(2) failed\"))\n    (when (null? (list 1 2 3)) (display \"null? failed\"))\n    (when (not (null? (list))) (display \"null?(2) failed\"))\n    (when (not (eq? (length (list 1 2 3 4)) 4)) (display \"length failed\"))\n    (when (not (list-equal? (list 1 2 3 4) (list 1 2 3 4))) (display \"list-equal failed\"))\n    (when (list-equal? (list 1 2 3 4) (list 1 4 3 4)) (display \"list-equal(2) failed\"))\n    (when (not (list-equal? (append (list 1 2 3) (list 4 5 6)) (list 1 2 3 4 5 6)))\n          (display \"append failed\"))\n    (when (not (list-equal? (cdr (list 3 2 1)) (list 2 1))) (display \"cdr failed\"))\n    (when (not (list-equal? (cons 1 (list 2 3)) (list 1 2 3))) (display \"cons failed\"))\n    (when (not (eq? (foldl (lambda (a r) (+ a r)) 0 (list 1 2 1 1)) 5))\n          (display \"fold failed\"))\n    (when (not (eq? (foldl (lambda (a b r) (+ a b r)) 0 (list 1 2 1 1) (list 2 2 5 5)) 19))\n          (display \"fold multiple failed\"))\n    (when (not (list-equal? (map (lambda (i) (+ i 1)) (list 1 2 3 4)) (list 2 3 4 5)))\n          (display \"map failed\"))\n    (when (not (eq? (let ((a 1) (b 2) (c 3)) (+ a b c)) 6)) (display \"let failed\"))\n    (when (not (eq? (let ((a 1) (b 2) (c 3)) (list 2 3) (+ a b c)) 6)) (display \"let(2) failed\"))\n    (when (not (eq? a 10)) (display \"set! failed\"))\n    (when (not (eq? (factorial 10) 3628800)) (display \"factorial test failed\"))\n    (when (not (eq? (list-ref (list-replace (list 1 2 3) 2 4) 2) 4)) (display \"list-replace failed\"))\n    (when (not (list-equal? (build-list 10 (lambda (n) n)) (list 0 1 2 3 4 5 6 7 8 9)))\n          (display \"build-list failed\"))\n    (when (eq? (not (+ 200 3)) 203) (display \"+ failed\"))\n    (when (not (eq? (cond (#t (+ 3 2) (+ 100 1)) (else (+ 4 3))) 101)) (display \"cond test failed\"))\n    (when (not (eq? (when #t (+ 3 2) (+ 100 1)) 101)) (display \"when test failed\"))\n    (when (not (eq? (cadr (assoc 2 (list (list 3 \"one\") (list 2 \"three\")))) \"three\")) (display \"assoc test failed\"))\n    (when (not (eq? (symbol->string \'one) \"one\")) (display \"symbol->string failed\"))\n    ;;(when (not (eq? (string->symbol \"one\") \'one)) (display \"string->symbol failed\"))\n    ;;(msg (string->symbol \"one\"))\n    ;;(msg \'one)\n    ))\n\n(unit-test)\n", "shaders/default.frag": "precision highp float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = 1.0; //dot(vec3(0,0,1),n);\n\n    if(texture2D(texture, vec2(T.s, T.t)).a == 0.0) {\n        discard;\n    }\n\n    gl_FragColor = vec4(0.0,1.0,0.0,1.0);\n    \t\t //vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                 //           DiffuseColour*C*diffuse, \n                 //       texture2D(texture, vec2(T.s, T.t)).a);\n}\n", "flx/scm/shaders.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n (define vertex-shader\n  \"\nprecision mediump float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\nattribute vec3 c;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    C = c;\n    L = vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); \n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\")\n\n(define fragment-shader\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 C;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = dot(vec3(0,0,-1),n);\n\n    if(texture2D(texture, vec2(T.s, T.t)).a == 0.0) {\n        discard;\n    }\n\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour*C*diffuse, \n                        texture2D(texture, vec2(T.s, T.t)).a);\n}\n\")\n\n\n\n\n\n\n\n(define fragment-shader-spec\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = min(1.0,dot(vec3(0.8,0.8,0),n));\n    float diffuse2 = max(0.1,dot(vec3(0,1,0),n));\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                                (DiffuseColour*diffuse + \n\t\t\t\tvec3(1,0.5,0.2)*diffuse2*0.1), 1.0);\n\t\t\t\t\n}\n\")\n\n;;                        (vec3(0,0,1) + \n;;                        step(1.0,length(P))*vec3(0,0.5,0)+\n;;                        step(1.005,length(P))*vec3(0.5,0,0)+\n;;                        step(1.02,length(P))*vec3(1,1,1))*0.75\n\n\n\n (define vertex-organism\n  \"\nprecision mediump float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    L = vec3(0,1,0); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\")\n\n(define fragment-organism\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\n\nvoid main() {\n\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = clamp(dot(vec3(0,1,0),n),0.5,1.0); \n\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour*diffuse, 1.0);\n\n/*    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            DiffuseColour, 1.0);\n*/\n}\n\")\n\n\n (define vertex-disc\n  \"\nprecision mediump float;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\nvarying vec3 C;\nuniform mat4 ModelViewMatrix;\nuniform mat4 NormalMatrix;\nuniform vec3 CameraPos;\nattribute vec3 p;\nattribute vec3 t;\nattribute vec3 n;\nattribute vec3 c;\n\nvoid main()\n{\n    P = p.xyz;\n    T = t;\n    C = c;\n    L = vec3(0,1,0); /* vec3(ModelViewMatrix*vec4((vec3(0,10,0)-p),1)); */\n    N = normalize(vec3(NormalMatrix*vec4(n,1)));\t\n    gl_Position = ModelViewMatrix * vec4(p,1);\n}\")\n\n(define fragment-disc\n  \"\nprecision mediump float;\nuniform sampler2D texture;\nuniform vec3 DiffuseColour;\nvarying vec3 P;\nvarying vec3 T;\nvarying vec3 N;\nvarying vec3 L;\nvarying vec3 C;\n\nvoid main() {\n    vec3 l = normalize(L);\n    vec3 n = normalize(N);\n    float diffuse = min(1.0,dot(vec3(0,1,0),n)+1.5);\n    gl_FragColor = vec4(texture2D(texture, vec2(T.s, T.t)).xyz *\n                            C*DiffuseColour*diffuse, 1.0);\n\n}\n\")\n", "flx/scm/canvas.jscm": ";; -*- mode: scheme; -*-\n;; Viruscraft Copyright (C) 2018 FoAM Kernow\n\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define screen-width 0)\n(define screen-height 0)\n\n(define canvas-mouse-x 0)\n(define canvas-mouse-y 0)\n(define canvas-mouse-state 0)\n(define canvas-mouse-zoom 0)\n(define canvas-mouse-zoom-delta 0)\n(define canvas-drag-x 0)\n(define canvas-drag-y 0)\n(define canvas-is-dragging #f)\n(define canvas-drag-fn (lambda () 0))\n(define canvas-mouse-clicked #f)\n\n(define canvas-event-occurred #f)\n\n(define webgl-canvas (document.getElementById \"webgl-canvas\"))\n(define canvas (document.getElementById \"canvas\"))\n(define ctx (canvas.getContext \"2d\"))\n\n(define canvas-timeout-trigger (* 2 60))\n(define canvas-timeout-time 0)\n(define canvas-delta 0)\n(define canvas-time (js \"new Date()\"))\n\n(define (canvas-update-time)\n  ;;(set! canvas-timeout-time (+ canvas-timeout-time canvas-delta))\n  ;;(when (> timeout-time timeout-trigger)\n  ;;\t(window.location.reload))\n  (let ((delta (/ (- (js \"new Date()\") canvas-time) 1000.0)))\n    ;; cap delta in case window, and rendering is paused for a while\n    (set! canvas-delta (min 0.5 delta)))\n\t      \n  (set! canvas-time (js \"new Date()\")))\n\n(define (set-canvas-drag-fn fn)\n  (set! canvas-drag-fn fn))\n\n(define canvas-font \"Arial\")\n(define (set-font! f) (set! canvas-font f))\n\n(define (canvas-init-defaults)\n  (set! ctx.fillStyle \"#000\")\n  (set! ctx.font (string-append \"30pt \" canvas-font)))\n\n(define (resize-canvas canvas) \n  ;; Lookup the size the browser is displaying the canvas.\n  ;; (let ((displayWidth canvas.clientWidth)\n  ;; \t(displayHeight canvas.clientHeight)) \n  ;;   ;; Check if the canvas is not the same size.\n  ;;   (when (or (not (eq? canvas.width displayWidth))\n  ;; \t      (not (eq? canvas.height displayHeight))\n  ;; \t      (zero? screen-width)\n  ;; \t      (zero? screen-height))\n  ;; \t  ;; Make the canvas the same size\n  ;; \t  (set! canvas.width displayWidth)\n  ;; \t  (set! canvas.height displayHeight)\n  ;; \t  (set! screen-width canvas.width)\n  ;; \t  (set! screen-height canvas.height)\n  ;; \t  (canvas-init-defaults)))\n  \n  (set! screen-width canvas.width)\n  (set! screen-height canvas.height)\n\n  )\n\n(set! window.onresize \n      (lambda ()\n\t(resize-canvas canvas)))\n\n(define (mouse-from-event canvas e state)\n  (let ((rect (canvas.getBoundingClientRect)))\n    (let ((sx (/ rect.width screen-width))\n          (sy (/ rect.height screen-height)))\n      (let ((nx (/ (- e.clientX rect.left) sx))\n\t    (ny (/ (- e.clientY rect.top) sy)))\n\t\n\t;; deal with dragging\n\t(when (and canvas-is-dragging (not canvas-event-occurred))\n\t      (set! canvas-drag-x (- nx canvas-mouse-x))\n\t      (set! canvas-drag-y (- ny canvas-mouse-y))\n\t      (canvas-drag-fn))      \n\n\t(set! canvas-event-occurred #f)\n\n\t(cond \n\t ((and (eq? state \"move\") (eq? canvas-mouse-state \"down\"))\n\t  ;; starting drag\n\t  (set! canvas-is-dragging #t))\n\t ((and canvas-is-dragging (eq? state \"up\"))\n\t  ;; ending drag\n\t  (set! canvas-is-dragging #f))\n\t (else 0))\n\t\n\t(set! canvas-mouse-x nx)\n\t(set! canvas-mouse-y ny)\n\n\t(if (and (eq? state \"down\") (not (eq? canvas-mouse-state \"down\")))\n\t    (set! canvas-mouse-clicked #t)\n\t    (set! canvas-mouse-clicked #f))\n\n\t(set! canvas-mouse-state state)))))\n\n(define (touch-from-event canvas e state)\n  (let ((e (car e.targetTouches)))\n    (mouse-from-event canvas e state)))\n\n(define (canvas-zoom e)\n  (let ((delta (if e.wheelDelta (/ e.wheelDelta 40) \n\t\t   (if e.detail (- e.detail) 0))))\n    (set! canvas-mouse-zoom-delta delta)\n    (set! canvas-mouse-zoom (+ canvas-mouse-zoom delta))\n    (e.preventDefault)))\n\n(define image-lib ())\n(define loaded-images #f)\n\n(define (canvas-loaded?)\n  loaded-images)\n\n(define (find-image fn l)\n  (cond\n   ((null? l) #f)\n   ((eq? (car (car l)) fn) (cadr (car l)))\n   (else (find-image fn (cdr l)))))\n\n(define (load-image! fn finished images)\n  (let ((image (js \"new Image()\")))\n    (set! image.onload\n          (lambda ()\t    \n\t    (console.log (+ \"loaded \" (+ \"images/\" fn)))\n            (set! image-lib (cons (list fn image) image-lib))\n            (when (eq? (length image-lib)\n                       (length images))\n\t\t  (set! loaded-images #t)\n                  (finished))))\n    (set! image.src (+ \"images/\" fn))))\n\n(define (load-images! l finished)\n  (for-each\n   (lambda (fn)\n     (load-image! fn finished l))\n   l))\n\n(define sound-lib ())\n\n(define (load-sounds! l)\n  (for-each\n   (lambda (fn)\n     (set! sound-lib\n           (cons (list fn (new Audio (string-append \"sounds/\" fn)))\n                 sound-lib)))\n   l))\n\n(define (inner_find-sound fn l)\n  (cond\n   ((null? l) #f)\n   ((eq? (car (car l)) fn) (cadr (car l)))\n   (else (inner_find-sound fn (cdr l)))))\n\n(define (find-sound fn)\n  (inner_find-sound fn sound-lib))\n\n(define game-mute #f)\n\n(define (play-sound sound)\n  (when (not game-mute) \n        (let ((snd (find-sound sound)))\n          (snd.play))))\n\n(define (play-sound-looped sound)\n  (when (not game-mute)\n        (let ((snd (find-sound sound)))\n          (if (eq? (js \"typeof snd.loop\") \"boolean\")\n              (set! snd.loop true)\n              (snd.addEventListener\n               \"ended\" (lambda ()\n                         (set! snd.currentTime 0)\n                         (snd.play)) #f))\n          (snd.play))))\n\n(define (stop-sound sound)\n  (when (game-mute game)\n        (let ((snd (find-sound sound)))\n          (snd.pause))))\n\n\n(define (mousedown-handler e) (mouse-from-event canvas e \"down\"))\n(define (touchstart-handler e) (touch-from-event canvas e \"down\"))\n(define (mousemove-handler e) (mouse-from-event canvas e \"move\"))\n(define (touchmove-handler e) \n  (e.preventDefault)\n  (touch-from-event canvas e \"move\"))\n(define (mouseup-handler e) (mouse-from-event canvas e \"up\"))\n(define (DOMMouseWheel-handler e) (mouse-from-event canvas e \"down\"))\n(define (mousewheel-handler e) (mouse-from-event canvas e \"down\"))\n\n(define (canvas-setup)\n  (canvas.addEventListener \"mousedown\" mousedown-handler)\n  (canvas.addEventListener \"touchstart\" touchstart-handler)\n  (canvas.addEventListener \"mousemove\" mousemove-handler)\n  (canvas.addEventListener \"touchmove\" touchmove-handler)      \n  (canvas.addEventListener \"mouseup\" mouseup-handler)\n;;  (canvas.addEventListener\n;;   \"touchend\" (lambda (e) (mouse-from-event canvas e \"up\")))\n;;  (canvas.addEventListener\n;;   \"touchcancel\" (lambda (e) (mouse-from-event canvas e \"up\")))\n  (canvas.addEventListener \"DOMMouseScroll\" canvas-zoom)\n  (canvas.addEventListener \"mousewheel\" canvas-zoom)\n\n  )\n\n", "flx/scm/geometry.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(define (point2-in-triangle? point a b c)\n  (define (sign2 a b c)\n    (- (* (- (vx a) (vx c)) \n\t  (- (vy b) (vy c))) \n       (* (- (vx b) (vx c)) \n\t  (- (vy a) (vy c)))))\n  (let ((b1 (< (sign2 point a b) 0))\n\t(b2 (< (sign2 point b c) 0))\n\t(b3 (< (sign2 point c a) 0)))\n    (and (eq? b1 b2) (eq? b2 b3))))\n\n(define (point3->barycentric point a b c)\n  (let ((v0 (vsub b a))\n\t(v1 (vsub c a))\n\t(v2 (vsub point a)))\n    (let ((d00 (vdot v0 v0))\n\t  (d01 (vdot v0 v1))\n\t  (d11 (vdot v1 v1))\n\t  (d20 (vdot v2 v0))\n\t  (d21 (vdot v2 v1)))\n      (let ((denom (- (* d00 d11) (* d01 d01))))\n\t(let ((v (/ (- (* d11 d20) (* d01 d21)) denom))\n\t      (w (/ (- (* d00 d21) (* d01 d20)) denom)))\n\t  (list v w (- 1 v w)))))))\n\n(define (barycentric->trilinear point a b c)\n  (vector\n   (/ (vx point) (vdist b c))\n   (/ (vy point) (vdist c a))\n   (/ (vz point) (vdist a b))))\n\n(define (geometry-unit-test)\n  (assert (point2-in-triangle? (vector 0.5 0.5 0) (vector 0 0 0) (vector 3 0 0) (vector 0 3 0)) \"point in triangle 1\")\n  (assert (not \n\t   (point2-in-triangle? (vector 5 0.5 0) (vector 0 0 0) (vector 3 0 0) (vector 0 3 0))) \"point in triangle 2\")\n  (assert (veq? (vector 0.3333333333333333 -0.3333333333333333 1)\n\t\t(point3->barycentric (vector 0 0 0) (vector 1 0 0) (vector 0 3 0) (vector 3 3 0))) \"barycentric 1\")\n  (assert (veq? (vector 1 0 0)\n\t\t(point3->barycentric (vector 0 0 0) (vector 0 0 0) (vector 3 0 0) (vector 0 3 0))) \"barycentric 2\")  \n  )\n\n(geometry-unit-test)\n", "flx/scm/maths.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n(js \"var sin=Math.sin\")\n(js \"var cos=Math.cos\")\n(js \"var tan=Math.tan\")\n(js \"var pi = Math.PI\")\n(js \"var two_pi = Math.PI*2\")\n\n(define (sqrt a) (Math.sqrt a))\n(define (pow a b) (Math.pow a b))\n(define (square x) (* x x))\n(define (trunc x) (js \"~~x\"))\n(define (feq? a b) (< (Math.abs (- a b)) Number.EPSILON))\n(define (abs x) (Math.abs x))\n(define (exp x) (Math.exp x))\n\n(define (clamp v min max)\n  (cond\n   ((< v min) min)\n   ((> v max) max)   \n   (else v)))\n\n(define (vector x y z) (list x y z))\n\n(define (vx v) (list-ref v 0))\n(define (vy v) (list-ref v 1))\n(define (vz v) (list-ref v 2))\n(define (vw v) (list-ref v 3))\n\n(define (veq? a b) \n  (and (feq? (vx a) (vx b))\n       (feq? (vy a) (vy b))\n       (feq? (vz a) (vz b))))\n\n(define (vector-clone v)\n  (vector (vx v) (vy v) (vz v)))\n\n(define (vadd a b)\n  (vector (+ (vx a) (vx b))\n          (+ (vy a) (vy b))\n          (+ (vz a) (vz b))))\n\n(define (vmag v)\n  (sqrt (+ (square (vx v))\n           (square (vy v))\n           (square (vz v)))))\n\n(define (vsub a b)\n  (vector (- (vx a) (vx b))\n          (- (vy a) (vy b))\n          (- (vz a) (vz b))))\n\n(define (vneg a)\n  (vector (- 0 (vx a))\n          (- 0 (vy a))\n          (- 0 (vz a))))\n\n(define (vmul v a)\n  (vector (* (vx v) a) (* (vy v) a) (* (vz v) a)))\n\n(define (vdiv v a)\n  (vector (/ (vx v) a) (/ (vy v) a) (/ (vz v) a)))\n\n(define (vdist a b)\n  (vmag (vsub a b)))\n\n(define (vdist-squared a b)\n  (let ((v (vsub a b)))\n    (+ (square (vx v))\n       (square (vy v))\n       (square (vz v)))))\n\n(define (vlerp v1 v2 t)\n\t(vadd v1 (vmul (vsub v2 v1) t)))\n\n(define (vnormalise v)\n  (vdiv v (vmag v)))\n\n(define (vdot a b)\n  (+ (* (vx a) (vx b)) \n     (* (vy a) (vy b))\n     (* (vz a) (vz b))))\n\n(define (vcross a b)\n  (vector (- (* (vy a) (vz b)) (* (vz a) (vy b)))\n\t  (- (* (vz a) (vx b)) (* (vx a) (vz b)))\n\t  (- (* (vx a) (vy b)) (* (vy a) (vx b)))))\n\n(define (rndvec) (vector (rndf) (rndf) (rndf)))\n(define (crndvec) (vsub (rndvec) (vector 0.5 0.5 0.5)))\n(define (crndf) (- (rndf) 0.5))\n\n(define (hcrndvec s)\n  (let ((a (* (rndf) 360)))\n    (vector (* s (sin a)) (* s (cos a)) 0)))\n\n;; steal quats from the gl library\n(define rad-conv 0.017453292)\n\n(define (quat x y z w) (quat4.create (list x y z w)))\n\n(define (qaxisangle axis angle)\n  (let ((angle (* angle 0.017453292)))\n    (let ((axis (vmul (vnormalise axis) (sin (/ angle 2)))))\n      (quat (vx axis) (vy axis) (vz axis) (cos (/ angle 2))))))\n\n(define (qaxisanglerad axis angle)\n  (let ((axis (vmul (vnormalise axis) (sin (/ angle 2)))))\n    (quat (vx axis) (vy axis) (vz axis) (cos (/ angle 2)))))\n\n(define (qnormalise q)  (quat4.normalise q))\n(define (qmul a b) (quat4.multiply a b))\n(define (qmulvec q v) (quat4.multiplyVec3 q v))\n(define (q->m q) (quat4.toMat4 q))\n(define (qslerp a b t) \n  (let ((r (quat 0 0 0 0)))\n    (quat4.slerp a b t r)))\n\n;; note - operations (and above) destructive but faster - todo: fix\n\n(define (midentity) (mat4.identity (mat4.create)))\n(define (minverse m) (mat4.inverse m))\n(define (mmul a b) (mat4.multiply a b))\n(define (mtransform m v) (mat4.multiplyVec3 m v))\n(define (mtranslate m v) (mat4.translate m v))\n(define (mscale m v) (mat4.scale m v))\n(define (mrotate m axis angle) (mat4.rotate m angle axis))\n\n\n(define (maim2 m v up)\n  (let ((l (vector 0 0 0))\n\t(u (vector 0 0 0))\n        (aim-matrix (mat4.create)))\n    (vec3.cross v up l)\n    (vec3.cross v l u)\n\n    (js \"aim_matrix[0]=vx(v);\")\n    (js \"aim_matrix[1]=vy(v);\")\n    (js \"aim_matrix[2]=vz(v);\")\n    (js \"aim_matrix[3]=0;\")\n\n    (js \"aim_matrix[4]=vx(l);\")\n    (js \"aim_matrix[5]=vy(l);\")\n    (js \"aim_matrix[6]=vz(l);\")\n    (js \"aim_matrix[7]=0;\")\n\n    (js \"aim_matrix[8]=vx(u);\")\n    (js \"aim_matrix[9]=vy(u);\")\n    (js \"aim_matrix[10]=vz(u);\")\n    (js \"aim_matrix[11]=0;\")\n\n    (js \"aim_matrix[12]=0;\")\n    (js \"aim_matrix[13]=0;\")\n    (js \"aim_matrix[14]=0;\")\n    (js \"aim_matrix[15]=1;\")\n\n    (mat4.multiply m aim-matrix)))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(define (maths-unit-test)\n  (assert (feq? (sqrt 25) 5) \"sqrt\")\n  (assert (feq? (pow 3 2) 7) \"pow\")\n  (assert (eq? (square 10) 100) \"square\")\n  (assert (eq? (trunc 40.4) 40) \"trunc\")\n  (assert (feq? 20.4 20.4) \"feq? 1\")\n  (assert (not (feq? 20.4 20.42)) \"feq? 2\")\n  (let ((v (vector 1 2 3)))\n    (assert (feq? (vx v) 1) \"vx\")\n    (assert (feq? (vy v) 2) \"vy\")\n    (assert (feq? (vz v) 3) \"vz\")\n    (assert (veq? v (vector 1 2 3)) \"veq? 1\") \n    (assert (not (veq? v (vector 30 20 30))) \"veq? 2\") \n    (let ((vc (vector-clone v)))\n      (assert (veq? vc (vector 1 2 3)) \"vector-clone 1\")\n      (set! vc (vector 0 0 0))\n      (assert (veq? v (vector 1 2 3)) \"vector-clone 2\"))\n    (assert (veq? (vadd v (vector 1 1 1)) (vector 2 3 4)) \"vadd\")\n    (assert (feq? (vmag (vector 10 0 0)) 10) \"vmag\")\n    (assert (veq? (vsub v (vector 2 2 2)) (vector -1 0 1)) \"vsub\")\n    (assert (veq? (vneg v) (vector -1 -2 -3)) \"vneg\")\n    (assert (veq? (vmul v 10) (vector 10 20 30)) \"vmul\")\n    (assert (veq? (vdiv v 2) (vector 0.5 1 1.5)) \"vdiv\")\n    (assert (feq? (vdist (vector 10 0 0) (vector 0 0 0)) 10) \"vdist\")\n    (assert (veq? (vlerp (vector 0 0 0) (vector 10 20 30) 0.5)\n\t\t  (vector 5 10 15)) \"vlerp\")\n    (assert (feq? (vmag (vnormalise (vector 1 4 923))) 1) \"vnormalise\")\n    (assert (feq? (vdot (vector 0 0 0) (vector 10 0 0)) 10) \"vdot\")\n    (assert (feq? (vcross (vector 1 0 0) (vector 0 1 0)) (vector 0 0 1)) \n\t    \"vcross\")\n    ;; todo: add quat and matrix\n    )))\n\n(maths-unit-test)\n", "flx/scm/pdata.jscm": ";; -*- mode: scheme; -*-\n;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n;;\n;; This program is free software: you can redistribute it and/or modify\n;; it under the terms of the GNU Affero General Public License as\n;; published by the Free Software Foundation, either version 3 of the\n;; License, or (at your option) any later version.\n;;\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU Affero General Public License for more details.\n;;\n;; You should have received a copy of the GNU Affero General Public License\n;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n;; pdata objects store the data so they can be manipulated, then\n;; re-uploaded using the GL VBO handle.\n;; todo:\n;; - choice of separate or interleaved (faster when modifying one type)\n;; - ability to delete CPU copies\n\n(define (make-pdata names size-verts interleaved-data)\n  (list names size-verts interleaved-data 0))\n\n(define (pdata-names v) (list-ref v 0))\n(define (pdata-modify-names! p v) (set! p (list-replace p 0 v)))\n(define (pdata-size-verts v) (list-ref v 1))\n(define (pdata-interleaved-data v) (list-ref v 2))\n(define (pdata-modify-interleaved-data! p v) (set! p (list-replace p 2 v)))\n(define (pdata-vbo v) (list-ref v 3))\n\n(define (pdata-build-vbo gl v)\n  ;;(msg (+ \"building vbo of size \" (length (pdata-interleaved-data v)) \" floats\"))\n  (let ((vb (gl.createBuffer)))\n    (gl.bindBuffer gl.ARRAY_BUFFER vb)\n    (gl.bufferData gl.ARRAY_BUFFER (new Float32Array (length (pdata-interleaved-data v))) gl.STATIC_DRAW)\n    (list-replace v 3 vb)))\n\n(define (pdata-update-vbo! gl v)\n  (gl.bindBuffer gl.ARRAY_BUFFER (pdata-vbo v))\n  (gl.bufferData gl.ARRAY_BUFFER (new Float32Array (pdata-interleaved-data v)) gl.STATIC_DRAW))\n\n(define (pdata-internal-add! gl v name)\n  (let ((oldcount (length (pdata-names v))))\n    (pdata-modify-names! v (append (pdata-names v) name))\n    (pdata-modify-interleaved-data! \n     v (pdata-insert-util (pdata-interleaved-data v) \n\t\t\t  oldcount (vector 0 0 0))))\n  (pdata-build-vbo gl v)\n  (pdata-update-vbo! gl v))\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n\n;; take a list of lists of vertex data, and output a \n;; single interleaved list\n(define (pdata-interleave-pdata-util data)\n  (js \"var ret=[];\")\n  (js \"for (var i=0; i<data[0].length; i+=3) {\") \n  (js \"  for (var d=0; d<data.length; d++) {\")\n  (js \"    ret.push(data[d][i]);\")\n  (js \"    ret.push(data[d][i+1]);\")\n  (js \"    ret.push(data[d][i+2]);\")\n  (js \"  }\")\n  (js \"}\")\n  ret)\n\n;; adds a new list to the interleaved data\n(define (pdata-insert-util data oldcount default-vector)\n  (js \"var ret=[];\")\n  (js \"var count=0;\")\n  (js \"for (var i=0; i<data.length; i+=3) {\") \n  (js \"  ret.push(data[i]);\")\n  (js \"  ret.push(data[i+1]);\")\n  (js \"  ret.push(data[i+2]);\")\n  (js \"  if (count===oldcount-1) {\")\n  (js \"    ret.push(default_vector[0]);\")\n  (js \"    ret.push(default_vector[1]);\")\n  (js \"    ret.push(default_vector[2]);\")\n  (js \"    count=-1;\")\n  (js \"  }\")\n  (js \" count++;\")\n  (js \"}\")\n  ret)\n\n(define (stride-map fn interleaved stride offset)\n  (js \"for (var stride_map_i=offset; stride_map_i<interleaved.length; stride_map_i+=stride) {\")\n  (js \"var stride_map_v=fn([interleaved[stride_map_i],interleaved[stride_map_i+1],interleaved[stride_map_i+2]]);\")\n  (js \"interleaved[stride_map_i]=stride_map_v[0];\")\n  (js \"interleaved[stride_map_i+1]=stride_map_v[1];\")\n  (js \"interleaved[stride_map_i+2]=stride_map_v[2];\")\n  (js \"};\")\n  interleaved)\n\n(define (stride-index-map fn interleaved stride offset)\n  (js \"var index_map_pos=0;\")\n  (js \"for (var stride_map_i=offset; stride_map_i<interleaved.length; stride_map_i+=stride) {\")\n  (js \"var stride_map_v=fn(index_map_pos,[interleaved[stride_map_i],interleaved[stride_map_i+1],interleaved[stride_map_i+2]]);\")\n  (js \"index_map_pos+=1;\")\n  (js \"interleaved[stride_map_i]=stride_map_v[0];\")\n  (js \"interleaved[stride_map_i+1]=stride_map_v[1];\")\n  (js \"interleaved[stride_map_i+2]=stride_map_v[2];\")\n  (js \"};\")\n  interleaved)\n\n(define (pdata-offset v name)\n  (define (_ names r)\n    (cond\n     ((null? names) #f)\n     ((eq? name (car names)) r)\n     (else (_ (cdr names) (+ r 3)))))\n  (_ (pdata-names v) 0))\n\n;; old fast hardcoded version - perhaps for default types if slow\n;  (cond ((eq? name \"p\") 0)\n;\t((eq? name \"n\") 3)\n;\t((eq? name \"t\") 6)\n;\t(else 9)))\n\n(define (pdata-internal-map! gl v fn name)\n  (let ((offset (pdata-offset v name)))  \n    (let ((stride (* (length (pdata-names v)) 3))) \n      (pdata-modify-interleaved-data!\n       v (stride-map fn (pdata-interleaved-data v) stride offset))\n      ;; might want to do this separately as it\'s potentially slow\n      (pdata-update-vbo! gl v))))\n\n(define (pdata-internal-index-map! gl v fn name)\n  (let ((offset (pdata-offset v name)))  \n    (let ((stride (* (length (pdata-names v)) 3))) \n      (pdata-modify-interleaved-data!\n       v (stride-index-map fn (pdata-interleaved-data v) stride offset))\n      ;; might want to do this separately as it\'s potentially slow\n      (pdata-update-vbo! gl v))))\n\n(define (pdata-internal-set! gl pdata name pos value)\n  (let ((offset (pdata-offset pdata name)))  \n    (let ((stride (* (length (pdata-names pdata)) 3)))\n      ;; (when (> (+ offset (* pos stride)) \n      ;; \t       (length (pdata-interleaved-data pdata))) \n      ;; \t    (msg (+ offset (* pos stride)))\n      ;; \t    (msg (length (pdata-interleaved-data pdata)))\n      ;; \t    (msg \"WOT\")\n      ;; \t    (welw)\n      ;; \t    )\n      (js \"pdata_interleaved_data(pdata)[offset+pos*stride]=value[0];\")\n      (js \"pdata_interleaved_data(pdata)[offset+pos*stride+1]=value[1];\")\n      (js \"pdata_interleaved_data(pdata)[offset+pos*stride+2]=value[2];\"))))\n\n(define (pdata-internal-ref gl pdata name pos)\n  (let ((offset (pdata-offset pdata name)))  \n    (let ((stride (* (length (pdata-names pdata)) 3))) \n      (vector\n       (js \"pdata_interleaved_data(pdata)[offset+pos*stride]\")\n       (js \"pdata_interleaved_data(pdata)[offset+pos*stride+1]\")\n       (js \"pdata_interleaved_data(pdata)[offset+pos*stride+2]\")))))\n\n;; stick em out here to avoid allocation all the time\n(define model-view (mat4.create))\n(define local (mat4.create))\n(define normal (mat4.create))\n\n(define (pdata-render pdata type gl view-camera camera-pos state tx)\n  (let ((shader (state-shader state))\n\t(texture (state-texture state))\n\t(colour (state-colour state))\n\t(hints (state-hints state)))\n\n    (mat4.multiply tx (state-tx state) local)\n    (mat4.multiply view-camera local model-view)\n    (mat4.toRotationMat local normal)\n    \n    (gl.useProgram shader)\n    (gl.bindBuffer gl.ARRAY_BUFFER (pdata-vbo pdata))\n\n    ;; set uniforms\n    (apply-uniform-items! gl shader (state-uniform-items state))\n    \n    ;; 12 bytes for 3 floats...\n    (define total-bytes (* (length (pdata-names pdata)) 12))\n\n    (index-for-each\n     (lambda (index name)\n       (gl.enableVertexAttribArray index)\n       (gl.vertexAttribPointer \n\tindex 3 gl.FLOAT false total-bytes (* index 12)))\n     (pdata-names pdata))\n\n    (if (eq? texture \"\")\n\t(bind-texture gl shader \"white.png\")\n\t(bind-texture gl shader texture))\n    \n    (gl.uniformMatrix4fv shader.ModelViewMatrix false model-view)\n    (gl.uniformMatrix4fv shader.NormalMatrix false normal)\n\n    (gl.uniform3fv shader.DiffuseColour colour)\n    (gl.uniform3fv shader.CameraPos camera-pos)\n\n    (when (bitwise-and hints FLX_HINT_SOLID)\n\t  (gl.drawArrays\n\t   (cond\n\t    ((eq? type \'lines) gl.LINES)\n\t    ((eq? type \'line-strip) gl.LINE_STRIP)\n\t    ((eq? type \'line-loop) gl.LINE_LOOP)\n\t    ((eq? type \'triangles) gl.TRIANGLES)\n\t    ((eq? type \'triangle-strip) gl.TRIANGLE_STRIP)\n\t    ((eq? type \'triangle-fan) gl.TRIANGLE_FAN)\n\t    (else gl.TRIANGLES))\n\t   0 (pdata-size-verts pdata))) \n    (when (bitwise-and hints FLX_HINT_WIRE)\n\t  (gl.drawArrays gl.LINE_STRIP 0 (pdata-size-verts pdata)))\n    ))\n", "scm/parts.jscm": ";; -*- mode: scheme; -*-\n(load \"flx/scm/fluxus.jscm\")\n\n(define weave-height 0.5)\n(define thread-width 0.2)\n\n(define thread-start (/ thread-width 2))\n(define thread-end (- 1 thread-start))\n\n(define (build-parts)\n  (list\n   ;; forward up\t\n   (let ((p (build-polygons \'triangles 6)))    \n     (with-primitive\n      p\n      (hide 1)\n      (pdata-set! \"p\" 0 (vector 0 thread-start weave-height))\n      (pdata-set! \"p\" 1 (vector 1 thread-start weave-height))\n      (pdata-set! \"p\" 2 (vector 1 thread-end weave-height))\n      (pdata-set! \"p\" 3 (vector 0 thread-start weave-height))\n      (pdata-set! \"p\" 4 (vector 0 thread-end weave-height))\n      (pdata-set! \"p\" 5 (vector 1 thread-end weave-height))\n      (pdata-map! (lambda (c) (vector 1 1 1)) \"c\")\n      (pdata-map! (lambda (n) (vector 0 0 -1)) \"n\")\n      (pdata-upload!))\n     p)\n\n   ;; forward down\n   (let ((p (build-polygons \'triangles 6)))    \n     (with-primitive\n      p\n      (hide 1)\n      (pdata-set! \"p\" 0 (vector 0 thread-start -weave-height))\n      (pdata-set! \"p\" 1 (vector 1 thread-start -weave-height))\n      (pdata-set! \"p\" 2 (vector 1 thread-end -weave-height))\n      (pdata-set! \"p\" 3 (vector 0 thread-start -weave-height))\n      (pdata-set! \"p\" 4 (vector 0 thread-end -weave-height))\n      (pdata-set! \"p\" 5 (vector 1 thread-end -weave-height))\n      (pdata-map! (lambda (c) (vector 1 1 1)) \"c\")\n      (pdata-map! (lambda (n) (vector 0 0 -1)) \"n\")\n      (pdata-upload!))\n     p)\n   \n   ;; right\n   (let ((p (build-polygons \'triangle-fan 13)))    \n     (with-primitive\n      p\n      (hide 1)\n      (pdata-index-map!\n       (lambda (i p)  \n\t (if (zero? i)\n\t     (vector 0 0 0)\n\t     (let ((a (* (/ (- i 1) 11) 0.5 pi)))\n\t       (vector (cos a) (sin a) 0))))\n       \"p\")\n      (pdata-map! (lambda (c) (vector 1 1 1)) \"c\")\n      (pdata-map! (lambda (n) (vector 0 0 -1)) \"n\")\n      (pdata-upload!))\n     p)\n\n   ;; left\n   (let ((p (build-polygons \'triangle-fan 13)))    \n     (with-primitive\n      p\n      (hide 1)\n      (pdata-index-map!\n       (lambda (i p)  \n\t (if (zero? i)\n\t     (vector 0 1 0)\n\t     (let ((a (* (/ (- (- i 1) 11) 11) 0.5 pi)))\n\t       (vector (cos a) (+ (sin a) 1) 0))))\n       \"p\")\n      (pdata-map! (lambda (c) (vector 1 1 1)) \"c\")\n      (pdata-map! (lambda (n) (vector 0 0 -1)) \"n\")\n      (pdata-upload!))\n     p)\n\n   ;; up\n   (let ((p (build-polygons \'triangle-strip 24)))    \n     (with-primitive\n      p\n      (hide 1)\n      (rotate (vector 45 0 0))\n      (pdata-index-map!\n       (lambda (i p)\n\t (vector\n\t  (/ (quotient i 2) 11)\n\t  (if (zero? (modulo i 2)) thread-start thread-end)\n\t  (* (cos (* pi (/ (quotient i 2) 12))) -weave-height)))\n       \"p\")\n      (pdata-map! (lambda (c) (vector 1 1 1)) \"c\")\n      (pdata-index-map!\n       (lambda (i n)\n\t (if (or (< i 2))\n\t     (vector 0 0 -1)\n\t     (vcross\n\t      (vnormalise (vsub (pdata-ref \"p\" (- i 2)) (pdata-ref \"p\" i)))\n\t      (vector 0 1 0))))\t  \n       \"n\")\n      (pdata-upload!))\n     p)\n   \n   ;; down\n   (let ((p (build-polygons \'triangle-strip 24)))    \n     (with-primitive\n      p\n      (hide 1)\n      (rotate (vector 45 0 0))\n      (pdata-index-map!\n       (lambda (i p)\n\t (vector\n\t  (/ (quotient i 2) 11)\n\t  (if (zero? (modulo i 2)) thread-start thread-end)\n\t  (* (cos (* pi (/ (quotient i 2) 12))) weave-height)))\n       \"p\")\n      (pdata-map! (lambda (c) (vector 1 1 1)) \"c\")\n      (pdata-index-map!\n       (lambda (i n)\n\t (if (or (< i 2))\n\t     (vector 0 0 -1)\n\t     (vcross\n\t      (vnormalise (vsub (pdata-ref \"p\" (- i 2)) (pdata-ref \"p\" i)))\n\t      (vector 0 1 0))))\t  \n       \"n\")\n      (pdata-upload!))\n     p)\n\n\n))\n\n\n"});
    init_static(';; -*- mode: scheme; -*-\n\
;; Planet Fluxus Copyright (C) 2013 Dave Griffiths\n\
;;\n\
;; This program is free software: you can redistribute it and/or modify\n\
;; it under the terms of the GNU Affero General Public License as\n\
;; published by the Free Software Foundation, either version 3 of the\n\
;; License, or (at your option) any later version.\n\
;;\n\
;; This program is distributed in the hope that it will be useful,\n\
;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n\
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\
;; GNU Affero General Public License for more details.\n\
;;\n\
;; You should have received a copy of the GNU Affero General Public License\n\
;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\
\n\
;; todo make data-driven and make define-syntax!\n\
(define ret (lambda (code)\n\
  (cond\n\
   ((not (list? code)) code)\n\
   ((null? code) ())\n\
\n\
   ;; with-state\n\
   ((eq? (car code) "with_state")\n\
    (append\n\
     (list "begin" (list "push"))\n\
      (list (list "let"\n\
                  (list (list "with_state_ret" (append (list "begin") (do-syntax (cdr code)))))\n\
                  (list "pop") "with_state_ret"))))\n\
\n\
   ;; with-primitive\n\
   ((eq? (car code) "with_primitive")\n\
    (append\n\
     (list "begin" (list "grab" (cadr code)))\n\
     (list (list "let"\n\
                 (list (list "with_primitive_ret" (append (list "begin") (do-syntax (cdr code)))))\n\
                 (list "ungrab") "with_primitive_ret"))))\n\
\n\
   ((eq? (car code) "every_frame")\n\
    (append\n\
     (list "every_frame_impl")\n\
     (list\n\
      (list "lambda" (list)\n\
            (do-syntax (cdr code))))))\n\
\n\
\n\
   ;; define a function\n\
   ((and\n\
     (eq? (car code) "define")\n\
     (list? (cadr code)))\n\
    (let ((name (car (cadr code)))\n\
          (args (cdr (cadr code)))\n\
          (body (do-syntax (cdr (cdr code)))))\n\
      (list "define" name (append (list "lambda" args) body))))\n\
\n\
   (else (cons (do-syntax (car code))\n\
               (do-syntax (cdr code)))))))\n\
\n\
ret\n\
',';; -*- mode: scheme; -*-\n\
\n\
(load "flx/scm/fluxus.jscm")\n\
(load "flx/scm/canvas.jscm")\n\
\n\
(load "scm/weave-builder.jscm")\n\
(load "scm/constructor.jscm")\n\
(load "scm/parts.jscm")\n\
\n\
(load-mesh-cache "models/receptor-donut.obj")\n\
\n\
(msg (weave-builder 0 (list 1 1 0 0) 0 4 "?"))\n\
\n\
(define (loom warp weft)\n\
  (list warp weft))\n\
\n\
(define (loom-warp l) (list-ref l 0))\n\
(define (loom-weft l) (list-ref l 1))\n\
\n\
\n\
;; ----------------------------------------------------------\n\
\n\
(define (build-loom kernel warp-threads weft-threads)\n\
  (loom\n\
   (build-list\n\
    warp-threads\n\
    (lambda (i)\n\
      (constructor\n\
       (weave-builder-warp kernel i weft-threads)\n\
       0\n\
       (mrotate\n\
	(mtranslate (midentity) (vector (+ i 0.5) 1.5 0))\n\
	(vector 0 0 1)\n\
	(* -90 rad-conv))\n\
       (vector 0 0 0.5)\n\
       \'())))\n\
   (build-list\n\
    1 (lambda (i)\n\
	(constructor\n\
	 ;;(list "f" "f" "f" "f" "l" "l" "f")\n\
	 (weave-builder-weft kernel warp-threads 0 weft-threads)\n\
	 0\n\
	 (midentity)\n\
	 (vector 1 1 1)\n\
	 \'())))))\n\
\n\
(define (loom-update l parts)\n\
  (loom\n\
   (map (lambda (e) (constructor-update e parts)) (loom-warp l))\n\
   (map (lambda (e) (constructor-update e parts)) (loom-weft l))))\n\
\n\
;;---------------------------------------------------------\n\
\n\
(define l 0)\n\
(define loom-root 0)\n\
(define parts \'())\n\
\n\
(define f 0)\n\
  \n\
(define (build)  \n\
  (console.log "building")\n\
  (set! parts (build-parts))\n\
  (set! loom-root (with-state\n\
  		   (translate (vector -5 5 0))\n\
  		   (rotate (vector 30 40 0))\n\
  		   (build-locator)))\n\
  (with-state\n\
   (parent loom-root)\n\
   (shader-assign-compiled "default")  \n\
\n\
   ;;(texture (load-texture "thread.png"))\n\
   (set! l (build-loom\n\
  	    (list\n\
	     (list 1 1 0 0)\n\
	     (list 0 1 1 0)\n\
	     (list 0 0 1 1)\n\
	     (list 1 0 0 1)\n\
\n\
	     \n\
;  	     (list 1 1 0 0)\n\
;  	     (list 0 1 0 0)\n\
;  	     (list 0 0 0 0)\n\
;  	     (list 0 0 0 0)\n\
  	     \n\
\n\
;	     (list 1 0)\n\
;  	     (list 0 0)\n\
\n\
  	     )\n\
  	    12 12)))\n\
  \n\
  )\n\
\n\
\n\
(define (read-number id)\n\
  (let ((w ($ (string-append "#" id))))\n\
    (parseFloat (js "w[0].value"))))\n\
\n\
(define (update)\n\
  (msg (read-number "infection"))\n\
  )\n\
\n\
(define (render)\n\
  (when (zero? (modulo f 10))\n\
	(with-state\n\
	 (parent loom-root)\n\
	 (set! l (loom-update l parts))))\n\
  (with-primitive\n\
   loom-root\n\
   (rotate (vector 0 0 0)))\n\
  (set! f (+ f 1)))\n\
\n\
(canvas-setup)\n\
;;(clear-colour (list 0 1.0 0 0))\n\
(set-camera-angle 25)\n\
(set-camera-transform (mtranslate (midentity) (vector 0 0 -38)))\n\
(resize-glcanvas webgl-canvas)\n\
\n\
(shader-compile "default" (list "p" "n" "t" "c")\n\
		"shaders/default.vert"\n\
		"shaders/default.frag")\n\
\n\
\n\
(build)\n\
\n\
(every-frame (render))\n\
');    
    });
  </script>
</body>
</html>
