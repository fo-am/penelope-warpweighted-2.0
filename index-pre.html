<!DOCTYPE html>
<html>
  <head>
	<title>Penelope warpweighted loom 2.0</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="css/flickity.css">
  </head>
  <body>
	<div class="container">
	  <div class="top-row">		
		<div class="controls">

		  <div class="warp-container">
			<div class="dropdown">
			  <span>?</span>
			  <div class="dropdown-content">
				Here you can choose warp (vertical) thread colours
				and add and remove threads to change the warp colour
				sequence.
			  </div>
			</div>
			<div id="warp-colours"></div>
			<div class="col">
			  <button class="yarn-button" onclick="add_colour('warp');">+</button>
			  <button class="yarn-button" onclick="remove_colour('warp');">-</button>
			</div>
		  </div>

		  <div class="draft-container">
			<div class="dropdown">
			  <span>?</span>
			  <div class="dropdown-content">
				This pattern (known as the draft pattern) describes
				the structure of the weave. Black indicates warp
				(vertical) threads will go over weft (horizontal)
				threads, white is the inverse.
			  </div>
			</div>
			<div id="draft"></div>
			<div class="controls">
			  <input type="number" id="warp-threads" value='4' onchange="update_draft();" style="width:3em;"/> x
			  <input type="number" id="weft-threads" value='4' onchange="update_draft();" style="width:3em;"/>
			</div>
		  </div>

		  <div class="weft-container">
			<div class="dropdown">
			  <span>?</span>
			  <div class="dropdown-content">
				Here you can choose weft (horizontal) thread colours
				and add and remove threads to change the weft colour
				sequence.
			  </div>
			</div>
			<div id="weft-colours"></div>
			<div class="row">
			  <button class="yarn-button" onclick="add_colour('weft');">+</button>
			  <button class="yarn-button" onclick="remove_colour('weft');">-</button>
			</div>
		  </div>

		  <h1>=</h1>

		</div> <!-- controls -->


		<!--
			<button id="invert" onclick="invert_draft();">Invert</button>
			<button id="clear" onclick="clear_draft();">Clear</button>
			-->

		<div class="sim-container">
		  <canvas class="canvas" id="webgl-canvas" width="509" height="400"></canvas>
		</div>
		
	  </div> <!-- row -->


	  <button type="button" class="collapsible" style="display:none">+ fine tune</button>
	  <div class="collapsible-content" style="display:none">
		<table>	  
		  <tr><td>Thread width</td><td><input type="number" id="thread-width" value='0.8' onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Weave depth</td><td><input type="number" id="weave-depth" value='0.2' onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Fabric warp size</td><td><input type="number" id="fabric-warp-size" value='20' onchange="update();" style="width:5em;"/></td></tr>
		  <tr><td>Fabric weft size</td><td><input type="number" id="fabric-weft-size" value='14' onchange="update();" style="width:5em;"/></td></tr>
		  <tr><td>Texture</td><td><input type="checkbox" checked id="render-texture" onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Flat</td><td><input type="checkbox" checked id="render-flat" onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Contrast</td><td><input type="number" id="render-contrast" value="0.5" onchange="update_look();" style="width:5em;"/></td></tr>
		</table>
		
		<table>
		  <tr><td>Loom speed</td><td><input type="number" id="loom-speed" value='0.001' onchange="update_speed();" style="width:5em;"/></td></tr>
		  <tr><td>X rotation</td><td><input type="number" id="camera-rot-x" value='0' onchange="update_view();" style="width:5em;"/></td></tr>
		  <tr><td>Y rotation</td><td><input type="number" id="camera-rot-y" value='-20' onchange="update_view();" style="width:5em;"/></td></tr>
		  <tr><td>Distance</td><td><input type="number" id="camera-distance" value='49' onchange="update_view();" style="width:5em;"/></td></tr>
		</table>
	  </div>
  
	  	  
	  <div class="carousel" data-flickity='{ "cellAlign": "left", "contain": true, "wrapAround": true }' >		

		<div class="carousel-cell">
		  <div class="carousel-contents">

			<div class="carousel-left">
			  <h2>PENELOPE warp weighted loom simulation</h2>
			  <p>
				Warp weighted looms were used by the ancient Greeks.
				This explorable explanation demonstrates how weavers
				in ancient times calculated complex algorithmic
				pattern manipulation which shows that digital
				thinking has a longer and richer history than
				we are often led to believe.
			  </p>
			  <p>
				This is a small collection of weaving patterns for you
				to explore - can you figure them all out? 
			  </p>
			</div>
			<div class="carousel-right" style="padding-left: 5em;">
			  <img src="images/example.jpg">
			</div>
			
		  </div>
		</div>


		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Plain weave</h2>
			  <p>
				The default checkerboard pattern being woven above is
				plain weave (also known as tabby) and is the simplest,
				and strongest weave.
			  </p>
			  <p>
				Can you click on the light brown squares to change the
				warp and weft colours to create these horizontal
				stripes? Click on the ? button if you want to see the
				answer.
			  </p>
			</div>
			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/tabby-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/tabby-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Plain weave 2</h2>
			  <p>
				This is a example of how an interference between
				colour and structure create visual patterns in
				weaving. Can you work out how to change the colour
				order to make the stripes go in the other direction
				like this?
			  </p>
			</div>
			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/tabby2-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/tabby2-pat.png" class="pat-image">
			  </div>			  
			</div>	
			
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Gingham</h2>
			  <p>
				Gingham is a type of plaid pattern made with plain
				weave which is used all around the world in different
				cultures. 
			  </p>
			  <p>
				Can you decypher this mystery and replicate it for
				yourself?
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/gingham-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/gingham-pat.png">
			  </div>			  
			</div>	

		  </div>
		</div>


		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Basket weave</h2>
			  <p>
				Lets move beyond plain weaving and try changing the
				weave 'draft pattern' in the middle. The pattern on
				the right shows a development of plan weave known as
				basket weave.
			  </p>
			  <p>
				Can you work out how it's made?
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/basket-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/basket-pat.png">
			  </div>			  
			</div>	

		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Basket weave 2</h2>
			  <p>
				Interestingly, basket weave often creates diagonal
				patterns when you alternate the colour threads, can
				you replicate the one on the right?
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/basket2-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/basket2-pat.png">
			  </div>			  
			</div>	

		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Twill</h2>
			  <p>
				Twill is a fabric which stretches and is used in a lot
				of clothes, such as denim. This one is known as 2/2
				twill as each thread in each direction crosses two
				others.
			  </p>
			  <p>
				Can you figure out the draft pattern used to create
				it? There are a few options depending on how you
				offset the pattern so your might not match exactly but
				still be a twill.
			  </p>
			  
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/22twill-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/22twill-pat.png">
			  </div>			  
			</div>	

		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Houndstooth</h2>
			  <p>
				This famous pattern using 22 twill is called
				Houndstooth (also pepita, dogstooth, or pied-de-poule)
				and is often used in fashion.
			  </p>
			  <p>
				If you made the gingham pattern you'll find it quite
				easy!
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/houndstooth-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/houndstooth-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>
		

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Ancient squares</h2>
			  <p>
				Now we come to the kinds of patterns popular with the
				ancient Greek weavers. These are highly advanced in
				that they are all combinations of plain weave stripes,
				and all use just two alternating colours in their warp
				and weft direction. With these contraints it's
				incredible the complex patterns you can create.
			  </p>
			  <p>
				This is tricky, but uses a 8x8 draft pattern and is
				the same as used on the photo of the weaving on the
				warp weighted loom at the start.
			  </p>
			  
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/squares-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/squares-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Wave pattern</h2>
			  <p>
				These draft patterns can be difficult to understand,
				but they can be recombined logically in different ways
				to make new patterns.
			  </p>
			  <p>
				If you look closely, this one is built from sections
				of the the previous pattern ordered differently.
			  </p>			  
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/bullleaper-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/bullleaper-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>


		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Bull leaping fresco pattern (8x8)</h2>
			  <p>
				Most of our understanding of the fabric of the ancient
				world comes to us via images on pottery. This pattern
				is similar to that seen in the background of
				the <a href="https://zenodo.org/record/4297587">Bull-Leaping Fresco in Knossos in
				Crete</a>.
			  </p>
			  <p>
				By attempting to replicate the pattern here, you are
				undertaking a kind of experimental archeology connecting
				you with the weavers of antiquity.
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/88truebull-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/88truebull-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Bull leaping fresco pattern (12x12)</h2>
			  <p>
				Although smaller patterns can be easier to explore, if
				we scale up the draft, the underlying logic becomes
				clearer. This is the form of pattern as the previous
				one, but using a 12x12 draft.
			  </p>
			  <p>
				Try changing the order of the colours - how many
				different patterns do you see with just two colours?
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/1212truebull-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/1212truebull-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Meander (6x6 version)</h2>
			  <p>
				The ancient Greeks were particularly fond of meanders
				in their fabric. It can be seen in the border in the
				<a href="https://penelope.hypotheses.org/79">famous
				image of Penelope in front of her warp weighted
				loom</a> and so it has a special place in our PENELOPE
				project.
			  </p>
			  <p>
				This one is created from a 6x6 draft pattern.
			  </p>			  
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/6meander-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/6meander-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Meander (8x8 version)</h2>
			  <p>
				A larger version of the meander. As meanders take up
				the full width of the draft pattern we can start to
				see how these patterns are scaled, and some of the
				underlying mathematics at play.
			  </p>
			  <p>
				Often scaling involves a complete change of how a
				pattern is made, it's not always possible to be this
				neat.
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/8meander-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/8meander-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>


		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Double meander</h2>
			  <p>
				Finally, this is a large double meander using a 12x12
				draft pattern. The solution is surprisingly easy to
				remember, try starting with the previous one and
				altering it's size and shape.
			  </p>
			</div>

			<div class="carousel-right">
			  <button type="button" class="collapsible">?</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/1212wave-ans.png">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/1212wave-pat.png">
			  </div>			  
			</div>	
		  </div>
		</div>
		
	  </div> <!-- carousel -->

	  <div class="code-container" style="display: none;">
		<textarea id="code"></textarea>
		output
		<pre><div id="output"></div></pre>
	  </div>
	  
	</div> <!-- container --> 
	
  </body>
  <script src="js/jquery-1.9.1.min.js"></script>
  <script src="js/colourselect.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="flx/js/glMatrix.js"></script>
  <script src="flx/js/glObjLoader.js"></script>
  <script src="flx/js/glPlyLoader.js"></script>
  <script src="flx/js/ditto.js"></script>
  <script src="js/flickity.pkgd.min.js"></script>
  <script>
    $( document ).ready(function() {
	init_resources({{RESOURCES}});
	init_static('{{SYNTAX}}','{{CODE}}');

var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
	if (content.style.display === "flex") {			
      content.style.display = "none";
    } else {
      content.style.display = "flex";
    }
	var content2 = content.nextElementSibling;
	if (content2.style.display === "flex") {
      content2.style.display = "none";
    } else {
      content2.style.display = "flex";
    }
  });
} 
	
    });
  </script>
</body>
</html>
