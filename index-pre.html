<!DOCTYPE html>
<html>
  <head>
	<title>Penelope warpweighted loom 2.0</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="css/flickity.css">
  </head>
  <body>
	<div class="container">
	  <div class="row">
		
		<div class="controls">
		  
		  <div class="row">
			<div class="warp-container">
			  <div class="dropdown">
				<span>?</span>
				<div class="dropdown-content">
				  Here you can choose warp (vertical) thread colours
				  and add and remove threads to change the warp colour
				  sequence.
				</div>
			  </div>
			  <div id="warp-colours"></div>
			  <div class="col">
				<button class="yarn-button" onclick="add_colour('warp');">+</button>
				<button class="yarn-button" onclick="remove_colour('warp');">-</button>
			  </div>
			</div>

			<div class="draft-container">
			  <div class="dropdown">
				<span>?</span>
				<div class="dropdown-content">
				  This pattern (known as the draft pattern) describes
				  the structure of the weave. Black indicates warp
				  (vertical) threads will go over weft (horizontal)
				  threads, white is the inverse.
				</div>
			  </div>
			  <div id="draft"></div>
			  <div class="row">
				<input type="number" id="warp-threads" value='4' onchange="update_draft();" style="width:3em;"/> x
				<input type="number" id="weft-threads" value='4' onchange="update_draft();" style="width:3em;"/>
			  </div>
			</div>

			<div class="weft-container">
			  <div class="dropdown">
				<span>?</span>
				<div class="dropdown-content">
				  Here you can choose weft (horizontal) thread colours
				  and add and remove threads to change the weft colour
				  sequence.
				</div>
			  </div>
			  <div id="weft-colours"></div>
			  <div class="row">
				<button class="yarn-button" onclick="add_colour('weft');">+</button>
				<button class="yarn-button" onclick="remove_colour('weft');">-</button>
			  </div>
			</div>

			<h1>=</h1>

		  </div> <!-- row -->


		  <!--
			  <button id="invert" onclick="invert_draft();">Invert</button>
			  <button id="clear" onclick="clear_draft();">Clear</button>
			  -->

<!--		<div class="custom-select">
		  <select>
			<option value="#637a8f">&nbsp;</option>
			<option value="#637a8f">light woad</option>
			<option value="#445a8a">dark woad</option>
			<option value="#574e5e">oak gall</option>
			<option value="#a11939">dark madder</option>
			<option value="#de9170">light madder</option>
			<option value="#eae82b">light weld</option>
			<option value="#929240">dark weld</option>
		  </select>
		</div>
-->
		  
		</div> <!-- controls -->

      <div class="sim-container">
		<canvas class="canvas" id="webgl-canvas" width="509" height="400"></canvas>
<!--		<canvas class="canvas" id="canvas" width="509" height="400"></canvas> -->
	  </div>


	  </div> <!-- row -->
		
	  <button type="button" class="collapsible" style="display:none">+ fine tune</button>
	  <div class="collapsible-content">
		<table>	  
		  <tr><td>Thread width</td><td><input type="number" id="thread-width" value='0.8' onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Weave depth</td><td><input type="number" id="weave-depth" value='0.2' onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Fabric warp size</td><td><input type="number" id="fabric-warp-size" value='20' onchange="update();" style="width:5em;"/></td></tr>
		  <tr><td>Fabric weft size</td><td><input type="number" id="fabric-weft-size" value='12' onchange="update();" style="width:5em;"/></td></tr>
		  <tr><td>Texture</td><td><input type="checkbox" checked id="render-texture" onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Flat</td><td><input type="checkbox" checked id="render-flat" onchange="update_look();" style="width:5em;"/></td></tr>
		  <tr><td>Contrast</td><td><input type="number" id="render-contrast" value="0.5" onchange="update_look();" style="width:5em;"/></td></tr>
		</table>
		
		<table>
		  <tr><td>Loom speed</td><td><input type="number" id="loom-speed" value='0.001' onchange="update_speed();" style="width:5em;"/></td></tr>
		  <tr><td>X rotation</td><td><input type="number" id="camera-rot-x" value='0' onchange="update_view();" style="width:5em;"/></td></tr>
		  <tr><td>Y rotation</td><td><input type="number" id="camera-rot-y" value='-20' onchange="update_view();" style="width:5em;"/></td></tr>
		  <tr><td>Distance</td><td><input type="number" id="camera-distance" value='49' onchange="update_view();" style="width:5em;"/></td></tr>
		</table>
	  </div>
  
	  <!-- 
		   wwl : weavers of ancient greece were digital
           pm : we use it with a tangible interface
           can you figure out how to make these patterns?
           horizontal stripes
           vertical stripes - show interfence system
		   twill
		   satin
		   basket

		-->
	  
	  
	  <div class="carousel" data-flickity='{ "cellAlign": "left", "contain": true, "wrapAround": true }' >		
		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>PENELOPE warp weighted loom simulation</h2>
			  <p>
				Warp weighted looms were used by the ancient Greeks.
				This explorable explanation demonstrates how weavers
				in ancient times calculated complex algorithmic
				pattern manipulation which shows that digital
				thinking has a long history.
			  </p>
			  <p>
				This is a small collection of weaving patterns for you
				to explore - can you figure them all out?
			  </p>
			</div>
			<div>
			  <img src="images/example.jpg" width="300">
			</div>
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Plain weave</h2>
			  <p>
				The default checkerboard pattern being woven above is
				plain weave (also known as tabby) and is the simplest,
				and strongest weave.
			  </p>
			  <p>
				Can you click on the light brown squares to change the
				warp and weft colours to create these horizontal
				stripes?
			  </p>
			</div>
			<div>
			  <button type="button" class="collapsible">See the answer</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/tabby-ans.png" width="300">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/tabby-pat.png" width="300">
			  </div>
			  
			</div>
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Plain weave 2</h2>
			  <p>
				This is a example of how an interference between
				colour and structure create visual patterns in
				weaving. Can you work out how to change the colour
				order to make the stripes go in the other direction
				like this?
			  </p>
			</div>
			<div>
			  <button type="button" class="collapsible">See the answer</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/tabby2-ans.png" width="300">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/tabby2-pat.png" width="300">
			  </div>			  
			</div>
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Gingham</h2>
			  <p>
				Gingham is a type of plaid pattern made with plain
				weave which is used all around the world in different
				cultures. 
			  </p>
			  <p>
				Can you decypher this mystery and replicate it for
				yourself?
			  </p>
			</div>
			<div>
			  <button type="button" class="collapsible">See the answer</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/gingham-ans.png" width="300">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/gingham-pat.png" width="300">
			  </div>
			  
			</div>
		  </div>
		</div>


		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Basket weave</h2>
			  <p>
				Lets try changing the weave 'draft pattern' in the
				middle. The pattern on the right shows a development
				of plan weave known as basket weave.
			  </p>
			  <p>
				Can you work out how it's made?
			  </p>
			</div>
			<div>
			  <button type="button" class="collapsible">See the answer</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/basket-ans.png" width="300">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/basket-pat.png" width="300">
			  </div>			  
			</div>
		  </div>
		</div>

		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Basket weave 2</h2>
			  <p>
				Interestingly, basket weave often creates diagonal
				patterns when you alternate the colour threads, can
				you replicate the one on the right?
			  </p>
			</div>
			<div>
			  <button type="button" class="collapsible">See the answer</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/basket2-ans.png" width="300">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/basket2-pat.png" width="300">
			  </div>			  
			</div>
		  </div>
		</div>
		
		<div class="carousel-cell">
		  <div class="carousel-contents">
			<div class="carousel-left">
			  <h2>Houndstooth</h2>
			  <p>
				This famous pattern is called Houndstooth (also
				dogstooth, dogtooth, dog's tooth, or pied-de-poule) and
				is often used in fashion. 
			  </p>
			</div>
			<div>
			  <button type="button" class="collapsible">See the answer</button>
			  <div class="collapsible-content" style="display:none;">
				<img src="images/houndstooth-ans.png" width="300">
			  </div>
			  <div class="uncollapsible-content"  style="display:flex;">
				<img src="images/houndstooth-pat.png" width="300">
			  </div>
			  
			</div>
		  </div>
		</div>


	  </div>
	  
	  <div class="code-container" style="display: none;">
		<textarea id="code"></textarea>
		output
		<pre><div id="output"></div></pre>
	  </div>
	  
	</div> <!-- container --> 
	
  </body>
  <script src="js/jquery-1.9.1.min.js"></script>
  <script src="js/colourselect.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="flx/js/glMatrix.js"></script>
  <script src="flx/js/glObjLoader.js"></script>
  <script src="flx/js/glPlyLoader.js"></script>
  <script src="flx/js/ditto.js"></script>
  <script src="js/flickity.pkgd.min.js"></script>
  <script>
    $( document ).ready(function() {
	init_resources({{RESOURCES}});
	init_static('{{SYNTAX}}','{{CODE}}');

var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
				console.log(content)
				console.log(content.style.display)
	if (content.style.display === "flex") {			
      content.style.display = "none";
    } else {
      content.style.display = "flex";
    }
	var content2 = content.nextElementSibling;
	console.log(content2)			
	console.log(content2.style.display)
	if (content2.style.display === "flex") {
      content2.style.display = "none";
    } else {
      content2.style.display = "flex";
    }
  });
} 
	
    });
  </script>
</body>
</html>
